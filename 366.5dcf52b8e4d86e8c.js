(self.webpackChunkapp_btcmtx=self.webpackChunkapp_btcmtx||[]).push([[366],{5972:(De,Z,G)=>{"use strict";Z.Xx=Z._w=Z.aP=Z.KS=Z.jQ=void 0;G(5465);const ve=G(6713);G(3403);function X(V){const k=new Float64Array(16);if(V)for(let U=0;U<V.length;U++)k[U]=V[U];return k}Z.jQ=64,Z.KS=64,Z.aP=32,new Uint8Array(32)[0]=9;const he=X(),te=X([1]),le=(X([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),X([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222])),Re=X([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),me=X([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);X([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function de(V,k){for(let U=0;U<16;U++)V[U]=0|k[U]}function Ge(V){let k=1;for(let U=0;U<16;U++){let h=V[U]+k+65535;k=Math.floor(h/65536),V[U]=h-65536*k}V[0]+=k-1+37*(k-1)}function Me(V,k,U){const h=~(U-1);for(let N=0;N<16;N++){const Ie=h&(V[N]^k[N]);V[N]^=Ie,k[N]^=Ie}}function ke(V,k){const U=X(),h=X();for(let N=0;N<16;N++)h[N]=k[N];Ge(h),Ge(h),Ge(h);for(let N=0;N<2;N++){U[0]=h[0]-65517;for(let Ne=1;Ne<15;Ne++)U[Ne]=h[Ne]-65535-(U[Ne-1]>>16&1),U[Ne-1]&=65535;U[15]=h[15]-32767-(U[14]>>16&1);const Ie=U[15]>>16&1;U[14]&=65535,Me(h,U,1-Ie)}for(let N=0;N<16;N++)V[2*N]=255&h[N],V[2*N+1]=h[N]>>8}function ne(V){const k=new Uint8Array(32);return ke(k,V),1&k[0]}function fe(V,k,U){for(let h=0;h<16;h++)V[h]=k[h]+U[h]}function q(V,k,U){for(let h=0;h<16;h++)V[h]=k[h]-U[h]}function Q(V,k,U){let h,N,Ie=0,Ne=0,Xe=0,ut=0,rt=0,ot=0,Ut=0,nr=0,ir=0,$t=0,Ht=0,Ot=0,Rt=0,it=0,pt=0,at=0,ct=0,Bt=0,Jt=0,ur=0,lr=0,sr=0,pr=0,gr=0,Ur=0,yr=0,br=0,ln=0,Qn=0,fn=0,hn=0,At=U[0],Tt=U[1],jt=U[2],_t=U[3],Vt=U[4],Qt=U[5],Nt=U[6],Ft=U[7],mt=U[8],Ct=U[9],bt=U[10],gt=U[11],kt=U[12],Yt=U[13],Kt=U[14],Gt=U[15];h=k[0],Ie+=h*At,Ne+=h*Tt,Xe+=h*jt,ut+=h*_t,rt+=h*Vt,ot+=h*Qt,Ut+=h*Nt,nr+=h*Ft,ir+=h*mt,$t+=h*Ct,Ht+=h*bt,Ot+=h*gt,Rt+=h*kt,it+=h*Yt,pt+=h*Kt,at+=h*Gt,h=k[1],Ne+=h*At,Xe+=h*Tt,ut+=h*jt,rt+=h*_t,ot+=h*Vt,Ut+=h*Qt,nr+=h*Nt,ir+=h*Ft,$t+=h*mt,Ht+=h*Ct,Ot+=h*bt,Rt+=h*gt,it+=h*kt,pt+=h*Yt,at+=h*Kt,ct+=h*Gt,h=k[2],Xe+=h*At,ut+=h*Tt,rt+=h*jt,ot+=h*_t,Ut+=h*Vt,nr+=h*Qt,ir+=h*Nt,$t+=h*Ft,Ht+=h*mt,Ot+=h*Ct,Rt+=h*bt,it+=h*gt,pt+=h*kt,at+=h*Yt,ct+=h*Kt,Bt+=h*Gt,h=k[3],ut+=h*At,rt+=h*Tt,ot+=h*jt,Ut+=h*_t,nr+=h*Vt,ir+=h*Qt,$t+=h*Nt,Ht+=h*Ft,Ot+=h*mt,Rt+=h*Ct,it+=h*bt,pt+=h*gt,at+=h*kt,ct+=h*Yt,Bt+=h*Kt,Jt+=h*Gt,h=k[4],rt+=h*At,ot+=h*Tt,Ut+=h*jt,nr+=h*_t,ir+=h*Vt,$t+=h*Qt,Ht+=h*Nt,Ot+=h*Ft,Rt+=h*mt,it+=h*Ct,pt+=h*bt,at+=h*gt,ct+=h*kt,Bt+=h*Yt,Jt+=h*Kt,ur+=h*Gt,h=k[5],ot+=h*At,Ut+=h*Tt,nr+=h*jt,ir+=h*_t,$t+=h*Vt,Ht+=h*Qt,Ot+=h*Nt,Rt+=h*Ft,it+=h*mt,pt+=h*Ct,at+=h*bt,ct+=h*gt,Bt+=h*kt,Jt+=h*Yt,ur+=h*Kt,lr+=h*Gt,h=k[6],Ut+=h*At,nr+=h*Tt,ir+=h*jt,$t+=h*_t,Ht+=h*Vt,Ot+=h*Qt,Rt+=h*Nt,it+=h*Ft,pt+=h*mt,at+=h*Ct,ct+=h*bt,Bt+=h*gt,Jt+=h*kt,ur+=h*Yt,lr+=h*Kt,sr+=h*Gt,h=k[7],nr+=h*At,ir+=h*Tt,$t+=h*jt,Ht+=h*_t,Ot+=h*Vt,Rt+=h*Qt,it+=h*Nt,pt+=h*Ft,at+=h*mt,ct+=h*Ct,Bt+=h*bt,Jt+=h*gt,ur+=h*kt,lr+=h*Yt,sr+=h*Kt,pr+=h*Gt,h=k[8],ir+=h*At,$t+=h*Tt,Ht+=h*jt,Ot+=h*_t,Rt+=h*Vt,it+=h*Qt,pt+=h*Nt,at+=h*Ft,ct+=h*mt,Bt+=h*Ct,Jt+=h*bt,ur+=h*gt,lr+=h*kt,sr+=h*Yt,pr+=h*Kt,gr+=h*Gt,h=k[9],$t+=h*At,Ht+=h*Tt,Ot+=h*jt,Rt+=h*_t,it+=h*Vt,pt+=h*Qt,at+=h*Nt,ct+=h*Ft,Bt+=h*mt,Jt+=h*Ct,ur+=h*bt,lr+=h*gt,sr+=h*kt,pr+=h*Yt,gr+=h*Kt,Ur+=h*Gt,h=k[10],Ht+=h*At,Ot+=h*Tt,Rt+=h*jt,it+=h*_t,pt+=h*Vt,at+=h*Qt,ct+=h*Nt,Bt+=h*Ft,Jt+=h*mt,ur+=h*Ct,lr+=h*bt,sr+=h*gt,pr+=h*kt,gr+=h*Yt,Ur+=h*Kt,yr+=h*Gt,h=k[11],Ot+=h*At,Rt+=h*Tt,it+=h*jt,pt+=h*_t,at+=h*Vt,ct+=h*Qt,Bt+=h*Nt,Jt+=h*Ft,ur+=h*mt,lr+=h*Ct,sr+=h*bt,pr+=h*gt,gr+=h*kt,Ur+=h*Yt,yr+=h*Kt,br+=h*Gt,h=k[12],Rt+=h*At,it+=h*Tt,pt+=h*jt,at+=h*_t,ct+=h*Vt,Bt+=h*Qt,Jt+=h*Nt,ur+=h*Ft,lr+=h*mt,sr+=h*Ct,pr+=h*bt,gr+=h*gt,Ur+=h*kt,yr+=h*Yt,br+=h*Kt,ln+=h*Gt,h=k[13],it+=h*At,pt+=h*Tt,at+=h*jt,ct+=h*_t,Bt+=h*Vt,Jt+=h*Qt,ur+=h*Nt,lr+=h*Ft,sr+=h*mt,pr+=h*Ct,gr+=h*bt,Ur+=h*gt,yr+=h*kt,br+=h*Yt,ln+=h*Kt,Qn+=h*Gt,h=k[14],pt+=h*At,at+=h*Tt,ct+=h*jt,Bt+=h*_t,Jt+=h*Vt,ur+=h*Qt,lr+=h*Nt,sr+=h*Ft,pr+=h*mt,gr+=h*Ct,Ur+=h*bt,yr+=h*gt,br+=h*kt,ln+=h*Yt,Qn+=h*Kt,fn+=h*Gt,h=k[15],at+=h*At,ct+=h*Tt,Bt+=h*jt,Jt+=h*_t,ur+=h*Vt,lr+=h*Qt,sr+=h*Nt,pr+=h*Ft,gr+=h*mt,Ur+=h*Ct,yr+=h*bt,br+=h*gt,ln+=h*kt,Qn+=h*Yt,fn+=h*Kt,hn+=h*Gt,Ie+=38*ct,Ne+=38*Bt,Xe+=38*Jt,ut+=38*ur,rt+=38*lr,ot+=38*sr,Ut+=38*pr,nr+=38*gr,ir+=38*Ur,$t+=38*yr,Ht+=38*br,Ot+=38*ln,Rt+=38*Qn,it+=38*fn,pt+=38*hn,N=1,h=Ie+N+65535,N=Math.floor(h/65536),Ie=h-65536*N,h=Ne+N+65535,N=Math.floor(h/65536),Ne=h-65536*N,h=Xe+N+65535,N=Math.floor(h/65536),Xe=h-65536*N,h=ut+N+65535,N=Math.floor(h/65536),ut=h-65536*N,h=rt+N+65535,N=Math.floor(h/65536),rt=h-65536*N,h=ot+N+65535,N=Math.floor(h/65536),ot=h-65536*N,h=Ut+N+65535,N=Math.floor(h/65536),Ut=h-65536*N,h=nr+N+65535,N=Math.floor(h/65536),nr=h-65536*N,h=ir+N+65535,N=Math.floor(h/65536),ir=h-65536*N,h=$t+N+65535,N=Math.floor(h/65536),$t=h-65536*N,h=Ht+N+65535,N=Math.floor(h/65536),Ht=h-65536*N,h=Ot+N+65535,N=Math.floor(h/65536),Ot=h-65536*N,h=Rt+N+65535,N=Math.floor(h/65536),Rt=h-65536*N,h=it+N+65535,N=Math.floor(h/65536),it=h-65536*N,h=pt+N+65535,N=Math.floor(h/65536),pt=h-65536*N,h=at+N+65535,N=Math.floor(h/65536),at=h-65536*N,Ie+=N-1+37*(N-1),N=1,h=Ie+N+65535,N=Math.floor(h/65536),Ie=h-65536*N,h=Ne+N+65535,N=Math.floor(h/65536),Ne=h-65536*N,h=Xe+N+65535,N=Math.floor(h/65536),Xe=h-65536*N,h=ut+N+65535,N=Math.floor(h/65536),ut=h-65536*N,h=rt+N+65535,N=Math.floor(h/65536),rt=h-65536*N,h=ot+N+65535,N=Math.floor(h/65536),ot=h-65536*N,h=Ut+N+65535,N=Math.floor(h/65536),Ut=h-65536*N,h=nr+N+65535,N=Math.floor(h/65536),nr=h-65536*N,h=ir+N+65535,N=Math.floor(h/65536),ir=h-65536*N,h=$t+N+65535,N=Math.floor(h/65536),$t=h-65536*N,h=Ht+N+65535,N=Math.floor(h/65536),Ht=h-65536*N,h=Ot+N+65535,N=Math.floor(h/65536),Ot=h-65536*N,h=Rt+N+65535,N=Math.floor(h/65536),Rt=h-65536*N,h=it+N+65535,N=Math.floor(h/65536),it=h-65536*N,h=pt+N+65535,N=Math.floor(h/65536),pt=h-65536*N,h=at+N+65535,N=Math.floor(h/65536),at=h-65536*N,Ie+=N-1+37*(N-1),V[0]=Ie,V[1]=Ne,V[2]=Xe,V[3]=ut,V[4]=rt,V[5]=ot,V[6]=Ut,V[7]=nr,V[8]=ir,V[9]=$t,V[10]=Ht,V[11]=Ot,V[12]=Rt,V[13]=it,V[14]=pt,V[15]=at}function p(V,k){Q(V,k,k)}function S(V,k){const U=X(),h=X(),N=X(),Ie=X(),Ne=X(),Xe=X(),ut=X(),rt=X(),ot=X();q(U,V[1],V[0]),q(ot,k[1],k[0]),Q(U,U,ot),fe(h,V[0],V[1]),fe(ot,k[0],k[1]),Q(h,h,ot),Q(N,V[3],k[3]),Q(N,N,le),Q(Ie,V[2],k[2]),fe(Ie,Ie,Ie),q(Ne,h,U),q(Xe,Ie,N),fe(ut,Ie,N),fe(rt,h,U),Q(V[0],Ne,Xe),Q(V[1],rt,ut),Q(V[2],ut,Xe),Q(V[3],Ne,rt)}function _(V,k,U){for(let h=0;h<4;h++)Me(V[h],k[h],U)}function d(V,k){const U=X(),h=X(),N=X();(function b(V,k){const U=X();let h;for(h=0;h<16;h++)U[h]=k[h];for(h=253;h>=0;h--)p(U,U),2!==h&&4!==h&&Q(U,U,k);for(h=0;h<16;h++)V[h]=U[h]})(N,k[2]),Q(U,k[0],N),Q(h,k[1],N),ke(V,h),V[31]^=ne(U)<<7}function D(V,k){const U=[X(),X(),X(),X()];de(U[0],Re),de(U[1],me),de(U[2],te),Q(U[3],Re,me),function E(V,k,U){de(V[0],he),de(V[1],te),de(V[2],te),de(V[3],he);for(let h=255;h>=0;--h){const N=U[h/8|0]>>(7&h)&1;_(V,k,N),S(k,V),S(V,V),_(V,k,N)}}(V,U,k)}Z._w=function ge(V){if(V.length!==Z.aP)throw new Error(`ed25519: seed must be ${Z.aP} bytes`);const k=(0,ve.hash)(V);k[0]&=248,k[31]&=127,k[31]|=64;const U=new Uint8Array(32),h=[X(),X(),X(),X()];D(h,k),d(U,h);const N=new Uint8Array(64);return N.set(V),N.set(U,32),{publicKey:U,secretKey:N}};const re=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function $(V,k){let U,h,N,Ie;for(h=63;h>=32;--h){for(U=0,N=h-32,Ie=h-12;N<Ie;++N)k[N]+=U-16*k[h]*re[N-(h-32)],U=Math.floor((k[N]+128)/256),k[N]-=256*U;k[N]+=U,k[h]=0}for(U=0,N=0;N<32;N++)k[N]+=U-(k[31]>>4)*re[N],U=k[N]>>8,k[N]&=255;for(N=0;N<32;N++)k[N]-=U*re[N];for(h=0;h<32;h++)k[h+1]+=k[h]>>8,V[h]=255&k[h]}function Se(V){const k=new Float64Array(64);for(let U=0;U<64;U++)k[U]=V[U];for(let U=0;U<64;U++)V[U]=0;$(V,k)}Z.Xx=function $e(V,k){const U=new Float64Array(64),h=[X(),X(),X(),X()],N=(0,ve.hash)(V.subarray(0,32));N[0]&=248,N[31]&=127,N[31]|=64;const Ie=new Uint8Array(64);Ie.set(N.subarray(32),32);const Ne=new ve.SHA512;Ne.update(Ie.subarray(32)),Ne.update(k);const Xe=Ne.digest();Ne.clean(),Se(Xe),D(h,Xe),d(Ie,h),Ne.reset(),Ne.update(Ie.subarray(0,32)),Ne.update(V.subarray(32)),Ne.update(k);const ut=Ne.digest();Se(ut);for(let rt=0;rt<32;rt++)U[rt]=Xe[rt];for(let rt=0;rt<32;rt++)for(let ot=0;ot<32;ot++)U[rt+ot]+=ut[rt]*N[ot];return $(Ie.subarray(32),U),Ie}},6713:(De,Z,G)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var m=G(9546),ae=G(3403);Z.DIGEST_LENGTH=64,Z.BLOCK_SIZE=128;var ve=function(){function he(){this.digestLength=Z.DIGEST_LENGTH,this.blockSize=Z.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return he.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},he.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},he.prototype.clean=function(){ae.wipe(this._buffer),ae.wipe(this._tempHi),ae.wipe(this._tempLo),this.reset()},he.prototype.update=function(te,ce){if(void 0===ce&&(ce=te.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var le=0;if(this._bytesHashed+=ce,this._bufferLength>0){for(;this._bufferLength<Z.BLOCK_SIZE&&ce>0;)this._buffer[this._bufferLength++]=te[le++],ce--;this._bufferLength===this.blockSize&&(X(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(ce>=this.blockSize&&(le=X(this._tempHi,this._tempLo,this._stateHi,this._stateLo,te,le,ce),ce%=this.blockSize);ce>0;)this._buffer[this._bufferLength++]=te[le++],ce--;return this},he.prototype.finish=function(te){if(!this._finished){var ce=this._bytesHashed,le=this._bufferLength,Re=ce/536870912|0,me=ce<<3,Pe=ce%128<112?128:256;this._buffer[le]=128;for(var de=le+1;de<Pe-8;de++)this._buffer[de]=0;m.writeUint32BE(Re,this._buffer,Pe-8),m.writeUint32BE(me,this._buffer,Pe-4),X(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,Pe),this._finished=!0}for(de=0;de<this.digestLength/8;de++)m.writeUint32BE(this._stateHi[de],te,8*de),m.writeUint32BE(this._stateLo[de],te,8*de+4);return this},he.prototype.digest=function(){var te=new Uint8Array(this.digestLength);return this.finish(te),te},he.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},he.prototype.restoreState=function(te){return this._stateHi.set(te.stateHi),this._stateLo.set(te.stateLo),this._bufferLength=te.bufferLength,te.buffer&&this._buffer.set(te.buffer),this._bytesHashed=te.bytesHashed,this._finished=!1,this},he.prototype.cleanSavedState=function(te){ae.wipe(te.stateHi),ae.wipe(te.stateLo),te.buffer&&ae.wipe(te.buffer),te.bufferLength=0,te.bytesHashed=0},he}();Z.SHA512=ve;var x=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function X(he,te,ce,le,Re,me,Pe){for(var d,E,D,ge,R,B,re,$,de=ce[0],Ge=ce[1],Me=ce[2],ke=ce[3],Je=ce[4],se=ce[5],ne=ce[6],ue=ce[7],fe=le[0],q=le[1],Q=le[2],p=le[3],b=le[4],v=le[5],S=le[6],_=le[7];Pe>=128;){for(var Se=0;Se<16;Se++)he[Se]=m.readUint32BE(Re,$e=8*Se+me),te[Se]=m.readUint32BE(Re,$e+4);for(Se=0;Se<80;Se++){var h,Ut,Qr=Ge,Yr=Me,dt=ke,V=Je,k=se,U=ne,Ie=q,Ne=Q,Xe=p,ut=b,rt=v,ot=S;if(R=65535&(E=_),B=E>>>16,re=65535&(d=ue),$=d>>>16,R+=65535&(E=(b>>>14|Je<<18)^(b>>>18|Je<<14)^(Je>>>9|b<<23)),B+=E>>>16,re+=65535&(d=(Je>>>14|b<<18)^(Je>>>18|b<<14)^(b>>>9|Je<<23)),$+=d>>>16,R+=65535&(E=b&v^~b&S),B+=E>>>16,re+=65535&(d=Je&se^~Je&ne),$+=d>>>16,R+=65535&(E=x[2*Se+1]),B+=E>>>16,re+=65535&(d=x[2*Se]),$+=d>>>16,B+=(E=te[Se%16])>>>16,re+=65535&(d=he[Se%16]),$+=d>>>16,re+=(B+=(R+=65535&E)>>>16)>>>16,R=65535&(E=ge=65535&R|B<<16),B=E>>>16,re=65535&(d=D=65535&re|($+=re>>>16)<<16),$=d>>>16,R+=65535&(E=(fe>>>28|de<<4)^(de>>>2|fe<<30)^(de>>>7|fe<<25)),B+=E>>>16,re+=65535&(d=(de>>>28|fe<<4)^(fe>>>2|de<<30)^(fe>>>7|de<<25)),$+=d>>>16,B+=(E=fe&q^fe&Q^q&Q)>>>16,re+=65535&(d=de&Ge^de&Me^Ge&Me),$+=d>>>16,h=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|($+=re>>>16)<<16,Ut=65535&R|B<<16,R=65535&(E=Xe),B=E>>>16,re=65535&(d=dt),$=d>>>16,B+=(E=ge)>>>16,re+=65535&(d=D),$+=d>>>16,Ge=de,Me=Qr,ke=Yr,Je=dt=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|($+=re>>>16)<<16,se=V,ne=k,ue=U,de=h,q=fe,Q=Ie,p=Ne,b=Xe=65535&R|B<<16,v=ut,S=rt,_=ot,fe=Ut,Se%16==15)for(var $e=0;$e<16;$e++)R=65535&(E=te[$e]),B=E>>>16,re=65535&(d=he[$e]),$=d>>>16,R+=65535&(E=te[($e+9)%16]),B+=E>>>16,re+=65535&(d=he[($e+9)%16]),$+=d>>>16,R+=65535&(E=((ge=te[($e+1)%16])>>>1|(D=he[($e+1)%16])<<31)^(ge>>>8|D<<24)^(ge>>>7|D<<25)),B+=E>>>16,re+=65535&(d=(D>>>1|ge<<31)^(D>>>8|ge<<24)^D>>>7),$+=d>>>16,B+=(E=((ge=te[($e+14)%16])>>>19|(D=he[($e+14)%16])<<13)^(D>>>29|ge<<3)^(ge>>>6|D<<26))>>>16,re+=65535&(d=(D>>>19|ge<<13)^(ge>>>29|D<<3)^D>>>6),$+=d>>>16,he[$e]=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|($+=re>>>16)<<16,te[$e]=65535&R|B<<16}R=65535&(E=fe),B=E>>>16,re=65535&(d=de),$=d>>>16,B+=(E=le[0])>>>16,re+=65535&(d=ce[0]),$+=d>>>16,ce[0]=de=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|($+=re>>>16)<<16,le[0]=fe=65535&R|B<<16,R=65535&(E=q),B=E>>>16,re=65535&(d=Ge),$=d>>>16,B+=(E=le[1])>>>16,re+=65535&(d=ce[1]),$+=d>>>16,ce[1]=Ge=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|($+=re>>>16)<<16,le[1]=q=65535&R|B<<16,R=65535&(E=Q),B=E>>>16,re=65535&(d=Me),$=d>>>16,B+=(E=le[2])>>>16,re+=65535&(d=ce[2]),$+=d>>>16,ce[2]=Me=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|($+=re>>>16)<<16,le[2]=Q=65535&R|B<<16,R=65535&(E=p),B=E>>>16,re=65535&(d=ke),$=d>>>16,B+=(E=le[3])>>>16,re+=65535&(d=ce[3]),$+=d>>>16,ce[3]=ke=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|($+=re>>>16)<<16,le[3]=p=65535&R|B<<16,R=65535&(E=b),B=E>>>16,re=65535&(d=Je),$=d>>>16,B+=(E=le[4])>>>16,re+=65535&(d=ce[4]),$+=d>>>16,ce[4]=Je=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|($+=re>>>16)<<16,le[4]=b=65535&R|B<<16,R=65535&(E=v),B=E>>>16,re=65535&(d=se),$=d>>>16,B+=(E=le[5])>>>16,re+=65535&(d=ce[5]),$+=d>>>16,ce[5]=se=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|($+=re>>>16)<<16,le[5]=v=65535&R|B<<16,R=65535&(E=S),B=E>>>16,re=65535&(d=ne),$=d>>>16,B+=(E=le[6])>>>16,re+=65535&(d=ce[6]),$+=d>>>16,ce[6]=ne=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|($+=re>>>16)<<16,le[6]=S=65535&R|B<<16,R=65535&(E=_),B=E>>>16,re=65535&(d=ue),$=d>>>16,B+=(E=le[7])>>>16,re+=65535&(d=ce[7]),$+=d>>>16,ce[7]=ue=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|($+=re>>>16)<<16,le[7]=_=65535&R|B<<16,me+=128,Pe-=128}return me}Z.hash=function xe(he){var te=new ve;te.update(he);var ce=te.digest();return te.clean(),ce}},7263:(De,Z)=>{"use strict";function G(){return(null==global?void 0:global.crypto)||(null==global?void 0:global.msCrypto)||{}}function m(){const ve=G();return ve.subtle||ve.webkitSubtle}Object.defineProperty(Z,"__esModule",{value:!0}),Z.isBrowserCryptoAvailable=Z.getSubtleCrypto=Z.getBrowerCrypto=void 0,Z.getBrowerCrypto=G,Z.getSubtleCrypto=m,Z.isBrowserCryptoAvailable=function ae(){return!!G()&&!!m()}},4574:(De,Z)=>{"use strict";function G(){return typeof document>"u"&&typeof navigator<"u"&&"ReactNative"===navigator.product}function m(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Object.defineProperty(Z,"__esModule",{value:!0}),Z.isBrowser=Z.isNode=Z.isReactNative=void 0,Z.isReactNative=G,Z.isNode=m,Z.isBrowser=function ae(){return!G()&&!m()}},2299:(De,Z,G)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});const m=G(4308);m.__exportStar(G(7263),Z),m.__exportStar(G(4574),Z)},6366:(De,Z,G)=>{"use strict";G.r(Z),G.d(Z,{EthereumProvider:()=>Wp,OPTIONAL_EVENTS:()=>qu,OPTIONAL_METHODS:()=>Zu,REQUIRED_EVENTS:()=>js,REQUIRED_METHODS:()=>Ls,default:()=>Ms});var m=G(9671),ae=G(2016),ve=G.n(ae),x=G(4778),X=G(7297),xe=G(986),he=G(2997),te=G(2108);class ce extends te.q{constructor(n){super(),this.opts=n,this.protocol="wc",this.version=2}}class Re extends te.q{constructor(n,t){super(),this.core=n,this.logger=t,this.records=new Map}}class me{constructor(n,t){this.logger=n,this.core=t}}class Pe extends te.q{constructor(n,t){super(),this.relayer=n,this.logger=t}}class de extends te.q{constructor(n){super()}}class Ge{constructor(n,t,o,a){this.core=n,this.logger=t,this.name=o}}class ke extends te.q{constructor(n,t){super(),this.relayer=n,this.logger=t}}class se extends te.q{constructor(n,t){super(),this.core=n,this.logger=t}}class ue{constructor(n,t){this.projectId=n,this.logger=t}}class q{constructor(n){this.opts=n,this.protocol="wc",this.version=2}}class p{constructor(n){this.client=n}}const b=y=>JSON.stringify(y,(n,t)=>"bigint"==typeof t?t.toString()+"n":t);function S(y){if("string"!=typeof y)throw new Error("Cannot safe json parse value of type "+typeof y);try{return(y=>{const t=y.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,(o,a)=>"string"==typeof a&&a.match(/^\d+n$/)?BigInt(a.substring(0,a.length-1)):a)})(y)}catch{return y}}function _(y){return"string"==typeof y?y:b(y)||""}var d=G(5972),E=G(5465),D=G(5409);const re="base64url",$="utf8",$e=":",Le="did",Qr="key",Yr="base58btc",dt="z",V="K36";var h=G(1376),N=G(878),Ie=G(2269);function Xe(y){return(0,N.B)((0,Ie.m)(_(y),$),re)}function ut(y){const n=(0,Ie.m)(V,Yr),t=dt+(0,N.B)((0,h.z)([n,y]),Yr);return[Le,Qr,t].join($e)}function ot(y){return(0,N.B)(y,re)}function Ot(y=(0,E.randomBytes)(32)){return d._w(y)}function it(){return(it=(0,m.Z)(function*(y,n,t,o,a=(0,D.fromMiliseconds)(Date.now())){const u={alg:"EdDSA",typ:"JWT"},C={iss:ut(o.publicKey),sub:y,aud:n,iat:a,exp:a+t},z=function nr(y){return(0,Ie.m)([Xe(y.header),Xe(y.payload)].join("."),"utf8")}({header:u,payload:C});return function $t(y){return[Xe(y.header),Xe(y.payload),ot(y.signature)].join(".")}({header:u,payload:C,signature:d.Xx(o.secretKey,z)})})).apply(this,arguments)}G(2768);var Bt=G(3544);const pr="INTERNAL_ERROR",gr="SERVER_ERROR",Ur=[-32700,-32600,-32601,-32602,-32603],br={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[pr]:{code:-32603,message:"Internal error"},[gr]:{code:-32e3,message:"Server error"}},ln=gr;function At(y){return Object.keys(br).includes(y)?br[y]:br[ln]}function _t(y,n,t){return y.message.includes("getaddrinfo ENOTFOUND")||y.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${n}`):y}var Vt=G(2299);function Nt(y=3){return Date.now()*Math.pow(10,y)+Math.floor(Math.random()*Math.pow(10,y))}function Ft(y=6){return BigInt(Nt(y))}function mt(y,n,t){return{id:t||Nt(),jsonrpc:"2.0",method:y,params:n}}function Ct(y,n){return{id:y,jsonrpc:"2.0",result:n}}function bt(y,n,t){return{id:y,jsonrpc:"2.0",error:gt(n,t)}}function gt(y,n){return typeof y>"u"?At(pr):("string"==typeof y&&(y=Object.assign(Object.assign({},At(gr)),{message:y})),typeof n<"u"&&(y.data=n),function fn(y){return Ur.includes(y)}(y.code)&&(y=function Tt(y){return Object.values(br).find(t=>t.code===y)||br[ln]}(y.code)),y)}class kt{}class Kt extends kt{constructor(){super()}}class Gt extends Kt{constructor(n){super()}}function ds(y,n){const t=function No(y){const n=y.match(new RegExp(/^\w+:/,"gi"));if(n&&n.length)return n[0]}(y);return!(typeof t>"u")&&new RegExp(n).test(t)}function ps(y){return ds(y,"^https?:")}function gs(y){return ds(y,"^wss?:")}function dn(y){return"object"==typeof y&&"id"in y&&"jsonrpc"in y&&"2.0"===y.jsonrpc}function ji(y){return dn(y)&&"method"in y}function pi(y){return dn(y)&&(en(y)||Nr(y))}function en(y){return"result"in y}function Nr(y){return"error"in y}class Sr extends Gt{constructor(n){super(n),this.events=new ae.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(n),this.connection.connected&&this.registerEventListeners()}connect(n=this.connection){var t=this;return(0,m.Z)(function*(){yield t.open(n)})()}disconnect(){var n=this;return(0,m.Z)(function*(){yield n.close()})()}on(n,t){this.events.on(n,t)}once(n,t){this.events.once(n,t)}off(n,t){this.events.off(n,t)}removeListener(n,t){this.events.removeListener(n,t)}request(n,t){var o=this;return(0,m.Z)(function*(){return o.requestStrict(mt(n.method,n.params||[],n.id||Ft().toString()),t)})()}requestStrict(n,t){var o=this;return(0,m.Z)(function*(){return new Promise(function(){var a=(0,m.Z)(function*(u,f){if(!o.connection.connected)try{yield o.open()}catch(P){f(P)}o.events.on(`${n.id}`,P=>{Nr(P)?f(P.error):u(P.result)});try{yield o.connection.send(n,t)}catch(P){f(P)}});return function(u,f){return a.apply(this,arguments)}}())})()}setConnection(n=this.connection){return n}onPayload(n){this.events.emit("payload",n),pi(n)?this.events.emit(`${n.id}`,n):this.events.emit("message",{type:n.method,data:n.params})}onClose(n){n&&3e3===n.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${n.code} ${n.reason?`(${n.reason})`:""}`)),this.events.emit("disconnect")}open(n=this.connection){var t=this;return(0,m.Z)(function*(){t.connection===n&&t.connection.connected||(t.connection.connected&&t.close(),"string"==typeof n&&(yield t.connection.open(n),n=t.connection),t.connection=t.setConnection(n),yield t.connection.open(),t.registerEventListeners(),t.events.emit("connect"))})()}close(){var n=this;return(0,m.Z)(function*(){yield n.connection.close()})()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",n=>this.onPayload(n)),this.connection.on("close",n=>this.onClose(n)),this.connection.on("error",n=>this.events.emit("error",n)),this.connection.on("register_error",n=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const ys=y=>y.split("?")[0],Fo=typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:G(3569);var Yn=G(2650),_s=G.n(Yn),zo=function ms(y,n){if(y.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),o=0;o<t.length;o++)t[o]=255;for(var a=0;a<y.length;a++){var u=y.charAt(a),f=u.charCodeAt(0);if(255!==t[f])throw new TypeError(u+" is ambiguous");t[f]=a}var P=y.length,C=y.charAt(0),z=Math.log(P)/Math.log(256),W=Math.log(256)/Math.log(P);function Oe(we){if("string"!=typeof we)throw new TypeError("Expected String");if(0===we.length)return new Uint8Array;var Ve=0;if(" "!==we[Ve]){for(var Qe=0,xt=0;we[Ve]===C;)Qe++,Ve++;for(var fr=(we.length-Ve)*z+1>>>0,yt=new Uint8Array(fr);we[Ve];){var Mt=t[we.charCodeAt(Ve)];if(255===Mt)return;for(var ft=0,Zt=fr-1;(0!==Mt||ft<xt)&&-1!==Zt;Zt--,ft++)yt[Zt]=(Mt+=P*yt[Zt]>>>0)%256>>>0,Mt=Mt/256>>>0;if(0!==Mt)throw new Error("Non-zero carry");xt=ft,Ve++}if(" "!==we[Ve]){for(var et=fr-xt;et!==fr&&0===yt[et];)et++;for(var ar=new Uint8Array(Qe+(fr-et)),zn=Qe;et!==fr;)ar[zn++]=yt[et++];return ar}}}return{encode:function pe(we){if(we instanceof Uint8Array||(ArrayBuffer.isView(we)?we=new Uint8Array(we.buffer,we.byteOffset,we.byteLength):Array.isArray(we)&&(we=Uint8Array.from(we))),!(we instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===we.length)return"";for(var Ve=0,Qe=0,xt=0,fr=we.length;xt!==fr&&0===we[xt];)xt++,Ve++;for(var yt=(fr-xt)*W+1>>>0,Mt=new Uint8Array(yt);xt!==fr;){for(var ft=we[xt],Zt=0,et=yt-1;(0!==ft||Zt<Qe)&&-1!==et;et--,Zt++)Mt[et]=(ft+=256*Mt[et]>>>0)%P>>>0,ft=ft/P>>>0;if(0!==ft)throw new Error("Non-zero carry");Qe=Zt,xt++}for(var ar=yt-Qe;ar!==yt&&0===Mt[ar];)ar++;for(var zn=C.repeat(Ve);ar<yt;++ar)zn+=y.charAt(Mt[ar]);return zn},decodeUnsafe:Oe,decode:function Fe(we){var Ve=Oe(we);if(Ve)return Ve;throw new Error(`Non-${n} character`)}}};const bs=y=>{if(y instanceof Uint8Array&&"Uint8Array"===y.constructor.name)return y;if(y instanceof ArrayBuffer)return new Uint8Array(y);if(ArrayBuffer.isView(y))return new Uint8Array(y.buffer,y.byteOffset,y.byteLength);throw new Error("Unknown type, must be binary type")};class $o{constructor(n,t,o){this.name=n,this.prefix=t,this.baseEncode=o}encode(n){if(n instanceof Uint8Array)return`${this.prefix}${this.baseEncode(n)}`;throw Error("Unknown type, must be binary type")}}class Ho{constructor(n,t,o){if(this.name=n,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=o}decode(n){if("string"==typeof n){if(n.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(n)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(n.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(n){return Xn(this,n)}}class xs{constructor(n){this.decoders=n}or(n){return Xn(this,n)}decode(n){const o=this.decoders[n[0]];if(o)return o.decode(n);throw RangeError(`Unable to decode multibase string ${JSON.stringify(n)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Xn=(y,n)=>new xs({...y.decoders||{[y.prefix]:y},...n.decoders||{[n.prefix]:n}});class Mn{constructor(n,t,o,a){this.name=n,this.prefix=t,this.baseEncode=o,this.baseDecode=a,this.encoder=new $o(n,t,o),this.decoder=new Ho(n,t,a)}encode(n){return this.encoder.encode(n)}decode(n){return this.decoder.decode(n)}}const gi=({name:y,prefix:n,encode:t,decode:o})=>new Mn(y,n,t,o),ei=({prefix:y,name:n,alphabet:t})=>{const{encode:o,decode:a}=zo(t,n);return gi({prefix:y,name:n,encode:o,decode:u=>bs(a(u))})},Xt=({name:y,prefix:n,bitsPerChar:t,alphabet:o})=>gi({prefix:n,name:y,encode:a=>((y,n,t)=>{const o="="===n[n.length-1],a=(1<<t)-1;let u="",f=0,P=0;for(let C=0;C<y.length;++C)for(P=P<<8|y[C],f+=8;f>t;)f-=t,u+=n[a&P>>f];if(f&&(u+=n[a&P<<t-f]),o)for(;u.length*t&7;)u+="=";return u})(a,o,t),decode:a=>((y,n,t,o)=>{const a={};for(let W=0;W<n.length;++W)a[n[W]]=W;let u=y.length;for(;"="===y[u-1];)--u;const f=new Uint8Array(u*t/8|0);let P=0,C=0,z=0;for(let W=0;W<u;++W){const pe=a[y[W]];if(void 0===pe)throw new SyntaxError(`Non-${o} character`);C=C<<t|pe,P+=t,P>=8&&(P-=8,f[z++]=255&C>>P)}if(P>=t||255&C<<8-P)throw new SyntaxError("Unexpected end of data");return f})(a,o,t,y)}),Vo=gi({prefix:"\0",name:"identity",encode:y=>(y=>(new TextDecoder).decode(y))(y),decode:y=>(y=>(new TextEncoder).encode(y))(y)});var ko=Object.freeze({__proto__:null,identity:Vo});const Ko=Xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var xn=Object.freeze({__proto__:null,base2:Ko});const Es=Xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Go=Object.freeze({__proto__:null,base8:Es});const yi=ei({prefix:"9",name:"base10",alphabet:"0123456789"});var Wo=Object.freeze({__proto__:null,base10:yi});const Mi=Xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Jo=Xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Is=Object.freeze({__proto__:null,base16:Mi,base16upper:Jo});const Ps=Xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ss=Xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ti=Xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Os=Xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Qo=Xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Yo=Xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Xo=Xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),O=Xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),j=Xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ie=Object.freeze({__proto__:null,base32:Ps,base32upper:Ss,base32pad:ti,base32padupper:Os,base32hex:Qo,base32hexupper:Yo,base32hexpad:Xo,base32hexpadupper:O,base32z:j});const _e=ei({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),lt=ei({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var qe=Object.freeze({__proto__:null,base36:_e,base36upper:lt});const It=ei({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Wt=ei({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var er=Object.freeze({__proto__:null,base58btc:It,base58flickr:Wt});const wt=Xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),wr=Xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Lr=Xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),or=Xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Or=Object.freeze({__proto__:null,base64:wt,base64pad:wr,base64url:Lr,base64urlpad:or});const xr=Array.from("\u{1f680}\u{1fa90}\u2604\u{1f6f0}\u{1f30c}\u{1f311}\u{1f312}\u{1f313}\u{1f314}\u{1f315}\u{1f316}\u{1f317}\u{1f318}\u{1f30d}\u{1f30f}\u{1f30e}\u{1f409}\u2600\u{1f4bb}\u{1f5a5}\u{1f4be}\u{1f4bf}\u{1f602}\u2764\u{1f60d}\u{1f923}\u{1f60a}\u{1f64f}\u{1f495}\u{1f62d}\u{1f618}\u{1f44d}\u{1f605}\u{1f44f}\u{1f601}\u{1f525}\u{1f970}\u{1f494}\u{1f496}\u{1f499}\u{1f622}\u{1f914}\u{1f606}\u{1f644}\u{1f4aa}\u{1f609}\u263a\u{1f44c}\u{1f917}\u{1f49c}\u{1f614}\u{1f60e}\u{1f607}\u{1f339}\u{1f926}\u{1f389}\u{1f49e}\u270c\u2728\u{1f937}\u{1f631}\u{1f60c}\u{1f338}\u{1f64c}\u{1f60b}\u{1f497}\u{1f49a}\u{1f60f}\u{1f49b}\u{1f642}\u{1f493}\u{1f929}\u{1f604}\u{1f600}\u{1f5a4}\u{1f603}\u{1f4af}\u{1f648}\u{1f447}\u{1f3b6}\u{1f612}\u{1f92d}\u2763\u{1f61c}\u{1f48b}\u{1f440}\u{1f62a}\u{1f611}\u{1f4a5}\u{1f64b}\u{1f61e}\u{1f629}\u{1f621}\u{1f92a}\u{1f44a}\u{1f973}\u{1f625}\u{1f924}\u{1f449}\u{1f483}\u{1f633}\u270b\u{1f61a}\u{1f61d}\u{1f634}\u{1f31f}\u{1f62c}\u{1f643}\u{1f340}\u{1f337}\u{1f63b}\u{1f613}\u2b50\u2705\u{1f97a}\u{1f308}\u{1f608}\u{1f918}\u{1f4a6}\u2714\u{1f623}\u{1f3c3}\u{1f490}\u2639\u{1f38a}\u{1f498}\u{1f620}\u261d\u{1f615}\u{1f33a}\u{1f382}\u{1f33b}\u{1f610}\u{1f595}\u{1f49d}\u{1f64a}\u{1f639}\u{1f5e3}\u{1f4ab}\u{1f480}\u{1f451}\u{1f3b5}\u{1f91e}\u{1f61b}\u{1f534}\u{1f624}\u{1f33c}\u{1f62b}\u26bd\u{1f919}\u2615\u{1f3c6}\u{1f92b}\u{1f448}\u{1f62e}\u{1f646}\u{1f37b}\u{1f343}\u{1f436}\u{1f481}\u{1f632}\u{1f33f}\u{1f9e1}\u{1f381}\u26a1\u{1f31e}\u{1f388}\u274c\u270a\u{1f44b}\u{1f630}\u{1f928}\u{1f636}\u{1f91d}\u{1f6b6}\u{1f4b0}\u{1f353}\u{1f4a2}\u{1f91f}\u{1f641}\u{1f6a8}\u{1f4a8}\u{1f92c}\u2708\u{1f380}\u{1f37a}\u{1f913}\u{1f619}\u{1f49f}\u{1f331}\u{1f616}\u{1f476}\u{1f974}\u25b6\u27a1\u2753\u{1f48e}\u{1f4b8}\u2b07\u{1f628}\u{1f31a}\u{1f98b}\u{1f637}\u{1f57a}\u26a0\u{1f645}\u{1f61f}\u{1f635}\u{1f44e}\u{1f932}\u{1f920}\u{1f927}\u{1f4cc}\u{1f535}\u{1f485}\u{1f9d0}\u{1f43e}\u{1f352}\u{1f617}\u{1f911}\u{1f30a}\u{1f92f}\u{1f437}\u260e\u{1f4a7}\u{1f62f}\u{1f486}\u{1f446}\u{1f3a4}\u{1f647}\u{1f351}\u2744\u{1f334}\u{1f4a3}\u{1f438}\u{1f48c}\u{1f4cd}\u{1f940}\u{1f922}\u{1f445}\u{1f4a1}\u{1f4a9}\u{1f450}\u{1f4f8}\u{1f47b}\u{1f910}\u{1f92e}\u{1f3bc}\u{1f975}\u{1f6a9}\u{1f34e}\u{1f34a}\u{1f47c}\u{1f48d}\u{1f4e3}\u{1f942}"),yn=xr.reduce((y,n,t)=>(y[t]=n,y),[]),tn=xr.reduce((y,n,t)=>(y[n.codePointAt(0)]=t,y),[]),vi=gi({prefix:"\u{1f680}",name:"base256emoji",encode:function En(y){return y.reduce((n,t)=>n+yn[t],"")},decode:function Rs(y){const n=[];for(const t of y){const o=tn[t.codePointAt(0)];if(void 0===o)throw new Error(`Non-base256emoji character: ${t}`);n.push(o)}return new Uint8Array(n)}});var _i=Object.freeze({__proto__:null,base256emoji:vi}),$c=128,Ih=-128,Ph=Math.pow(2,31),Oh=128,Bc=127,Rh=Math.pow(2,7),Ah=Math.pow(2,14),Th=Math.pow(2,21),Ch=Math.pow(2,28),Dh=Math.pow(2,35),Nh=Math.pow(2,42),Lh=Math.pow(2,49),jh=Math.pow(2,56),Fh=Math.pow(2,63),Zh={encode:function Hc(y,n,t){n=n||[];for(var o=t=t||0;y>=Ph;)n[t++]=255&y|$c,y/=128;for(;y&Ih;)n[t++]=255&y|$c,y>>>=7;return n[t]=0|y,Hc.bytes=t-o+1,n},decode:function ea(y,o){var f,t=0,a=0,u=o=o||0,P=y.length;do{if(u>=P)throw ea.bytes=0,new RangeError("Could not decode varint");f=y[u++],t+=a<28?(f&Bc)<<a:(f&Bc)*Math.pow(2,a),a+=7}while(f>=Oh);return ea.bytes=u-o,t},encodingLength:function(y){return y<Rh?1:y<Ah?2:y<Th?3:y<Ch?4:y<Dh?5:y<Nh?6:y<Lh?7:y<jh?8:y<Fh?9:10}},Vc=Zh;const kc=(y,n,t=0)=>(Vc.encode(y,n,t),n),Kc=y=>Vc.encodingLength(y),ta=(y,n)=>{const t=n.byteLength,o=Kc(y),a=o+Kc(t),u=new Uint8Array(a+t);return kc(y,u,0),kc(t,u,o),u.set(n,a),new qh(y,t,n,u)};class qh{constructor(n,t,o,a){this.code=n,this.size=t,this.digest=o,this.bytes=a}}const Gc=({name:y,code:n,encode:t})=>new zh(y,n,t);class zh{constructor(n,t,o){this.name=n,this.code=t,this.encode=o}digest(n){if(n instanceof Uint8Array){const t=this.encode(n);return t instanceof Uint8Array?ta(this.code,t):t.then(o=>ta(this.code,o))}throw Error("Unknown type, must be binary type")}}const Wc=y=>function(){var n=(0,m.Z)(function*(t){return new Uint8Array(yield crypto.subtle.digest(y,t))});return function(t){return n.apply(this,arguments)}}(),Uh=Gc({name:"sha2-256",code:18,encode:Wc("SHA-256")}),$h=Gc({name:"sha2-512",code:19,encode:Wc("SHA-512")});Object.freeze({__proto__:null,sha256:Uh,sha512:$h});const Qc=bs;Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:Qc,digest:y=>ta(0,Qc(y))}}),new TextEncoder,new TextDecoder;const Yc={...ko,...xn,...Go,...Wo,...Is,...ie,...qe,...er,...Or,..._i};function Xc(y){return null!=globalThis.Buffer?new Uint8Array(y.buffer,y.byteOffset,y.byteLength):y}function eu(y,n,t,o){return{name:y,prefix:n,encoder:{name:y,prefix:n,encode:t},decoder:{decode:o}}}const tu=eu("utf8","u",y=>"u"+new TextDecoder("utf8").decode(y),y=>(new TextEncoder).encode(y.substring(1))),ra=eu("ascii","a",y=>{let n="a";for(let t=0;t<y.length;t++)n+=String.fromCharCode(y[t]);return n},y=>{const n=function kh(y=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?Xc(globalThis.Buffer.allocUnsafe(y)):new Uint8Array(y)}((y=y.substring(1)).length);for(let t=0;t<y.length;t++)n[t]=y.charCodeAt(t);return n}),Kh={utf8:tu,"utf-8":tu,hex:Yc.base16,latin1:ra,ascii:ra,binary:ra,...Yc},Zn="wc@2:core:",Qh={database:":memory:"},nu="client_ed25519_seed",Xh=D.ONE_DAY,id=D.SIX_HOURS,su="wss://relay.walletconnect.com",ou="wss://relay.walletconnect.org",ud=D.ONE_SECOND,rn_created="subscription_created",rn_deleted="subscription_deleted",yd=1e3*D.FIVE_SECONDS,Zi={wc_pairingDelete:{req:{ttl:D.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:D.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:D.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:D.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:D.ONE_DAY,prompt:!1,tag:0},res:{ttl:D.ONE_DAY,prompt:!1,tag:0}}},$r_expired="expirer_expired",ia="verify-api",As="https://verify.walletconnect.com",au="https://verify.walletconnect.org";class Ed{constructor(n,t){var o=this;this.core=n,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=Zn,this.init=(0,m.Z)(function*(){if(!o.initialized){const a=yield o.getKeyChain();typeof a<"u"&&(o.keychain=a),o.initialized=!0}}),this.has=a=>(this.isInitialized(),this.keychain.has(a)),this.set=function(){var a=(0,m.Z)(function*(u,f){o.isInitialized(),o.keychain.set(u,f),yield o.persist()});return function(u,f){return a.apply(this,arguments)}}(),this.get=a=>{this.isInitialized();const u=this.keychain.get(a);if(typeof u>"u"){const{message:f}=(0,x.Z7)("NO_MATCHING_KEY",`${this.name}: ${a}`);throw new Error(f)}return u},this.del=function(){var a=(0,m.Z)(function*(u){o.isInitialized(),o.keychain.delete(u),yield o.persist()});return function(u){return a.apply(this,arguments)}}(),this.core=n,this.logger=(0,he.generateChildLogger)(t,this.name)}get context(){return(0,he.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}setKeyChain(n){var t=this;return(0,m.Z)(function*(){yield t.core.storage.setItem(t.storageKey,(0,x.KC)(n))})()}getKeyChain(){var n=this;return(0,m.Z)(function*(){const t=yield n.core.storage.getItem(n.storageKey);return typeof t<"u"?(0,x.IP)(t):void 0})()}persist(){var n=this;return(0,m.Z)(function*(){yield n.setKeyChain(n.keychain)})()}isInitialized(){if(!this.initialized){const{message:n}=(0,x.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}}class Id{constructor(n,t,o){var a=this;this.core=n,this.logger=t,this.name="crypto",this.initialized=!1,this.init=(0,m.Z)(function*(){a.initialized||(yield a.keychain.init(),a.initialized=!0)}),this.hasKeys=u=>(this.isInitialized(),this.keychain.has(u)),this.getClientId=(0,m.Z)(function*(){return a.isInitialized(),ut(Ot(yield a.getClientSeed()).publicKey)}),this.generateKeyPair=()=>{this.isInitialized();const u=(0,x.Au)();return this.setPrivateKey(u.publicKey,u.privateKey)},this.signJWT=function(){var u=(0,m.Z)(function*(f){a.isInitialized();const C=Ot(yield a.getClientSeed()),z=(0,x.jd)();return yield function Rt(y,n,t,o){return it.apply(this,arguments)}(z,f,Xh,C)});return function(f){return u.apply(this,arguments)}}(),this.generateSharedKey=(u,f,P)=>{this.isInitialized();const C=this.getPrivateKey(u),z=(0,x.m$)(C,f);return this.setSymKey(z,P)},this.setSymKey=function(){var u=(0,m.Z)(function*(f,P){a.isInitialized();const C=P||(0,x.Ym)(f);return yield a.keychain.set(C,f),C});return function(f,P){return u.apply(this,arguments)}}(),this.deleteKeyPair=function(){var u=(0,m.Z)(function*(f){a.isInitialized(),yield a.keychain.del(f)});return function(f){return u.apply(this,arguments)}}(),this.deleteSymKey=function(){var u=(0,m.Z)(function*(f){a.isInitialized(),yield a.keychain.del(f)});return function(f){return u.apply(this,arguments)}}(),this.encode=function(){var u=(0,m.Z)(function*(f,P,C){a.isInitialized();const z=(0,x.EN)(C),W=_(P);if((0,x.Q8)(z)){const we=z.senderPublicKey,Ve=z.receiverPublicKey;f=yield a.generateSharedKey(we,Ve)}const pe=a.getSymKey(f),{type:Oe,senderPublicKey:Fe}=z;return(0,x.HI)({type:Oe,symKey:pe,message:W,senderPublicKey:Fe})});return function(f,P,C){return u.apply(this,arguments)}}(),this.decode=function(){var u=(0,m.Z)(function*(f,P,C){a.isInitialized();const z=(0,x.Ll)(P,C);if((0,x.Q8)(z)){const W=z.receiverPublicKey,pe=z.senderPublicKey;f=yield a.generateSharedKey(W,pe)}try{const W=a.getSymKey(f);return S((0,x.pe)({symKey:W,encoded:P}))}catch(W){a.logger.error(`Failed to decode message from topic: '${f}', clientId: '${yield a.getClientId()}'`),a.logger.error(W)}});return function(f,P,C){return u.apply(this,arguments)}}(),this.getPayloadType=u=>{const f=(0,x.vB)(u);return(0,x.WG)(f.type)},this.getPayloadSenderPublicKey=u=>{const f=(0,x.vB)(u);return f.senderPublicKey?(0,Bt.BB)(f.senderPublicKey,x.AW):void 0},this.core=n,this.logger=(0,he.generateChildLogger)(t,this.name),this.keychain=o||new Ed(this.core,this.logger)}get context(){return(0,he.getLoggerContext)(this.logger)}setPrivateKey(n,t){var o=this;return(0,m.Z)(function*(){return yield o.keychain.set(n,t),n})()}getPrivateKey(n){return this.keychain.get(n)}getClientSeed(){var n=this;return(0,m.Z)(function*(){let t="";try{t=n.keychain.get(nu)}catch{t=(0,x.jd)(),yield n.keychain.set(nu,t)}return function Gh(y,n="utf8"){const t=Kh[n];if(!t)throw new Error(`Unsupported encoding "${n}"`);return"utf8"!==n&&"utf-8"!==n||null==globalThis.Buffer||null==globalThis.Buffer.from?t.decoder.decode(`${t.prefix}${y}`):Xc(globalThis.Buffer.from(y,"utf-8"))}(t,"base16")})()}getSymKey(n){return this.keychain.get(n)}isInitialized(){if(!this.initialized){const{message:n}=(0,x.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}}class Pd extends me{constructor(n,t){var o;super(n,t),o=this,this.logger=n,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=Zn,this.init=(0,m.Z)(function*(){if(!o.initialized){o.logger.trace("Initialized");try{const a=yield o.getRelayerMessages();typeof a<"u"&&(o.messages=a),o.logger.debug(`Successfully Restored records for ${o.name}`),o.logger.trace({type:"method",method:"restore",size:o.messages.size})}catch(a){o.logger.debug(`Failed to Restore records for ${o.name}`),o.logger.error(a)}finally{o.initialized=!0}}}),this.set=function(){var a=(0,m.Z)(function*(u,f){o.isInitialized();const P=(0,x.rj)(f);let C=o.messages.get(u);return typeof C>"u"&&(C={}),typeof C[P]<"u"||(C[P]=f,o.messages.set(u,C),yield o.persist()),P});return function(u,f){return a.apply(this,arguments)}}(),this.get=a=>{this.isInitialized();let u=this.messages.get(a);return typeof u>"u"&&(u={}),u},this.has=(a,u)=>(this.isInitialized(),typeof this.get(a)[(0,x.rj)(u)]<"u"),this.del=function(){var a=(0,m.Z)(function*(u){o.isInitialized(),o.messages.delete(u),yield o.persist()});return function(u){return a.apply(this,arguments)}}(),this.logger=(0,he.generateChildLogger)(n,this.name),this.core=t}get context(){return(0,he.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}setRelayerMessages(n){var t=this;return(0,m.Z)(function*(){yield t.core.storage.setItem(t.storageKey,(0,x.KC)(n))})()}getRelayerMessages(){var n=this;return(0,m.Z)(function*(){const t=yield n.core.storage.getItem(n.storageKey);return typeof t<"u"?(0,x.IP)(t):void 0})()}persist(){var n=this;return(0,m.Z)(function*(){yield n.setRelayerMessages(n.messages)})()}isInitialized(){if(!this.initialized){const{message:n}=(0,x.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}}class Sd extends Pe{constructor(n,t){var o;super(n,t),o=this,this.relayer=n,this.logger=t,this.events=new ae.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,D.toMiliseconds)(D.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=function(){var a=(0,m.Z)(function*(u,f,P){var C;o.logger.debug("Publishing Payload"),o.logger.trace({type:"method",method:"publish",params:{topic:u,message:f,opts:P}});try{const z=P?.ttl||id,W=(0,x._H)(P),pe=P?.prompt||!1,Oe=P?.tag||0,Fe=P?.id||Ft().toString(),we={topic:u,message:f,opts:{ttl:z,relay:W,prompt:pe,tag:Oe,id:Fe}},Ve=setTimeout(()=>o.queue.set(Fe,we),o.publishTimeout);try{yield yield(0,x.hF)(o.rpcPublish(u,f,z,W,pe,Oe,Fe),o.publishTimeout,"Failed to publish payload, please try again."),o.removeRequestFromQueue(Fe),o.relayer.events.emit("relayer_publish",we)}catch(Qe){if(o.logger.debug("Publishing Payload stalled"),o.needsTransportRestart=!0,null!=(C=P?.internal)&&C.throwOnFailedPublish)throw o.removeRequestFromQueue(Fe),Qe;return}finally{clearTimeout(Ve)}o.logger.debug("Successfully Published Payload"),o.logger.trace({type:"method",method:"publish",params:{topic:u,message:f,opts:P}})}catch(z){throw o.logger.debug("Failed to Publish Payload"),o.logger.error(z),z}});return function(u,f,P){return a.apply(this,arguments)}}(),this.on=(a,u)=>{this.events.on(a,u)},this.once=(a,u)=>{this.events.once(a,u)},this.off=(a,u)=>{this.events.off(a,u)},this.removeListener=(a,u)=>{this.events.removeListener(a,u)},this.relayer=n,this.logger=(0,he.generateChildLogger)(t,this.name),this.registerEventListeners()}get context(){return(0,he.getLoggerContext)(this.logger)}rpcPublish(n,t,o,a,u,f,P){var C,z,W,pe;const Oe={method:(0,x.cO)(a.protocol).publish,params:{topic:n,message:t,ttl:o,prompt:u,tag:f},id:P};return(0,x.o8)(null==(C=Oe.params)?void 0:C.prompt)&&(null==(z=Oe.params)||delete z.prompt),(0,x.o8)(null==(W=Oe.params)?void 0:W.tag)&&(null==(pe=Oe.params)||delete pe.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:Oe}),this.relayer.request(Oe)}removeRequestFromQueue(n){this.queue.delete(n)}checkQueue(){var n=this;this.queue.forEach(function(){var t=(0,m.Z)(function*(o){const{topic:a,message:u,opts:f}=o;yield n.publish(a,u,f)});return function(o){return t.apply(this,arguments)}}())}registerEventListeners(){this.relayer.core.heartbeat.on(xe.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit("relayer_connection_stalled");this.checkQueue()}),this.relayer.on("relayer_message_ack",n=>{this.removeRequestFromQueue(n.id.toString())})}}class Od{constructor(){this.map=new Map,this.set=(n,t)=>{const o=this.get(n);this.exists(n,t)||this.map.set(n,[...o,t])},this.get=n=>this.map.get(n)||[],this.exists=(n,t)=>this.get(n).includes(t),this.delete=(n,t)=>{if(typeof t>"u")return void this.map.delete(n);if(!this.map.has(n))return;const o=this.get(n);if(!this.exists(n,t))return;const a=o.filter(u=>u!==t);a.length?this.map.set(n,a):this.map.delete(n)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Rd=Object.defineProperty,Ad=Object.defineProperties,Td=Object.getOwnPropertyDescriptors,cu=Object.getOwnPropertySymbols,Cd=Object.prototype.hasOwnProperty,Dd=Object.prototype.propertyIsEnumerable,uu=(y,n,t)=>n in y?Rd(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t,zi=(y,n)=>{for(var t in n||(n={}))Cd.call(n,t)&&uu(y,t,n[t]);if(cu)for(var t of cu(n))Dd.call(n,t)&&uu(y,t,n[t]);return y},sa=(y,n)=>Ad(y,Td(n));class Nd extends ke{constructor(n,t){var o;super(n,t),o=this,this.relayer=n,this.logger=t,this.subscriptions=new Map,this.topicMap=new Od,this.events=new ae.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Zn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=(0,m.Z)(function*(){o.initialized||(o.logger.trace("Initialized"),o.registerEventListeners(),o.clientId=yield o.relayer.core.crypto.getClientId())}),this.subscribe=function(){var a=(0,m.Z)(function*(u,f){yield o.restartToComplete(),o.isInitialized(),o.logger.debug("Subscribing Topic"),o.logger.trace({type:"method",method:"subscribe",params:{topic:u,opts:f}});try{const P=(0,x._H)(f),C={topic:u,relay:P};o.pending.set(u,C);const z=yield o.rpcSubscribe(u,P);return o.onSubscribe(z,C),o.logger.debug("Successfully Subscribed Topic"),o.logger.trace({type:"method",method:"subscribe",params:{topic:u,opts:f}}),z}catch(P){throw o.logger.debug("Failed to Subscribe Topic"),o.logger.error(P),P}});return function(u,f){return a.apply(this,arguments)}}(),this.unsubscribe=function(){var a=(0,m.Z)(function*(u,f){yield o.restartToComplete(),o.isInitialized(),typeof f?.id<"u"?yield o.unsubscribeById(u,f.id,f):yield o.unsubscribeByTopic(u,f)});return function(u,f){return a.apply(this,arguments)}}(),this.isSubscribed=function(){var a=(0,m.Z)(function*(u){return!!o.topics.includes(u)||(yield new Promise((f,P)=>{const C=new D.Watch;C.start(o.pendingSubscriptionWatchLabel);const z=setInterval(()=>{!o.pending.has(u)&&o.topics.includes(u)&&(clearInterval(z),C.stop(o.pendingSubscriptionWatchLabel),f(!0)),C.elapsed(o.pendingSubscriptionWatchLabel)>=yd&&(clearInterval(z),C.stop(o.pendingSubscriptionWatchLabel),P(new Error("Subscription resolution timeout")))},o.pollingInterval)}).catch(()=>!1))});return function(u){return a.apply(this,arguments)}}(),this.on=(a,u)=>{this.events.on(a,u)},this.once=(a,u)=>{this.events.once(a,u)},this.off=(a,u)=>{this.events.off(a,u)},this.removeListener=(a,u)=>{this.events.removeListener(a,u)},this.restart=(0,m.Z)(function*(){o.restartInProgress=!0,yield o.restore(),yield o.reset(),o.restartInProgress=!1}),this.relayer=n,this.logger=(0,he.generateChildLogger)(t,this.name),this.clientId=""}get context(){return(0,he.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(n,t){let o=!1;try{o=this.getSubscription(n).topic===t}catch{}return o}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}unsubscribeByTopic(n,t){var o=this;return(0,m.Z)(function*(){const a=o.topicMap.get(n);yield Promise.all(a.map(function(){var u=(0,m.Z)(function*(f){return yield o.unsubscribeById(n,f,t)});return function(f){return u.apply(this,arguments)}}()))})()}unsubscribeById(n,t,o){var a=this;return(0,m.Z)(function*(){a.logger.debug("Unsubscribing Topic"),a.logger.trace({type:"method",method:"unsubscribe",params:{topic:n,id:t,opts:o}});try{const u=(0,x._H)(o);yield a.rpcUnsubscribe(n,t,u);const f=(0,x.D6)("USER_DISCONNECTED",`${a.name}, ${n}`);yield a.onUnsubscribe(n,t,f),a.logger.debug("Successfully Unsubscribed Topic"),a.logger.trace({type:"method",method:"unsubscribe",params:{topic:n,id:t,opts:o}})}catch(u){throw a.logger.debug("Failed to Unsubscribe Topic"),a.logger.error(u),u}})()}rpcSubscribe(n,t){var o=this;return(0,m.Z)(function*(){const a={method:(0,x.cO)(t.protocol).subscribe,params:{topic:n}};o.logger.debug("Outgoing Relay Payload"),o.logger.trace({type:"payload",direction:"outgoing",request:a});try{yield yield(0,x.hF)(o.relayer.request(a),o.subscribeTimeout)}catch{o.logger.debug("Outgoing Relay Subscribe Payload stalled"),o.relayer.events.emit("relayer_connection_stalled")}return(0,x.rj)(n+o.clientId)})()}rpcBatchSubscribe(n){var t=this;return(0,m.Z)(function*(){if(!n.length)return;const a={method:(0,x.cO)(n[0].relay.protocol).batchSubscribe,params:{topics:n.map(u=>u.topic)}};t.logger.debug("Outgoing Relay Payload"),t.logger.trace({type:"payload",direction:"outgoing",request:a});try{return yield yield(0,x.hF)(t.relayer.request(a),t.subscribeTimeout)}catch{t.logger.debug("Outgoing Relay Payload stalled"),t.relayer.events.emit("relayer_connection_stalled")}})()}rpcUnsubscribe(n,t,o){const a={method:(0,x.cO)(o.protocol).unsubscribe,params:{topic:n,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(n,t){this.setSubscription(n,sa(zi({},t),{id:n})),this.pending.delete(t.topic)}onBatchSubscribe(n){n.length&&n.forEach(t=>{this.setSubscription(t.id,zi({},t)),this.pending.delete(t.topic)})}onUnsubscribe(n,t,o){var a=this;return(0,m.Z)(function*(){a.events.removeAllListeners(t),a.hasSubscription(t,n)&&a.deleteSubscription(t,o),yield a.relayer.messages.del(n)})()}setRelayerSubscriptions(n){var t=this;return(0,m.Z)(function*(){yield t.relayer.core.storage.setItem(t.storageKey,n)})()}getRelayerSubscriptions(){var n=this;return(0,m.Z)(function*(){return yield n.relayer.core.storage.getItem(n.storageKey)})()}setSubscription(n,t){this.subscriptions.has(n)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:n,subscription:t}),this.addSubscription(n,t))}addSubscription(n,t){this.subscriptions.set(n,zi({},t)),this.topicMap.set(t.topic,n),this.events.emit(rn_created,t)}getSubscription(n){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:n});const t=this.subscriptions.get(n);if(!t){const{message:o}=(0,x.Z7)("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(o)}return t}deleteSubscription(n,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:n,reason:t});const o=this.getSubscription(n);this.subscriptions.delete(n),this.topicMap.delete(o.topic,n),this.events.emit(rn_deleted,sa(zi({},o),{reason:t}))}persist(){var n=this;return(0,m.Z)(function*(){yield n.setRelayerSubscriptions(n.values),n.events.emit("subscription_sync")})()}reset(){var n=this;return(0,m.Z)(function*(){if(n.cached.length){const t=Math.ceil(n.cached.length/n.batchSubscribeTopicsLimit);for(let o=0;o<t;o++){const a=n.cached.splice(0,n.batchSubscribeTopicsLimit);yield n.batchSubscribe(a)}}n.events.emit("subscription_resubscribed")})()}restore(){var n=this;return(0,m.Z)(function*(){try{const t=yield n.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(n.subscriptions.size){const{message:o}=(0,x.Z7)("RESTORE_WILL_OVERRIDE",n.name);throw n.logger.error(o),n.logger.error(`${n.name}: ${JSON.stringify(n.values)}`),new Error(o)}n.cached=t,n.logger.debug(`Successfully Restored subscriptions for ${n.name}`),n.logger.trace({type:"method",method:"restore",subscriptions:n.values})}catch(t){n.logger.debug(`Failed to Restore subscriptions for ${n.name}`),n.logger.error(t)}})()}batchSubscribe(n){var t=this;return(0,m.Z)(function*(){if(!n.length)return;const o=yield t.rpcBatchSubscribe(n);(0,x.qt)(o)&&t.onBatchSubscribe(o.map((a,u)=>sa(zi({},n[u]),{id:a})))})()}onConnect(){var n=this;return(0,m.Z)(function*(){n.restartInProgress||(yield n.restart(),n.onEnable())})()}onDisconnect(){this.onDisable()}checkPending(){var n=this;return(0,m.Z)(function*(){if(!n.initialized||n.relayer.transportExplicitlyClosed)return;const t=[];n.pending.forEach(o=>{t.push(o)}),yield n.batchSubscribe(t)})()}registerEventListeners(){var n=this;this.relayer.core.heartbeat.on(xe.HEARTBEAT_EVENTS.pulse,(0,m.Z)(function*(){yield n.checkPending()})),this.relayer.on("relayer_connect",(0,m.Z)(function*(){yield n.onConnect()})),this.relayer.on("relayer_disconnect",()=>{this.onDisconnect()}),this.events.on(rn_created,function(){var t=(0,m.Z)(function*(o){const a=rn_created;n.logger.info(`Emitting ${a}`),n.logger.debug({type:"event",event:a,data:o}),yield n.persist()});return function(o){return t.apply(this,arguments)}}()),this.events.on(rn_deleted,function(){var t=(0,m.Z)(function*(o){const a=rn_deleted;n.logger.info(`Emitting ${a}`),n.logger.debug({type:"event",event:a,data:o}),yield n.persist()});return function(o){return t.apply(this,arguments)}}())}isInitialized(){if(!this.initialized){const{message:n}=(0,x.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}restartToComplete(){var n=this;return(0,m.Z)(function*(){n.restartInProgress&&(yield new Promise(t=>{const o=setInterval(()=>{n.restartInProgress||(clearInterval(o),t())},n.pollingInterval)}))})()}}var Ld=Object.defineProperty,lu=Object.getOwnPropertySymbols,jd=Object.prototype.hasOwnProperty,Fd=Object.prototype.propertyIsEnumerable,fu=(y,n,t)=>n in y?Ld(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t;class Zd extends de{constructor(n){var t;super(n),t=this,this.protocol="wc",this.version=2,this.events=new ae.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=function(){var o=(0,m.Z)(function*(a){t.logger.debug("Publishing Request Payload");try{return yield t.toEstablishConnection(),yield t.provider.request(a)}catch(u){throw t.logger.debug("Failed to Publish Request"),t.logger.error(u),u}});return function(a){return o.apply(this,arguments)}}(),this.onPayloadHandler=o=>{this.onProviderPayload(o)},this.onConnectHandler=()=>{this.events.emit("relayer_connect")},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=o=>{this.logger.error(o),this.events.emit("relayer_error",o),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on("payload",this.onPayloadHandler),this.provider.on("connect",this.onConnectHandler),this.provider.on("disconnect",this.onDisconnectHandler),this.provider.on("error",this.onProviderErrorHandler)},this.core=n.core,this.logger=typeof n.logger<"u"&&"string"!=typeof n.logger?(0,he.generateChildLogger)(n.logger,this.name):(0,he.pino)((0,he.getDefaultLoggerOptions)({level:n.logger||"error"})),this.messages=new Pd(this.logger,n.core),this.subscriber=new Nd(this,this.logger),this.publisher=new Sd(this,this.logger),this.relayUrl=n?.relayUrl||su,this.projectId=n.projectId,this.provider={}}init(){var n=this;return(0,m.Z)(function*(){n.logger.trace("Initialized"),n.registerEventListeners(),yield n.createProvider(),yield Promise.all([n.messages.init(),n.subscriber.init()]);try{yield n.transportOpen()}catch{n.logger.warn(`Connection via ${n.relayUrl} failed, attempting to connect via failover domain ${ou}...`),yield n.restartTransport(ou)}n.initialized=!0,setTimeout((0,m.Z)(function*(){0===n.subscriber.topics.length&&(n.logger.info("No topics subscribed to after init, closing transport"),yield n.transportClose(),n.transportExplicitlyClosed=!1)}),1e4)})()}get context(){return(0,he.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}publish(n,t,o){var a=this;return(0,m.Z)(function*(){a.isInitialized(),yield a.publisher.publish(n,t,o),yield a.recordMessageEvent({topic:n,message:t,publishedAt:Date.now()})})()}subscribe(n,t){var o=this;return(0,m.Z)(function*(){var a;o.isInitialized();let f,u=(null==(a=o.subscriber.topicMap.get(n))?void 0:a[0])||"";if(u)return u;const P=C=>{C.topic===n&&(o.subscriber.off(rn_created,P),f())};return yield Promise.all([new Promise(C=>{f=C,o.subscriber.on(rn_created,P)}),new Promise(function(){var C=(0,m.Z)(function*(z){u=yield o.subscriber.subscribe(n,t),z()});return function(z){return C.apply(this,arguments)}}())]),u})()}unsubscribe(n,t){var o=this;return(0,m.Z)(function*(){o.isInitialized(),yield o.subscriber.unsubscribe(n,t)})()}on(n,t){this.events.on(n,t)}once(n,t){this.events.once(n,t)}off(n,t){this.events.off(n,t)}removeListener(n,t){this.events.removeListener(n,t)}transportClose(){var n=this;return(0,m.Z)(function*(){n.transportExplicitlyClosed=!0,n.hasExperiencedNetworkDisruption&&n.connected?yield(0,x.hF)(n.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>n.onProviderDisconnect()):n.connected&&(yield n.provider.disconnect())})()}transportOpen(n){var t=this;return(0,m.Z)(function*(){if(t.transportExplicitlyClosed=!1,yield t.confirmOnlineStateOrThrow(),!t.connectionAttemptInProgress){n&&n!==t.relayUrl&&(t.relayUrl=n,yield t.transportClose(),yield t.createProvider()),t.connectionAttemptInProgress=!0;try{yield Promise.all([new Promise(o=>{if(!t.initialized)return o();t.subscriber.once("subscription_resubscribed",()=>{o()})}),new Promise(function(){var o=(0,m.Z)(function*(a,u){try{yield(0,x.hF)(t.provider.connect(),1e4,`Socket stalled when trying to connect to ${t.relayUrl}`)}catch(f){return void u(f)}a()});return function(a,u){return o.apply(this,arguments)}}())])}catch(o){if(t.logger.error(o),!t.isConnectionStalled(o.message))throw o;t.provider.events.emit("disconnect")}finally{t.connectionAttemptInProgress=!1,t.hasExperiencedNetworkDisruption=!1}}})()}restartTransport(n){var t=this;return(0,m.Z)(function*(){yield t.confirmOnlineStateOrThrow(),!t.connectionAttemptInProgress&&(t.relayUrl=n||t.relayUrl,yield t.transportClose(),yield t.createProvider(),yield t.transportOpen())})()}confirmOnlineStateOrThrow(){return(0,m.Z)(function*(){if(!(yield(0,x.Gg)()))throw new Error("No internet connection detected. Please restart your network and try again.")})()}isConnectionStalled(n){return this.staleConnectionErrors.some(t=>n.includes(t))}createProvider(){var n=this;return(0,m.Z)(function*(){n.provider.connection&&n.unregisterProviderListeners();const t=yield n.core.crypto.signJWT(n.relayUrl);n.provider=new Sr(new class Mo{constructor(n){if(this.url=n,this.events=new ae.EventEmitter,this.registering=!1,!gs(n))throw new Error(`Provided URL is not compatible with WebSocket connection: ${n}`);this.url=n}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(n,t){this.events.on(n,t)}once(n,t){this.events.once(n,t)}off(n,t){this.events.off(n,t)}removeListener(n,t){this.events.removeListener(n,t)}open(n=this.url){var t=this;return(0,m.Z)(function*(){yield t.register(n)})()}close(){var n=this;return(0,m.Z)(function*(){return new Promise((t,o)=>{typeof n.socket>"u"?o(new Error("Connection already closed")):(n.socket.onclose=a=>{n.onClose(a),t()},n.socket.close())})})()}send(n,t){var o=this;return(0,m.Z)(function*(){typeof o.socket>"u"&&(o.socket=yield o.register());try{o.socket.send(_(n))}catch(a){o.onError(n.id,a)}})()}register(n=this.url){if(!gs(n))throw new Error(`Provided URL is not compatible with WebSocket connection: ${n}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((o,a)=>{this.events.once("register_error",u=>{this.resetMaxListeners(),a(u)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));o(this.socket)})})}return this.url=n,this.registering=!0,new Promise((t,o)=>{const a=(0,Vt.isReactNative)()?void 0:{rejectUnauthorized:(y=n,!new RegExp("wss?://localhost(:d{2,5})?").test(y))},u=new Fo(n,[],a);var y;typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u"?u.onerror=f=>{o(this.emitError(f.error))}:u.on("error",f=>{o(this.emitError(f))}),u.onopen=()=>{this.onOpen(u),t(u)}})}onOpen(n){n.onmessage=t=>this.onPayload(t),n.onclose=t=>this.onClose(t),this.socket=n,this.registering=!1,this.events.emit("open")}onClose(n){this.socket=void 0,this.registering=!1,this.events.emit("close",n)}onPayload(n){if(typeof n.data>"u")return;const t="string"==typeof n.data?S(n.data):n.data;this.events.emit("payload",t)}onError(n,t){const o=this.parseError(t),u=bt(n,o.message||o.toString());this.events.emit("payload",u)}parseError(n,t=this.url){return _t(n,ys(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(n){const t=this.parseError(new Error(n?.message||`WebSocket connection failed for host: ${ys(this.url)}`));return this.events.emit("register_error",t),t}}((0,x.$0)({sdkVersion:"2.10.2",protocol:n.protocol,version:n.version,relayUrl:n.relayUrl,projectId:n.projectId,auth:t,useOnCloseEvent:!0}))),n.registerProviderListeners()})()}recordMessageEvent(n){var t=this;return(0,m.Z)(function*(){const{topic:o,message:a}=n;yield t.messages.set(o,a)})()}shouldIgnoreMessageEvent(n){var t=this;return(0,m.Z)(function*(){const{topic:o,message:a}=n;if(!a||0===a.length)return t.logger.debug(`Ignoring invalid/empty message: ${a}`),!0;if(!(yield t.subscriber.isSubscribed(o)))return t.logger.debug(`Ignoring message for non-subscribed topic ${o}`),!0;const u=t.messages.has(o,a);return u&&t.logger.debug(`Ignoring duplicate message: ${a}`),u})()}onProviderPayload(n){var t=this;return(0,m.Z)(function*(){if(t.logger.debug("Incoming Relay Payload"),t.logger.trace({type:"payload",direction:"incoming",payload:n}),ji(n)){if(!n.method.endsWith("_subscription"))return;const o=n.params,{topic:a,message:u,publishedAt:f}=o.data,P={topic:a,message:u,publishedAt:f};t.logger.debug("Emitting Relayer Payload"),t.logger.trace(((y,n)=>{for(var t in n||(n={}))jd.call(n,t)&&fu(y,t,n[t]);if(lu)for(var t of lu(n))Fd.call(n,t)&&fu(y,t,n[t]);return y})({type:"event",event:o.id},P)),t.events.emit(o.id,P),yield t.acknowledgePayload(n),yield t.onMessageEvent(P)}else pi(n)&&t.events.emit("relayer_message_ack",n)})()}onMessageEvent(n){var t=this;return(0,m.Z)(function*(){(yield t.shouldIgnoreMessageEvent(n))||(t.events.emit("relayer_message",n),yield t.recordMessageEvent(n))})()}acknowledgePayload(n){var t=this;return(0,m.Z)(function*(){const o=Ct(n.id,!0);yield t.provider.connection.send(o)})()}unregisterProviderListeners(){this.provider.off("payload",this.onPayloadHandler),this.provider.off("connect",this.onConnectHandler),this.provider.off("disconnect",this.onDisconnectHandler),this.provider.off("error",this.onProviderErrorHandler)}registerEventListeners(){var n=this;return(0,m.Z)(function*(){n.events.on("relayer_connection_stalled",()=>{n.restartTransport().catch(o=>n.logger.error(o))});let t=yield(0,x.Gg)();(0,x.uw)(function(){var o=(0,m.Z)(function*(a){n.initialized&&t!==a&&(t=a,a?yield n.restartTransport().catch(u=>n.logger.error(u)):(n.hasExperiencedNetworkDisruption=!0,yield n.transportClose().catch(u=>n.logger.error(u))))});return function(a){return o.apply(this,arguments)}}())})()}onProviderDisconnect(){this.events.emit("relayer_disconnect"),this.attemptToReconnect()}attemptToReconnect(){var n=this;this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout((0,m.Z)(function*(){yield n.restartTransport().catch(t=>n.logger.error(t))}),(0,D.toMiliseconds)(ud)))}isInitialized(){if(!this.initialized){const{message:n}=(0,x.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}toEstablishConnection(){var n=this;return(0,m.Z)(function*(){if(yield n.confirmOnlineStateOrThrow(),!n.connected){if(n.connectionAttemptInProgress)return yield new Promise(t=>{const o=setInterval(()=>{n.connected&&(clearInterval(o),t())},n.connectionStatusPollingInterval)});yield n.restartTransport()}})()}}var qd=Object.defineProperty,hu=Object.getOwnPropertySymbols,zd=Object.prototype.hasOwnProperty,Ud=Object.prototype.propertyIsEnumerable,du=(y,n,t)=>n in y?qd(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t,pu=(y,n)=>{for(var t in n||(n={}))zd.call(n,t)&&du(y,t,n[t]);if(hu)for(var t of hu(n))Ud.call(n,t)&&du(y,t,n[t]);return y};class Ts extends Ge{constructor(n,t,o,a=Zn,u=void 0){var f;super(n,t,o,a),f=this,this.core=n,this.logger=t,this.name=o,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Zn,this.init=(0,m.Z)(function*(){f.initialized||(f.logger.trace("Initialized"),yield f.restore(),f.cached.forEach(P=>{f.getKey&&null!==P&&!(0,x.o8)(P)?f.map.set(f.getKey(P),P):(0,x.xW)(P)?f.map.set(P.id,P):(0,x.h1)(P)&&f.map.set(P.topic,P)}),f.cached=[],f.initialized=!0)}),this.set=function(){var P=(0,m.Z)(function*(C,z){f.isInitialized(),f.map.has(C)?yield f.update(C,z):(f.logger.debug("Setting value"),f.logger.trace({type:"method",method:"set",key:C,value:z}),f.map.set(C,z),yield f.persist())});return function(C,z){return P.apply(this,arguments)}}(),this.get=P=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:P}),this.getData(P)),this.getAll=P=>(this.isInitialized(),P?this.values.filter(C=>Object.keys(P).every(z=>_s()(C[z],P[z]))):this.values),this.update=function(){var P=(0,m.Z)(function*(C,z){f.isInitialized(),f.logger.debug("Updating value"),f.logger.trace({type:"method",method:"update",key:C,update:z});const W=pu(pu({},f.getData(C)),z);f.map.set(C,W),yield f.persist()});return function(C,z){return P.apply(this,arguments)}}(),this.delete=function(){var P=(0,m.Z)(function*(C,z){f.isInitialized(),f.map.has(C)&&(f.logger.debug("Deleting value"),f.logger.trace({type:"method",method:"delete",key:C,reason:z}),f.map.delete(C),yield f.persist())});return function(C,z){return P.apply(this,arguments)}}(),this.logger=(0,he.generateChildLogger)(t,this.name),this.storagePrefix=a,this.getKey=u}get context(){return(0,he.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}setDataStore(n){var t=this;return(0,m.Z)(function*(){yield t.core.storage.setItem(t.storageKey,n)})()}getDataStore(){var n=this;return(0,m.Z)(function*(){return yield n.core.storage.getItem(n.storageKey)})()}getData(n){const t=this.map.get(n);if(!t){const{message:o}=(0,x.Z7)("NO_MATCHING_KEY",`${this.name}: ${n}`);throw this.logger.error(o),new Error(o)}return t}persist(){var n=this;return(0,m.Z)(function*(){yield n.setDataStore(n.values)})()}restore(){var n=this;return(0,m.Z)(function*(){try{const t=yield n.getDataStore();if(typeof t>"u"||!t.length)return;if(n.map.size){const{message:o}=(0,x.Z7)("RESTORE_WILL_OVERRIDE",n.name);throw n.logger.error(o),new Error(o)}n.cached=t,n.logger.debug(`Successfully Restored value for ${n.name}`),n.logger.trace({type:"method",method:"restore",value:n.values})}catch(t){n.logger.debug(`Failed to Restore value for ${n.name}`),n.logger.error(t)}})()}isInitialized(){if(!this.initialized){const{message:n}=(0,x.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}}class $d{constructor(n,t){var o=this;this.core=n,this.logger=t,this.name="pairing",this.version="0.3",this.events=new(ve()),this.initialized=!1,this.storagePrefix=Zn,this.ignoredPayloadTypes=[x.rV],this.registeredMethods=[],this.init=(0,m.Z)(function*(){o.initialized||(yield o.pairings.init(),yield o.cleanup(),o.registerRelayerEvents(),o.registerExpirerEvents(),o.initialized=!0,o.logger.trace("Initialized"))}),this.register=({methods:a})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...a])]},this.create=(0,m.Z)(function*(){o.isInitialized();const a=(0,x.jd)(),u=yield o.core.crypto.setSymKey(a),f=(0,x.gn)(D.FIVE_MINUTES),P={protocol:"irn"},C={topic:u,expiry:f,relay:P,active:!1},z=(0,x.Bv)({protocol:o.core.protocol,version:o.core.version,topic:u,symKey:a,relay:P});return yield o.pairings.set(u,C),yield o.core.relayer.subscribe(u),o.core.expirer.set(u,f),{topic:u,uri:z}}),this.pair=function(){var a=(0,m.Z)(function*(u){o.isInitialized(),o.isValidPair(u);const{topic:f,symKey:P,relay:C}=(0,x.he)(u.uri);let z;if(o.pairings.keys.includes(f)&&(z=o.pairings.get(f),z.active))throw new Error(`Pairing already exists: ${f}. Please try again with a new connection URI.`);o.core.crypto.keychain.has(f)||(yield o.core.crypto.setSymKey(P,f),yield o.core.relayer.subscribe(f,{relay:C}));const W=(0,x.gn)(D.FIVE_MINUTES),pe={topic:f,relay:C,expiry:W,active:!1};return yield o.pairings.set(f,pe),o.core.expirer.set(f,W),u.activatePairing&&(yield o.activate({topic:f})),o.events.emit("pairing_create",pe),pe});return function(u){return a.apply(this,arguments)}}(),this.activate=function(){var a=(0,m.Z)(function*({topic:u}){o.isInitialized();const f=(0,x.gn)(D.THIRTY_DAYS);yield o.pairings.update(u,{active:!0,expiry:f}),o.core.expirer.set(u,f)});return function(u){return a.apply(this,arguments)}}(),this.ping=function(){var a=(0,m.Z)(function*(u){o.isInitialized(),yield o.isValidPing(u);const{topic:f}=u;if(o.pairings.keys.includes(f)){const P=yield o.sendRequest(f,"wc_pairingPing",{}),{done:C,resolve:z,reject:W}=(0,x.H1)();o.events.once((0,x.E0)("pairing_ping",P),({error:pe})=>{pe?W(pe):z()}),yield C()}});return function(u){return a.apply(this,arguments)}}(),this.updateExpiry=function(){var a=(0,m.Z)(function*({topic:u,expiry:f}){o.isInitialized(),yield o.pairings.update(u,{expiry:f})});return function(u){return a.apply(this,arguments)}}(),this.updateMetadata=function(){var a=(0,m.Z)(function*({topic:u,metadata:f}){o.isInitialized(),yield o.pairings.update(u,{peerMetadata:f})});return function(u){return a.apply(this,arguments)}}(),this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=function(){var a=(0,m.Z)(function*(u){o.isInitialized(),yield o.isValidDisconnect(u);const{topic:f}=u;o.pairings.keys.includes(f)&&(yield o.sendRequest(f,"wc_pairingDelete",(0,x.D6)("USER_DISCONNECTED")),yield o.deletePairing(f))});return function(u){return a.apply(this,arguments)}}(),this.sendRequest=function(){var a=(0,m.Z)(function*(u,f,P){const C=mt(f,P),z=yield o.core.crypto.encode(u,C),W=Zi[f].req;return o.core.history.set(u,C),o.core.relayer.publish(u,z,W),C.id});return function(u,f,P){return a.apply(this,arguments)}}(),this.sendResult=function(){var a=(0,m.Z)(function*(u,f,P){const C=Ct(u,P),z=yield o.core.crypto.encode(f,C),W=yield o.core.history.get(f,u),pe=Zi[W.request.method].res;yield o.core.relayer.publish(f,z,pe),yield o.core.history.resolve(C)});return function(u,f,P){return a.apply(this,arguments)}}(),this.sendError=function(){var a=(0,m.Z)(function*(u,f,P){const C=bt(u,P),z=yield o.core.crypto.encode(f,C),W=yield o.core.history.get(f,u),pe=Zi[W.request.method]?Zi[W.request.method].res:Zi.unregistered_method.res;yield o.core.relayer.publish(f,z,pe),yield o.core.history.resolve(C)});return function(u,f,P){return a.apply(this,arguments)}}(),this.deletePairing=function(){var a=(0,m.Z)(function*(u,f){yield o.core.relayer.unsubscribe(u),yield Promise.all([o.pairings.delete(u,(0,x.D6)("USER_DISCONNECTED")),o.core.crypto.deleteSymKey(u),f?Promise.resolve():o.core.expirer.del(u)])});return function(u,f){return a.apply(this,arguments)}}(),this.cleanup=(0,m.Z)(function*(){const a=o.pairings.getAll().filter(u=>(0,x.Bw)(u.expiry));yield Promise.all(a.map(u=>o.deletePairing(u.topic)))}),this.onRelayEventRequest=a=>{const{topic:u,payload:f}=a;switch(f.method){case"wc_pairingPing":return this.onPairingPingRequest(u,f);case"wc_pairingDelete":return this.onPairingDeleteRequest(u,f);default:return this.onUnknownRpcMethodRequest(u,f)}},this.onRelayEventResponse=function(){var a=(0,m.Z)(function*(u){const{topic:f,payload:P}=u,C=(yield o.core.history.get(f,P.id)).request.method;return"wc_pairingPing"===C?o.onPairingPingResponse(f,P):o.onUnknownRpcMethodResponse(C)});return function(u){return a.apply(this,arguments)}}(),this.onPairingPingRequest=function(){var a=(0,m.Z)(function*(u,f){const{id:P}=f;try{o.isValidPing({topic:u}),yield o.sendResult(P,u,!0),o.events.emit("pairing_ping",{id:P,topic:u})}catch(C){yield o.sendError(P,u,C),o.logger.error(C)}});return function(u,f){return a.apply(this,arguments)}}(),this.onPairingPingResponse=(a,u)=>{const{id:f}=u;setTimeout(()=>{en(u)?this.events.emit((0,x.E0)("pairing_ping",f),{}):Nr(u)&&this.events.emit((0,x.E0)("pairing_ping",f),{error:u.error})},500)},this.onPairingDeleteRequest=function(){var a=(0,m.Z)(function*(u,f){const{id:P}=f;try{o.isValidDisconnect({topic:u}),yield o.deletePairing(u),o.events.emit("pairing_delete",{id:P,topic:u})}catch(C){yield o.sendError(P,u,C),o.logger.error(C)}});return function(u,f){return a.apply(this,arguments)}}(),this.onUnknownRpcMethodRequest=function(){var a=(0,m.Z)(function*(u,f){const{id:P,method:C}=f;try{if(o.registeredMethods.includes(C))return;const z=(0,x.D6)("WC_METHOD_UNSUPPORTED",C);yield o.sendError(P,u,z),o.logger.error(z)}catch(z){yield o.sendError(P,u,z),o.logger.error(z)}});return function(u,f){return a.apply(this,arguments)}}(),this.onUnknownRpcMethodResponse=a=>{this.registeredMethods.includes(a)||this.logger.error((0,x.D6)("WC_METHOD_UNSUPPORTED",a))},this.isValidPair=a=>{if(!(0,x.EJ)(a)){const{message:u}=(0,x.Z7)("MISSING_OR_INVALID",`pair() params: ${a}`);throw new Error(u)}if(!(0,x.jv)(a.uri)){const{message:u}=(0,x.Z7)("MISSING_OR_INVALID",`pair() uri: ${a.uri}`);throw new Error(u)}},this.isValidPing=function(){var a=(0,m.Z)(function*(u){if(!(0,x.EJ)(u)){const{message:P}=(0,x.Z7)("MISSING_OR_INVALID",`ping() params: ${u}`);throw new Error(P)}const{topic:f}=u;yield o.isValidPairingTopic(f)});return function(u){return a.apply(this,arguments)}}(),this.isValidDisconnect=function(){var a=(0,m.Z)(function*(u){if(!(0,x.EJ)(u)){const{message:P}=(0,x.Z7)("MISSING_OR_INVALID",`disconnect() params: ${u}`);throw new Error(P)}const{topic:f}=u;yield o.isValidPairingTopic(f)});return function(u){return a.apply(this,arguments)}}(),this.isValidPairingTopic=function(){var a=(0,m.Z)(function*(u){if(!(0,x.M_)(u,!1)){const{message:f}=(0,x.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${u}`);throw new Error(f)}if(!o.pairings.keys.includes(u)){const{message:f}=(0,x.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${u}`);throw new Error(f)}if((0,x.Bw)(o.pairings.get(u).expiry)){yield o.deletePairing(u);const{message:f}=(0,x.Z7)("EXPIRED",`pairing topic: ${u}`);throw new Error(f)}});return function(u){return a.apply(this,arguments)}}(),this.core=n,this.logger=(0,he.generateChildLogger)(t,this.name),this.pairings=new Ts(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,he.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){const{message:n}=(0,x.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}registerRelayerEvents(){var n=this;this.core.relayer.on("relayer_message",function(){var t=(0,m.Z)(function*(o){const{topic:a,message:u}=o;if(!n.pairings.keys.includes(a)||n.ignoredPayloadTypes.includes(n.core.crypto.getPayloadType(u)))return;const f=yield n.core.crypto.decode(a,u);try{ji(f)?(n.core.history.set(a,f),n.onRelayEventRequest({topic:a,payload:f})):pi(f)&&(yield n.core.history.resolve(f),yield n.onRelayEventResponse({topic:a,payload:f}),n.core.history.delete(a,f.id))}catch(P){n.logger.error(P)}});return function(o){return t.apply(this,arguments)}}())}registerExpirerEvents(){var n=this;this.core.expirer.on($r_expired,function(){var t=(0,m.Z)(function*(o){const{topic:a}=(0,x.iP)(o.target);a&&n.pairings.keys.includes(a)&&(yield n.deletePairing(a,!0),n.events.emit("pairing_expire",{topic:a}))});return function(o){return t.apply(this,arguments)}}())}}class Hd extends Re{constructor(n,t){var o;super(n,t),o=this,this.core=n,this.logger=t,this.records=new Map,this.events=new ae.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Zn,this.init=(0,m.Z)(function*(){o.initialized||(o.logger.trace("Initialized"),yield o.restore(),o.cached.forEach(a=>o.records.set(a.id,a)),o.cached=[],o.registerEventListeners(),o.initialized=!0)}),this.set=(a,u,f)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:a,request:u,chainId:f}),this.records.has(u.id))return;const P={id:u.id,topic:a,request:{method:u.method,params:u.params||null},chainId:f,expiry:(0,x.gn)(D.THIRTY_DAYS)};this.records.set(P.id,P),this.events.emit("history_created",P)},this.resolve=function(){var a=(0,m.Z)(function*(u){if(o.isInitialized(),o.logger.debug("Updating JSON-RPC response history record"),o.logger.trace({type:"method",method:"update",response:u}),!o.records.has(u.id))return;const f=yield o.getRecord(u.id);typeof f.response>"u"&&(f.response=Nr(u)?{error:u.error}:{result:u.result},o.records.set(f.id,f),o.events.emit("history_updated",f))});return function(u){return a.apply(this,arguments)}}(),this.get=function(){var a=(0,m.Z)(function*(u,f){return o.isInitialized(),o.logger.debug("Getting record"),o.logger.trace({type:"method",method:"get",topic:u,id:f}),yield o.getRecord(f)});return function(u,f){return a.apply(this,arguments)}}(),this.delete=(a,u)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:u}),this.values.forEach(f=>{if(f.topic===a){if(typeof u<"u"&&f.id!==u)return;this.records.delete(f.id),this.events.emit("history_deleted",f)}})},this.exists=function(){var a=(0,m.Z)(function*(u,f){return o.isInitialized(),!!o.records.has(f)&&(yield o.getRecord(f)).topic===u});return function(u,f){return a.apply(this,arguments)}}(),this.on=(a,u)=>{this.events.on(a,u)},this.once=(a,u)=>{this.events.once(a,u)},this.off=(a,u)=>{this.events.off(a,u)},this.removeListener=(a,u)=>{this.events.removeListener(a,u)},this.logger=(0,he.generateChildLogger)(t,this.name)}get context(){return(0,he.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const n=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const o={topic:t.topic,request:mt(t.request.method,t.request.params,t.id),chainId:t.chainId};return n.push(o)}),n}setJsonRpcRecords(n){var t=this;return(0,m.Z)(function*(){yield t.core.storage.setItem(t.storageKey,n)})()}getJsonRpcRecords(){var n=this;return(0,m.Z)(function*(){return yield n.core.storage.getItem(n.storageKey)})()}getRecord(n){this.isInitialized();const t=this.records.get(n);if(!t){const{message:o}=(0,x.Z7)("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(o)}return t}persist(){var n=this;return(0,m.Z)(function*(){yield n.setJsonRpcRecords(n.values),n.events.emit("history_sync")})()}restore(){var n=this;return(0,m.Z)(function*(){try{const t=yield n.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(n.records.size){const{message:o}=(0,x.Z7)("RESTORE_WILL_OVERRIDE",n.name);throw n.logger.error(o),new Error(o)}n.cached=t,n.logger.debug(`Successfully Restored records for ${n.name}`),n.logger.trace({type:"method",method:"restore",records:n.values})}catch(t){n.logger.debug(`Failed to Restore records for ${n.name}`),n.logger.error(t)}})()}registerEventListeners(){this.events.on("history_created",n=>{const t="history_created";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:n}),this.persist()}),this.events.on("history_updated",n=>{const t="history_updated";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:n}),this.persist()}),this.events.on("history_deleted",n=>{const t="history_deleted";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:n}),this.persist()}),this.core.heartbeat.on(xe.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(n=>{(0,D.toMiliseconds)(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.delete(n.topic,n.id))})}catch(n){this.logger.warn(n)}}isInitialized(){if(!this.initialized){const{message:n}=(0,x.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}}class Bd extends se{constructor(n,t){var o;super(n,t),o=this,this.core=n,this.logger=t,this.expirations=new Map,this.events=new ae.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Zn,this.init=(0,m.Z)(function*(){o.initialized||(o.logger.trace("Initialized"),yield o.restore(),o.cached.forEach(a=>o.expirations.set(a.target,a)),o.cached=[],o.registerEventListeners(),o.initialized=!0)}),this.has=a=>{try{const u=this.formatTarget(a);return typeof this.getExpiration(u)<"u"}catch{return!1}},this.set=(a,u)=>{this.isInitialized();const f=this.formatTarget(a),P={target:f,expiry:u};this.expirations.set(f,P),this.checkExpiry(f,P),this.events.emit("expirer_created",{target:f,expiration:P})},this.get=a=>{this.isInitialized();const u=this.formatTarget(a);return this.getExpiration(u)},this.del=a=>{if(this.isInitialized(),this.has(a)){const u=this.formatTarget(a),f=this.getExpiration(u);this.expirations.delete(u),this.events.emit("expirer_deleted",{target:u,expiration:f})}},this.on=(a,u)=>{this.events.on(a,u)},this.once=(a,u)=>{this.events.once(a,u)},this.off=(a,u)=>{this.events.off(a,u)},this.removeListener=(a,u)=>{this.events.removeListener(a,u)},this.logger=(0,he.generateChildLogger)(t,this.name)}get context(){return(0,he.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(n){if("string"==typeof n)return(0,x.Z4)(n);if("number"==typeof n)return(0,x.Gq)(n);const{message:t}=(0,x.Z7)("UNKNOWN_TYPE","Target type: "+typeof n);throw new Error(t)}setExpirations(n){var t=this;return(0,m.Z)(function*(){yield t.core.storage.setItem(t.storageKey,n)})()}getExpirations(){var n=this;return(0,m.Z)(function*(){return yield n.core.storage.getItem(n.storageKey)})()}persist(){var n=this;return(0,m.Z)(function*(){yield n.setExpirations(n.values),n.events.emit("expirer_sync")})()}restore(){var n=this;return(0,m.Z)(function*(){try{const t=yield n.getExpirations();if(typeof t>"u"||!t.length)return;if(n.expirations.size){const{message:o}=(0,x.Z7)("RESTORE_WILL_OVERRIDE",n.name);throw n.logger.error(o),new Error(o)}n.cached=t,n.logger.debug(`Successfully Restored expirations for ${n.name}`),n.logger.trace({type:"method",method:"restore",expirations:n.values})}catch(t){n.logger.debug(`Failed to Restore expirations for ${n.name}`),n.logger.error(t)}})()}getExpiration(n){const t=this.expirations.get(n);if(!t){const{message:o}=(0,x.Z7)("NO_MATCHING_KEY",`${this.name}: ${n}`);throw this.logger.error(o),new Error(o)}return t}checkExpiry(n,t){const{expiry:o}=t;(0,D.toMiliseconds)(o)-Date.now()<=0&&this.expire(n,t)}expire(n,t){this.expirations.delete(n),this.events.emit($r_expired,{target:n,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((n,t)=>this.checkExpiry(t,n))}registerEventListeners(){this.core.heartbeat.on(xe.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on("expirer_created",n=>{const t="expirer_created";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:n}),this.persist()}),this.events.on($r_expired,n=>{const t=$r_expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:n}),this.persist()}),this.events.on("expirer_deleted",n=>{const t="expirer_deleted";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:n}),this.persist()})}isInitialized(){if(!this.initialized){const{message:n}=(0,x.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}}class Vd extends ue{constructor(n,t){var o;super(n,t),o=this,this.projectId=n,this.logger=t,this.name=ia,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=(0,m.Z)(function*(){if(o.verifyDisabled||(0,x.b$)()||!(0,x.jU)())return;const a=As;o.verifyUrl!==a&&o.removeIframe(),o.verifyUrl=a;try{yield o.createIframe()}catch(u){o.logger.info(`Verify iframe failed to load: ${o.verifyUrl}`),o.logger.info(u)}if(!o.initialized){o.removeIframe(),o.verifyUrl=au;try{yield o.createIframe()}catch(u){o.logger.info(`Verify iframe failed to load: ${o.verifyUrl}`),o.logger.info(u),o.verifyDisabled=!0}}}),this.register=function(){var a=(0,m.Z)(function*(u){o.initialized?o.sendPost(u.attestationId):(o.addToQueue(u.attestationId),yield o.init())});return function(u){return a.apply(this,arguments)}}(),this.resolve=function(){var a=(0,m.Z)(function*(u){if(o.isDevEnv)return"";const f=u?.verifyUrl||As;let P;try{P=yield o.fetchAttestation(u.attestationId,f)}catch(C){o.logger.info(`failed to resolve attestation: ${u.attestationId} from url: ${f}`),o.logger.info(C),P=yield o.fetchAttestation(u.attestationId,au)}return P});return function(u){return a.apply(this,arguments)}}(),this.fetchAttestation=function(){var a=(0,m.Z)(function*(u,f){o.logger.info(`resolving attestation: ${u} from url: ${f}`);const P=o.startAbortTimer(2*D.ONE_SECOND),C=yield fetch(`${f}/attestation/${u}`,{signal:o.abortController.signal});return clearTimeout(P),200===C.status?yield C.json():void 0});return function(u,f){return a.apply(this,arguments)}}(),this.addToQueue=a=>{this.queue.push(a)},this.processQueue=()=>{0!==this.queue.length&&(this.queue.forEach(a=>this.sendPost(a)),this.queue=[])},this.sendPost=a=>{var u;try{if(!this.iframe)return;null==(u=this.iframe.contentWindow)||u.postMessage(a,"*"),this.logger.info(`postMessage sent: ${a} ${this.verifyUrl}`)}catch{}},this.createIframe=(0,m.Z)(function*(){let a;const u=f=>{"verify_ready"===f.data&&(o.initialized=!0,o.processQueue(),window.removeEventListener("message",u),a())};yield Promise.race([new Promise(f=>{if(document.getElementById(ia))return f();window.addEventListener("message",u);const P=document.createElement("iframe");P.id=ia,P.src=`${o.verifyUrl}/${o.projectId}`,P.style.display="none",document.body.append(P),o.iframe=P,a=f}),new Promise((f,P)=>setTimeout(()=>{window.removeEventListener("message",u),P("verify iframe load timeout")},(0,D.toMiliseconds)(D.FIVE_SECONDS)))])}),this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=(0,he.generateChildLogger)(t,this.name),this.verifyUrl=As,this.abortController=new AbortController,this.isDevEnv=(0,x.UG)()&&process.env.IS_VITEST}get context(){return(0,he.getLoggerContext)(this.logger)}startAbortTimer(n){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,D.toMiliseconds)(n))}}var kd=Object.defineProperty,gu=Object.getOwnPropertySymbols,Kd=Object.prototype.hasOwnProperty,Gd=Object.prototype.propertyIsEnumerable,yu=(y,n,t)=>n in y?kd(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t,vu=(y,n)=>{for(var t in n||(n={}))Kd.call(n,t)&&yu(y,t,n[t]);if(gu)for(var t of gu(n))Gd.call(n,t)&&yu(y,t,n[t]);return y};class oa extends ce{constructor(n){super(n),this.protocol="wc",this.version=2,this.name="core",this.events=new ae.EventEmitter,this.initialized=!1,this.on=(o,a)=>this.events.on(o,a),this.once=(o,a)=>this.events.once(o,a),this.off=(o,a)=>this.events.off(o,a),this.removeListener=(o,a)=>this.events.removeListener(o,a),this.projectId=n?.projectId,this.relayUrl=n?.relayUrl||su,this.customStoragePrefix=null!=n&&n.customStoragePrefix?`:${n.customStoragePrefix}`:"";const t=typeof n?.logger<"u"&&"string"!=typeof n?.logger?n.logger:(0,he.pino)((0,he.getDefaultLoggerOptions)({level:n?.logger||"error"}));this.logger=(0,he.generateChildLogger)(t,this.name),this.heartbeat=new xe.HeartBeat,this.crypto=new Id(this,this.logger,n?.keychain),this.history=new Hd(this,this.logger),this.expirer=new Bd(this,this.logger),this.storage=null!=n&&n.storage?n.storage:new X.ZP(vu(vu({},Qh),n?.storageOptions)),this.relayer=new Zd({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new $d(this,this.logger),this.verify=new Vd(this.projectId||"",this.logger)}static init(n){return(0,m.Z)(function*(){const t=new oa(n);yield t.initialize();const o=yield t.crypto.getClientId();return yield t.storage.setItem("WALLETCONNECT_CLIENT_ID",o),t})()}get context(){return(0,he.getLoggerContext)(this.logger)}start(){var n=this;return(0,m.Z)(function*(){n.initialized||(yield n.initialize())})()}initialize(){var n=this;return(0,m.Z)(function*(){n.logger.trace("Initialized");try{yield n.crypto.init(),yield n.history.init(),yield n.expirer.init(),yield n.relayer.init(),yield n.heartbeat.init(),yield n.pairing.init(),n.initialized=!0,n.logger.info("Core Initialization Success")}catch(t){throw n.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),n.logger.error(t.message),t}})()}}const Wd=oa,aa="wc@2:client:",wu="WALLETCONNECT_DEEPLINK_CHOICE",xu="Proposal expired",Cs=D.SEVEN_DAYS,Ui={wc_sessionPropose:{req:{ttl:D.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:D.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:D.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:D.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:D.ONE_DAY,prompt:!1,tag:1104},res:{ttl:D.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:D.ONE_DAY,prompt:!1,tag:1106},res:{ttl:D.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:D.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:D.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:D.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:D.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:D.ONE_DAY,prompt:!1,tag:1112},res:{ttl:D.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:D.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:D.THIRTY_SECONDS,prompt:!1,tag:1115}}},ua={min:D.FIVE_MINUTES,max:D.SEVEN_DAYS},ep=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var tp=Object.defineProperty,rp=Object.defineProperties,np=Object.getOwnPropertyDescriptors,Eu=Object.getOwnPropertySymbols,ip=Object.prototype.hasOwnProperty,sp=Object.prototype.propertyIsEnumerable,Iu=(y,n,t)=>n in y?tp(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t,Rr=(y,n)=>{for(var t in n||(n={}))ip.call(n,t)&&Iu(y,t,n[t]);if(Eu)for(var t of Eu(n))sp.call(n,t)&&Iu(y,t,n[t]);return y},$i=(y,n)=>rp(y,np(n));class op extends p{constructor(n){var t;super(n),t=this,this.name="engine",this.events=new(ve()),this.initialized=!1,this.ignoredPayloadTypes=[x.rV],this.requestQueue={state:"IDLE",queue:[]},this.sessionRequestQueue={state:"IDLE",queue:[]},this.requestQueueDelay=D.ONE_SECOND,this.init=(0,m.Z)(function*(){t.initialized||(yield t.cleanup(),t.registerRelayerEvents(),t.registerExpirerEvents(),t.registerPairingEvents(),t.client.core.pairing.register({methods:Object.keys(Ui)}),t.initialized=!0,setTimeout(()=>{t.sessionRequestQueue.queue=t.getPendingSessionRequests(),t.processSessionRequestQueue()},(0,D.toMiliseconds)(t.requestQueueDelay)))}),this.connect=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized();const u=$i(Rr({},a),{requiredNamespaces:a.requiredNamespaces||{},optionalNamespaces:a.optionalNamespaces||{}});yield t.isValidConnect(u);const{pairingTopic:f,requiredNamespaces:P,optionalNamespaces:C,sessionProperties:z,relays:W}=u;let Oe,pe=f,Fe=!1;if(pe&&(Fe=t.client.core.pairing.pairings.get(pe).active),!pe||!Fe){const{topic:ft,uri:Zt}=yield t.client.core.pairing.create();pe=ft,Oe=Zt}const we=yield t.client.core.crypto.generateKeyPair(),Ve=Rr({requiredNamespaces:P,optionalNamespaces:C,relays:W??[{protocol:"irn"}],proposer:{publicKey:we,metadata:t.client.metadata}},z&&{sessionProperties:z}),{reject:Qe,resolve:xt,done:fr}=(0,x.H1)(D.FIVE_MINUTES,xu);if(t.events.once((0,x.E0)("session_connect"),function(){var ft=(0,m.Z)(function*({error:Zt,session:et}){if(Zt)Qe(Zt);else if(et){et.self.publicKey=we;const ar=$i(Rr({},et),{requiredNamespaces:et.requiredNamespaces,optionalNamespaces:et.optionalNamespaces});yield t.client.session.set(et.topic,ar),yield t.setExpiry(et.topic,et.expiry),pe&&(yield t.client.core.pairing.updateMetadata({topic:pe,metadata:et.peer.metadata})),xt(ar)}});return function(Zt){return ft.apply(this,arguments)}}()),!pe){const{message:ft}=(0,x.Z7)("NO_MATCHING_KEY",`connect() pairing topic: ${pe}`);throw new Error(ft)}const yt=yield t.sendRequest({topic:pe,method:"wc_sessionPropose",params:Ve}),Mt=(0,x.gn)(D.FIVE_MINUTES);return yield t.setProposal(yt,Rr({id:yt,expiry:Mt},Ve)),{uri:Oe,approval:fr}});return function(a){return o.apply(this,arguments)}}(),this.pair=function(){var o=(0,m.Z)(function*(a){return yield t.isInitialized(),yield t.client.core.pairing.pair(a)});return function(a){return o.apply(this,arguments)}}(),this.approve=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized(),yield t.isValidApprove(a);const{id:u,relayProtocol:f,namespaces:P,sessionProperties:C}=a,z=t.client.proposal.get(u);let{pairingTopic:W,proposer:pe,requiredNamespaces:Oe,optionalNamespaces:Fe}=z;W=W||"",(0,x.L5)(Oe)||(Oe=(0,x.fc)(P,"approve()"));const we=yield t.client.core.crypto.generateKeyPair(),Ve=pe.publicKey,Qe=yield t.client.core.crypto.generateSharedKey(we,Ve);W&&u&&(yield t.client.core.pairing.updateMetadata({topic:W,metadata:pe.metadata}),yield t.sendResult({id:u,topic:W,result:{relay:{protocol:f??"irn"},responderPublicKey:we}}),yield t.client.proposal.delete(u,(0,x.D6)("USER_DISCONNECTED")),yield t.client.core.pairing.activate({topic:W}));const xt=Rr({relay:{protocol:f??"irn"},namespaces:P,requiredNamespaces:Oe,optionalNamespaces:Fe,pairingTopic:W,controller:{publicKey:we,metadata:t.client.metadata},expiry:(0,x.gn)(Cs)},C&&{sessionProperties:C});yield t.client.core.relayer.subscribe(Qe),yield t.sendRequest({topic:Qe,method:"wc_sessionSettle",params:xt,throwOnFailedPublish:!0});const fr=$i(Rr({},xt),{topic:Qe,pairingTopic:W,acknowledged:!1,self:xt.controller,peer:{publicKey:pe.publicKey,metadata:pe.metadata},controller:we});return yield t.client.session.set(Qe,fr),yield t.setExpiry(Qe,(0,x.gn)(Cs)),{topic:Qe,acknowledged:()=>new Promise(yt=>setTimeout(()=>yt(t.client.session.get(Qe)),500))}});return function(a){return o.apply(this,arguments)}}(),this.reject=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized(),yield t.isValidReject(a);const{id:u,reason:f}=a,{pairingTopic:P}=t.client.proposal.get(u);P&&(yield t.sendError(u,P,f),yield t.client.proposal.delete(u,(0,x.D6)("USER_DISCONNECTED")))});return function(a){return o.apply(this,arguments)}}(),this.update=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized(),yield t.isValidUpdate(a);const{topic:u,namespaces:f}=a,P=yield t.sendRequest({topic:u,method:"wc_sessionUpdate",params:{namespaces:f}}),{done:C,resolve:z,reject:W}=(0,x.H1)();return t.events.once((0,x.E0)("session_update",P),({error:pe})=>{pe?W(pe):z()}),yield t.client.session.update(u,{namespaces:f}),{acknowledged:C}});return function(a){return o.apply(this,arguments)}}(),this.extend=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized(),yield t.isValidExtend(a);const{topic:u}=a,f=yield t.sendRequest({topic:u,method:"wc_sessionExtend",params:{}}),{done:P,resolve:C,reject:z}=(0,x.H1)();return t.events.once((0,x.E0)("session_extend",f),({error:W})=>{W?z(W):C()}),yield t.setExpiry(u,(0,x.gn)(Cs)),{acknowledged:P}});return function(a){return o.apply(this,arguments)}}(),this.request=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized(),yield t.isValidRequest(a);const{chainId:u,request:f,topic:P,expiry:C}=a,z=Nt(),{done:W,resolve:pe,reject:Oe}=(0,x.H1)(C,"Request expired. Please try again.");return t.events.once((0,x.E0)("session_request",z),({error:Fe,result:we})=>{Fe?Oe(Fe):pe(we)}),yield Promise.all([new Promise(function(){var Fe=(0,m.Z)(function*(we){yield t.sendRequest({clientRpcId:z,topic:P,method:"wc_sessionRequest",params:{request:f,chainId:u},expiry:C,throwOnFailedPublish:!0}).catch(Ve=>Oe(Ve)),t.client.events.emit("session_request_sent",{topic:P,request:f,chainId:u,id:z}),we()});return function(we){return Fe.apply(this,arguments)}}()),new Promise(function(){var Fe=(0,m.Z)(function*(we){const Ve=yield t.client.core.storage.getItem(wu);(0,x.Hh)({id:z,topic:P,wcDeepLink:Ve}),we()});return function(we){return Fe.apply(this,arguments)}}()),W()]).then(Fe=>Fe[2])});return function(a){return o.apply(this,arguments)}}(),this.respond=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized(),yield t.isValidRespond(a);const{topic:u,response:f}=a,{id:P}=f;en(f)?yield t.sendResult({id:P,topic:u,result:f.result,throwOnFailedPublish:!0}):Nr(f)&&(yield t.sendError(P,u,f.error)),t.cleanupAfterResponse(a)});return function(a){return o.apply(this,arguments)}}(),this.ping=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized(),yield t.isValidPing(a);const{topic:u}=a;if(t.client.session.keys.includes(u)){const f=yield t.sendRequest({topic:u,method:"wc_sessionPing",params:{}}),{done:P,resolve:C,reject:z}=(0,x.H1)();t.events.once((0,x.E0)("session_ping",f),({error:W})=>{W?z(W):C()}),yield P()}else t.client.core.pairing.pairings.keys.includes(u)&&(yield t.client.core.pairing.ping({topic:u}))});return function(a){return o.apply(this,arguments)}}(),this.emit=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized(),yield t.isValidEmit(a);const{topic:u,event:f,chainId:P}=a;yield t.sendRequest({topic:u,method:"wc_sessionEvent",params:{event:f,chainId:P}})});return function(a){return o.apply(this,arguments)}}(),this.disconnect=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized(),yield t.isValidDisconnect(a);const{topic:u}=a;t.client.session.keys.includes(u)?(yield t.sendRequest({topic:u,method:"wc_sessionDelete",params:(0,x.D6)("USER_DISCONNECTED"),throwOnFailedPublish:!0}),yield t.deleteSession(u)):yield t.client.core.pairing.disconnect({topic:u})});return function(a){return o.apply(this,arguments)}}(),this.find=o=>(this.isInitialized(),this.client.session.getAll().filter(a=>(0,x.Ih)(a,o))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=function(){var o=(0,m.Z)(function*(a){if(a.pairingTopic)try{const u=t.client.core.pairing.pairings.get(a.pairingTopic),f=t.client.core.pairing.pairings.getAll().filter(P=>{var C,z;return(null==(C=P.peerMetadata)?void 0:C.url)&&(null==(z=P.peerMetadata)?void 0:z.url)===a.peer.metadata.url&&P.topic&&P.topic!==u.topic});if(0===f.length)return;t.client.logger.info(`Cleaning up ${f.length} duplicate pairing(s)`),yield Promise.all(f.map(P=>t.client.core.pairing.disconnect({topic:P.topic}))),t.client.logger.info("Duplicate pairings clean up finished")}catch(u){t.client.logger.error(u)}});return function(a){return o.apply(this,arguments)}}(),this.deleteSession=function(){var o=(0,m.Z)(function*(a,u){const{self:f}=t.client.session.get(a);yield t.client.core.relayer.unsubscribe(a),t.client.session.delete(a,(0,x.D6)("USER_DISCONNECTED")),t.client.core.crypto.keychain.has(f.publicKey)&&(yield t.client.core.crypto.deleteKeyPair(f.publicKey)),t.client.core.crypto.keychain.has(a)&&(yield t.client.core.crypto.deleteSymKey(a)),u||t.client.core.expirer.del(a),t.client.core.storage.removeItem(wu).catch(P=>t.client.logger.warn(P))});return function(a,u){return o.apply(this,arguments)}}(),this.deleteProposal=function(){var o=(0,m.Z)(function*(a,u){yield Promise.all([t.client.proposal.delete(a,(0,x.D6)("USER_DISCONNECTED")),u?Promise.resolve():t.client.core.expirer.del(a)])});return function(a,u){return o.apply(this,arguments)}}(),this.deletePendingSessionRequest=function(){var o=(0,m.Z)(function*(a,u,f=!1){yield Promise.all([t.client.pendingRequest.delete(a,u),f?Promise.resolve():t.client.core.expirer.del(a)]),t.sessionRequestQueue.queue=t.sessionRequestQueue.queue.filter(P=>P.id!==a),f&&(t.sessionRequestQueue.state="IDLE")});return function(a,u){return o.apply(this,arguments)}}(),this.setExpiry=function(){var o=(0,m.Z)(function*(a,u){t.client.session.keys.includes(a)&&(yield t.client.session.update(a,{expiry:u})),t.client.core.expirer.set(a,u)});return function(a,u){return o.apply(this,arguments)}}(),this.setProposal=function(){var o=(0,m.Z)(function*(a,u){yield t.client.proposal.set(a,u),t.client.core.expirer.set(a,u.expiry)});return function(a,u){return o.apply(this,arguments)}}(),this.setPendingSessionRequest=function(){var o=(0,m.Z)(function*(a){const u=Ui.wc_sessionRequest.req.ttl,{id:f,topic:P,params:C,verifyContext:z}=a;yield t.client.pendingRequest.set(f,{id:f,topic:P,params:C,verifyContext:z}),u&&t.client.core.expirer.set(f,(0,x.gn)(u))});return function(a){return o.apply(this,arguments)}}(),this.sendRequest=function(){var o=(0,m.Z)(function*(a){const{topic:u,method:f,params:P,expiry:C,relayRpcId:z,clientRpcId:W,throwOnFailedPublish:pe}=a,Oe=mt(f,P,W);if((0,x.jU)()&&ep.includes(f)){const Ve=(0,x.rj)(JSON.stringify(Oe));t.client.core.verify.register({attestationId:Ve})}const Fe=yield t.client.core.crypto.encode(u,Oe),we=Ui[f].req;return C&&(we.ttl=C),z&&(we.id=z),t.client.core.history.set(u,Oe),pe?(we.internal=$i(Rr({},we.internal),{throwOnFailedPublish:!0}),yield t.client.core.relayer.publish(u,Fe,we)):t.client.core.relayer.publish(u,Fe,we).catch(Ve=>t.client.logger.error(Ve)),Oe.id});return function(a){return o.apply(this,arguments)}}(),this.sendResult=function(){var o=(0,m.Z)(function*(a){const{id:u,topic:f,result:P,throwOnFailedPublish:C}=a,z=Ct(u,P),W=yield t.client.core.crypto.encode(f,z),pe=yield t.client.core.history.get(f,u),Oe=Ui[pe.request.method].res;C?(Oe.internal=$i(Rr({},Oe.internal),{throwOnFailedPublish:!0}),yield t.client.core.relayer.publish(f,W,Oe)):t.client.core.relayer.publish(f,W,Oe).catch(Fe=>t.client.logger.error(Fe)),yield t.client.core.history.resolve(z)});return function(a){return o.apply(this,arguments)}}(),this.sendError=function(){var o=(0,m.Z)(function*(a,u,f){const P=bt(a,f),C=yield t.client.core.crypto.encode(u,P),z=yield t.client.core.history.get(u,a);t.client.core.relayer.publish(u,C,Ui[z.request.method].res),yield t.client.core.history.resolve(P)});return function(a,u,f){return o.apply(this,arguments)}}(),this.cleanup=(0,m.Z)(function*(){const o=[],a=[];t.client.session.getAll().forEach(u=>{(0,x.Bw)(u.expiry)&&o.push(u.topic)}),t.client.proposal.getAll().forEach(u=>{(0,x.Bw)(u.expiry)&&a.push(u.id)}),yield Promise.all([...o.map(u=>t.deleteSession(u)),...a.map(u=>t.deleteProposal(u))])}),this.onRelayEventRequest=function(){var o=(0,m.Z)(function*(a){t.requestQueue.queue.push(a),yield t.processRequestsQueue()});return function(a){return o.apply(this,arguments)}}(),this.processRequestsQueue=(0,m.Z)(function*(){if("ACTIVE"!==t.requestQueue.state){for(t.client.logger.info(`Request queue starting with ${t.requestQueue.queue.length} requests`);t.requestQueue.queue.length>0;){t.requestQueue.state="ACTIVE";const o=t.requestQueue.queue.shift();if(o)try{t.processRequest(o),yield new Promise(a=>setTimeout(a,300))}catch(a){t.client.logger.warn(a)}}t.requestQueue.state="IDLE"}else t.client.logger.info("Request queue already active, skipping...")}),this.processRequest=o=>{const{topic:a,payload:u}=o,f=u.method;switch(f){case"wc_sessionPropose":return this.onSessionProposeRequest(a,u);case"wc_sessionSettle":return this.onSessionSettleRequest(a,u);case"wc_sessionUpdate":return this.onSessionUpdateRequest(a,u);case"wc_sessionExtend":return this.onSessionExtendRequest(a,u);case"wc_sessionPing":return this.onSessionPingRequest(a,u);case"wc_sessionDelete":return this.onSessionDeleteRequest(a,u);case"wc_sessionRequest":return this.onSessionRequest(a,u);case"wc_sessionEvent":return this.onSessionEventRequest(a,u);default:return this.client.logger.info(`Unsupported request method ${f}`)}},this.onRelayEventResponse=function(){var o=(0,m.Z)(function*(a){const{topic:u,payload:f}=a,P=(yield t.client.core.history.get(u,f.id)).request.method;switch(P){case"wc_sessionPropose":return t.onSessionProposeResponse(u,f);case"wc_sessionSettle":return t.onSessionSettleResponse(u,f);case"wc_sessionUpdate":return t.onSessionUpdateResponse(u,f);case"wc_sessionExtend":return t.onSessionExtendResponse(u,f);case"wc_sessionPing":return t.onSessionPingResponse(u,f);case"wc_sessionRequest":return t.onSessionRequestResponse(u,f);default:return t.client.logger.info(`Unsupported response method ${P}`)}});return function(a){return o.apply(this,arguments)}}(),this.onRelayEventUnknownPayload=o=>{const{topic:a}=o,{message:u}=(0,x.Z7)("MISSING_OR_INVALID",`Decoded payload on topic ${a} is not identifiable as a JSON-RPC request or a response.`);throw new Error(u)},this.onSessionProposeRequest=function(){var o=(0,m.Z)(function*(a,u){const{params:f,id:P}=u;try{t.isValidConnect(Rr({},u.params));const C=(0,x.gn)(D.FIVE_MINUTES),z=Rr({id:P,pairingTopic:a,expiry:C},f);yield t.setProposal(P,z);const W=(0,x.rj)(JSON.stringify(u)),pe=yield t.getVerifyContext(W,z.proposer.metadata);t.client.events.emit("session_proposal",{id:P,params:z,verifyContext:pe})}catch(C){yield t.sendError(P,a,C),t.client.logger.error(C)}});return function(a,u){return o.apply(this,arguments)}}(),this.onSessionProposeResponse=function(){var o=(0,m.Z)(function*(a,u){const{id:f}=u;if(en(u)){const{result:P}=u;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:P});const C=t.client.proposal.get(f);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:C});const z=C.proposer.publicKey;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:z});const W=P.responderPublicKey;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:W});const pe=yield t.client.core.crypto.generateSharedKey(z,W);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:pe});const Oe=yield t.client.core.relayer.subscribe(pe);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:Oe}),yield t.client.core.pairing.activate({topic:a})}else Nr(u)&&(yield t.client.proposal.delete(f,(0,x.D6)("USER_DISCONNECTED")),t.events.emit((0,x.E0)("session_connect"),{error:u.error}))});return function(a,u){return o.apply(this,arguments)}}(),this.onSessionSettleRequest=function(){var o=(0,m.Z)(function*(a,u){const{id:f,params:P}=u;try{t.isValidSessionSettleRequest(P);const{relay:C,controller:z,expiry:W,namespaces:pe,requiredNamespaces:Oe,optionalNamespaces:Fe,sessionProperties:we,pairingTopic:Ve}=u.params,Qe=Rr({topic:a,relay:C,expiry:W,namespaces:pe,acknowledged:!0,pairingTopic:Ve,requiredNamespaces:Oe,optionalNamespaces:Fe,controller:z.publicKey,self:{publicKey:"",metadata:t.client.metadata},peer:{publicKey:z.publicKey,metadata:z.metadata}},we&&{sessionProperties:we});yield t.sendResult({id:u.id,topic:a,result:!0}),t.events.emit((0,x.E0)("session_connect"),{session:Qe}),t.cleanupDuplicatePairings(Qe)}catch(C){yield t.sendError(f,a,C),t.client.logger.error(C)}});return function(a,u){return o.apply(this,arguments)}}(),this.onSessionSettleResponse=function(){var o=(0,m.Z)(function*(a,u){const{id:f}=u;en(u)?(yield t.client.session.update(a,{acknowledged:!0}),t.events.emit((0,x.E0)("session_approve",f),{})):Nr(u)&&(yield t.client.session.delete(a,(0,x.D6)("USER_DISCONNECTED")),t.events.emit((0,x.E0)("session_approve",f),{error:u.error}))});return function(a,u){return o.apply(this,arguments)}}(),this.onSessionUpdateRequest=function(){var o=(0,m.Z)(function*(a,u){const{params:f,id:P}=u;try{const C=`${a}_session_update`,z=x.O6.get(C);if(z&&t.isRequestOutOfSync(z,P))return void t.client.logger.info(`Discarding out of sync request - ${P}`);t.isValidUpdate(Rr({topic:a},f)),yield t.client.session.update(a,{namespaces:f.namespaces}),yield t.sendResult({id:P,topic:a,result:!0}),t.client.events.emit("session_update",{id:P,topic:a,params:f}),x.O6.set(C,P)}catch(C){yield t.sendError(P,a,C),t.client.logger.error(C)}});return function(a,u){return o.apply(this,arguments)}}(),this.isRequestOutOfSync=(o,a)=>parseInt(a.toString().slice(0,-3))<=parseInt(o.toString().slice(0,-3)),this.onSessionUpdateResponse=(o,a)=>{const{id:u}=a;en(a)?this.events.emit((0,x.E0)("session_update",u),{}):Nr(a)&&this.events.emit((0,x.E0)("session_update",u),{error:a.error})},this.onSessionExtendRequest=function(){var o=(0,m.Z)(function*(a,u){const{id:f}=u;try{t.isValidExtend({topic:a}),yield t.setExpiry(a,(0,x.gn)(Cs)),yield t.sendResult({id:f,topic:a,result:!0}),t.client.events.emit("session_extend",{id:f,topic:a})}catch(P){yield t.sendError(f,a,P),t.client.logger.error(P)}});return function(a,u){return o.apply(this,arguments)}}(),this.onSessionExtendResponse=(o,a)=>{const{id:u}=a;en(a)?this.events.emit((0,x.E0)("session_extend",u),{}):Nr(a)&&this.events.emit((0,x.E0)("session_extend",u),{error:a.error})},this.onSessionPingRequest=function(){var o=(0,m.Z)(function*(a,u){const{id:f}=u;try{t.isValidPing({topic:a}),yield t.sendResult({id:f,topic:a,result:!0}),t.client.events.emit("session_ping",{id:f,topic:a})}catch(P){yield t.sendError(f,a,P),t.client.logger.error(P)}});return function(a,u){return o.apply(this,arguments)}}(),this.onSessionPingResponse=(o,a)=>{const{id:u}=a;setTimeout(()=>{en(a)?this.events.emit((0,x.E0)("session_ping",u),{}):Nr(a)&&this.events.emit((0,x.E0)("session_ping",u),{error:a.error})},500)},this.onSessionDeleteRequest=function(){var o=(0,m.Z)(function*(a,u){const{id:f}=u;try{t.isValidDisconnect({topic:a,reason:u.params}),yield Promise.all([new Promise(P=>{t.client.core.relayer.once("relayer_publish",(0,m.Z)(function*(){P(yield t.deleteSession(a))}))}),t.sendResult({id:f,topic:a,result:!0})]),t.client.events.emit("session_delete",{id:f,topic:a})}catch(P){t.client.logger.error(P)}});return function(a,u){return o.apply(this,arguments)}}(),this.onSessionRequest=function(){var o=(0,m.Z)(function*(a,u){const{id:f,params:P}=u;try{t.isValidRequest(Rr({topic:a},P));const C=(0,x.rj)(JSON.stringify(mt("wc_sessionRequest",P,f))),z=t.client.session.get(a),pe={id:f,topic:a,params:P,verifyContext:yield t.getVerifyContext(C,z.peer.metadata)};yield t.setPendingSessionRequest(pe),t.addSessionRequestToSessionRequestQueue(pe),t.processSessionRequestQueue()}catch(C){yield t.sendError(f,a,C),t.client.logger.error(C)}});return function(a,u){return o.apply(this,arguments)}}(),this.onSessionRequestResponse=(o,a)=>{const{id:u}=a;en(a)?this.events.emit((0,x.E0)("session_request",u),{result:a.result}):Nr(a)&&this.events.emit((0,x.E0)("session_request",u),{error:a.error})},this.onSessionEventRequest=function(){var o=(0,m.Z)(function*(a,u){const{id:f,params:P}=u;try{const C=`${a}_session_event_${P.event.name}`,z=x.O6.get(C);if(z&&t.isRequestOutOfSync(z,f))return void t.client.logger.info(`Discarding out of sync request - ${f}`);t.isValidEmit(Rr({topic:a},P)),t.client.events.emit("session_event",{id:f,topic:a,params:P}),x.O6.set(C,f)}catch(C){yield t.sendError(f,a,C),t.client.logger.error(C)}});return function(a,u){return o.apply(this,arguments)}}(),this.addSessionRequestToSessionRequestQueue=o=>{this.sessionRequestQueue.queue.push(o)},this.cleanupAfterResponse=o=>{this.deletePendingSessionRequest(o.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state="IDLE",this.processSessionRequestQueue()},(0,D.toMiliseconds)(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if("ACTIVE"===this.sessionRequestQueue.state)return void this.client.logger.info("session request queue is already active.");const o=this.sessionRequestQueue.queue[0];if(o)try{this.sessionRequestQueue.state="ACTIVE",this.client.events.emit("session_request",o)}catch(a){this.client.logger.error(a)}else this.client.logger.info("session request queue is empty.")},this.onPairingCreated=o=>{if(o.active)return;const a=this.client.proposal.getAll().find(u=>u.pairingTopic===o.topic);a&&this.onSessionProposeRequest(o.topic,mt("wc_sessionPropose",{requiredNamespaces:a.requiredNamespaces,optionalNamespaces:a.optionalNamespaces,relays:a.relays,proposer:a.proposer},a.id))},this.isValidConnect=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(a)}`);throw new Error(W)}const{pairingTopic:u,requiredNamespaces:f,optionalNamespaces:P,sessionProperties:C,relays:z}=a;if((0,x.o8)(u)||(yield t.isValidPairingTopic(u)),!(0,x.PM)(z,!0)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID",`connect() relays: ${z}`);throw new Error(W)}!(0,x.o8)(f)&&0!==(0,x.L5)(f)&&t.validateNamespaces(f,"requiredNamespaces"),!(0,x.o8)(P)&&0!==(0,x.L5)(P)&&t.validateNamespaces(P,"optionalNamespaces"),(0,x.o8)(C)||t.validateSessionProps(C,"sessionProperties")});return function(a){return o.apply(this,arguments)}}(),this.validateNamespaces=(o,a)=>{const u=(0,x.n)(o,"connect()",a);if(u)throw new Error(u.message)},this.isValidApprove=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a))throw new Error((0,x.Z7)("MISSING_OR_INVALID",`approve() params: ${a}`).message);const{id:u,namespaces:f,relayProtocol:P,sessionProperties:C}=a;yield t.isValidProposalId(u);const z=t.client.proposal.get(u),W=(0,x.in)(f,"approve()");if(W)throw new Error(W.message);const pe=(0,x.rF)(z.requiredNamespaces,f,"approve()");if(pe)throw new Error(pe.message);if(!(0,x.M_)(P,!0)){const{message:Oe}=(0,x.Z7)("MISSING_OR_INVALID",`approve() relayProtocol: ${P}`);throw new Error(Oe)}(0,x.o8)(C)||t.validateSessionProps(C,"sessionProperties")});return function(a){return o.apply(this,arguments)}}(),this.isValidReject=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a)){const{message:P}=(0,x.Z7)("MISSING_OR_INVALID",`reject() params: ${a}`);throw new Error(P)}const{id:u,reason:f}=a;if(yield t.isValidProposalId(u),!(0,x.$t)(f)){const{message:P}=(0,x.Z7)("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(f)}`);throw new Error(P)}});return function(a){return o.apply(this,arguments)}}(),this.isValidSessionSettleRequest=o=>{if(!(0,x.EJ)(o)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${o}`);throw new Error(W)}const{relay:a,controller:u,namespaces:f,expiry:P}=o;if(!(0,x.Z2)(a)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(W)}const C=(0,x.Dd)(u,"onSessionSettleRequest()");if(C)throw new Error(C.message);const z=(0,x.in)(f,"onSessionSettleRequest()");if(z)throw new Error(z.message);if((0,x.Bw)(P)){const{message:W}=(0,x.Z7)("EXPIRED","onSessionSettleRequest()");throw new Error(W)}},this.isValidUpdate=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID",`update() params: ${a}`);throw new Error(W)}const{topic:u,namespaces:f}=a;yield t.isValidSessionTopic(u);const P=t.client.session.get(u),C=(0,x.in)(f,"update()");if(C)throw new Error(C.message);const z=(0,x.rF)(P.requiredNamespaces,f,"update()");if(z)throw new Error(z.message)});return function(a){return o.apply(this,arguments)}}(),this.isValidExtend=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a)){const{message:f}=(0,x.Z7)("MISSING_OR_INVALID",`extend() params: ${a}`);throw new Error(f)}const{topic:u}=a;yield t.isValidSessionTopic(u)});return function(a){return o.apply(this,arguments)}}(),this.isValidRequest=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID",`request() params: ${a}`);throw new Error(W)}const{topic:u,request:f,chainId:P,expiry:C}=a;yield t.isValidSessionTopic(u);const{namespaces:z}=t.client.session.get(u);if(!(0,x.p8)(z,P)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID",`request() chainId: ${P}`);throw new Error(W)}if(!(0,x.hH)(f)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID",`request() ${JSON.stringify(f)}`);throw new Error(W)}if(!(0,x.al)(z,P,f.method)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID",`request() method: ${f.method}`);throw new Error(W)}if(C&&!(0,x.ON)(C,ua)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID",`request() expiry: ${C}. Expiry must be a number (in seconds) between ${ua.min} and ${ua.max}`);throw new Error(W)}});return function(a){return o.apply(this,arguments)}}(),this.isValidRespond=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a)){const{message:P}=(0,x.Z7)("MISSING_OR_INVALID",`respond() params: ${a}`);throw new Error(P)}const{topic:u,response:f}=a;if(yield t.isValidSessionTopic(u),!(0,x.JT)(f)){const{message:P}=(0,x.Z7)("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(f)}`);throw new Error(P)}});return function(a){return o.apply(this,arguments)}}(),this.isValidPing=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a)){const{message:f}=(0,x.Z7)("MISSING_OR_INVALID",`ping() params: ${a}`);throw new Error(f)}const{topic:u}=a;yield t.isValidSessionOrPairingTopic(u)});return function(a){return o.apply(this,arguments)}}(),this.isValidEmit=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a)){const{message:z}=(0,x.Z7)("MISSING_OR_INVALID",`emit() params: ${a}`);throw new Error(z)}const{topic:u,event:f,chainId:P}=a;yield t.isValidSessionTopic(u);const{namespaces:C}=t.client.session.get(u);if(!(0,x.p8)(C,P)){const{message:z}=(0,x.Z7)("MISSING_OR_INVALID",`emit() chainId: ${P}`);throw new Error(z)}if(!(0,x.nf)(f)){const{message:z}=(0,x.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(f)}`);throw new Error(z)}if(!(0,x.sI)(C,P,f.name)){const{message:z}=(0,x.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(f)}`);throw new Error(z)}});return function(a){return o.apply(this,arguments)}}(),this.isValidDisconnect=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a)){const{message:f}=(0,x.Z7)("MISSING_OR_INVALID",`disconnect() params: ${a}`);throw new Error(f)}const{topic:u}=a;yield t.isValidSessionOrPairingTopic(u)});return function(a){return o.apply(this,arguments)}}(),this.getVerifyContext=function(){var o=(0,m.Z)(function*(a,u){const f={verified:{verifyUrl:u.verifyUrl||As,validation:"UNKNOWN",origin:u.url||""}};try{const P=yield t.client.core.verify.resolve({attestationId:a,verifyUrl:u.verifyUrl});P&&(f.verified.origin=P.origin,f.verified.isScam=P.isScam,f.verified.validation=P.origin===new URL(u.url).origin?"VALID":"INVALID")}catch(P){t.client.logger.info(P)}return t.client.logger.info(`Verify context: ${JSON.stringify(f)}`),f});return function(a,u){return o.apply(this,arguments)}}(),this.validateSessionProps=(o,a)=>{Object.values(o).forEach(u=>{if(!(0,x.M_)(u,!1)){const{message:f}=(0,x.Z7)("MISSING_OR_INVALID",`${a} must be in Record<string, string> format. Received: ${JSON.stringify(u)}`);throw new Error(f)}})}}isInitialized(){var n=this;return(0,m.Z)(function*(){if(!n.initialized){const{message:t}=(0,x.Z7)("NOT_INITIALIZED",n.name);throw new Error(t)}yield n.client.core.relayer.confirmOnlineStateOrThrow()})()}registerRelayerEvents(){var n=this;this.client.core.relayer.on("relayer_message",function(){var t=(0,m.Z)(function*(o){const{topic:a,message:u}=o;if(n.ignoredPayloadTypes.includes(n.client.core.crypto.getPayloadType(u)))return;const f=yield n.client.core.crypto.decode(a,u);try{ji(f)?(n.client.core.history.set(a,f),n.onRelayEventRequest({topic:a,payload:f})):pi(f)?(yield n.client.core.history.resolve(f),yield n.onRelayEventResponse({topic:a,payload:f}),n.client.core.history.delete(a,f.id)):n.onRelayEventUnknownPayload({topic:a,payload:f})}catch(P){n.client.logger.error(P)}});return function(o){return t.apply(this,arguments)}}())}registerExpirerEvents(){var n=this;this.client.core.expirer.on($r_expired,function(){var t=(0,m.Z)(function*(o){const{topic:a,id:u}=(0,x.iP)(o.target);if(u&&n.client.pendingRequest.keys.includes(u))return yield n.deletePendingSessionRequest(u,(0,x.Z7)("EXPIRED"),!0);a?n.client.session.keys.includes(a)&&(yield n.deleteSession(a,!0),n.client.events.emit("session_expire",{topic:a})):u&&(yield n.deleteProposal(u,!0),n.client.events.emit("proposal_expire",{id:u}))});return function(o){return t.apply(this,arguments)}}())}registerPairingEvents(){this.client.core.pairing.events.on("pairing_create",n=>this.onPairingCreated(n))}isValidPairingTopic(n){if(!(0,x.M_)(n,!1)){const{message:t}=(0,x.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(n)){const{message:t}=(0,x.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(t)}if((0,x.Bw)(this.client.core.pairing.pairings.get(n).expiry)){const{message:t}=(0,x.Z7)("EXPIRED",`pairing topic: ${n}`);throw new Error(t)}}isValidSessionTopic(n){var t=this;return(0,m.Z)(function*(){if(!(0,x.M_)(n,!1)){const{message:o}=(0,x.Z7)("MISSING_OR_INVALID",`session topic should be a string: ${n}`);throw new Error(o)}if(!t.client.session.keys.includes(n)){const{message:o}=(0,x.Z7)("NO_MATCHING_KEY",`session topic doesn't exist: ${n}`);throw new Error(o)}if((0,x.Bw)(t.client.session.get(n).expiry)){yield t.deleteSession(n);const{message:o}=(0,x.Z7)("EXPIRED",`session topic: ${n}`);throw new Error(o)}})()}isValidSessionOrPairingTopic(n){var t=this;return(0,m.Z)(function*(){if(t.client.session.keys.includes(n))yield t.isValidSessionTopic(n);else{if(!t.client.core.pairing.pairings.keys.includes(n)){if((0,x.M_)(n,!1)){const{message:o}=(0,x.Z7)("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${n}`);throw new Error(o)}{const{message:o}=(0,x.Z7)("MISSING_OR_INVALID",`session or pairing topic should be a string: ${n}`);throw new Error(o)}}t.isValidPairingTopic(n)}})()}isValidProposalId(n){var t=this;return(0,m.Z)(function*(){if(!(0,x.Q0)(n)){const{message:o}=(0,x.Z7)("MISSING_OR_INVALID",`proposal id should be a number: ${n}`);throw new Error(o)}if(!t.client.proposal.keys.includes(n)){const{message:o}=(0,x.Z7)("NO_MATCHING_KEY",`proposal id doesn't exist: ${n}`);throw new Error(o)}if((0,x.Bw)(t.client.proposal.get(n).expiry)){yield t.deleteProposal(n);const{message:o}=(0,x.Z7)("EXPIRED",`proposal id: ${n}`);throw new Error(o)}})()}}class ap extends Ts{constructor(n,t){super(n,t,"proposal",aa),this.core=n,this.logger=t}}class cp extends Ts{constructor(n,t){super(n,t,"session",aa),this.core=n,this.logger=t}}class up extends Ts{constructor(n,t){super(n,t,"request",aa,o=>o.id),this.core=n,this.logger=t}}class la extends q{constructor(n){var t;super(n),t=this,this.protocol="wc",this.version=2,this.name="client",this.events=new ae.EventEmitter,this.on=(a,u)=>this.events.on(a,u),this.once=(a,u)=>this.events.once(a,u),this.off=(a,u)=>this.events.off(a,u),this.removeListener=(a,u)=>this.events.removeListener(a,u),this.removeAllListeners=a=>this.events.removeAllListeners(a),this.connect=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.connect(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.pair=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.pair(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.approve=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.approve(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.reject=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.reject(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.update=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.update(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.extend=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.extend(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.request=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.request(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.respond=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.respond(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.ping=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.ping(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.emit=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.emit(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.disconnect=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.disconnect(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.find=a=>{try{return this.engine.find(a)}catch(u){throw this.logger.error(u.message),u}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(a){throw this.logger.error(a.message),a}},this.name=n?.name||"client",this.metadata=n?.metadata||(0,x.D)();const o=typeof n?.logger<"u"&&"string"!=typeof n?.logger?n.logger:(0,he.pino)((0,he.getDefaultLoggerOptions)({level:n?.logger||"error"}));this.core=n?.core||new Wd(n),this.logger=(0,he.generateChildLogger)(o,this.name),this.session=new cp(this.core,this.logger),this.proposal=new ap(this.core,this.logger),this.pendingRequest=new up(this.core,this.logger),this.engine=new op(this)}static init(n){return(0,m.Z)(function*(){const t=new la(n);return yield t.initialize(),t})()}get context(){return(0,he.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}initialize(){var n=this;return(0,m.Z)(function*(){n.logger.trace("Initialized");try{yield n.core.start(),yield n.session.init(),yield n.proposal.init(),yield n.pendingRequest.init(),yield n.engine.init(),n.core.verify.init({verifyUrl:n.metadata.verifyUrl}),n.logger.info("SignClient Initialization Success")}catch(t){throw n.logger.info("SignClient Initialization Failure"),n.logger.error(t.message),t}})()}}var lp=G(2055),Pu=G.n(lp);const Su={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class Ru{constructor(n,t=!1){if(this.url=n,this.disableProviderPing=t,this.events=new ae.EventEmitter,this.isAvailable=!1,this.registering=!1,!ps(n))throw new Error(`Provided URL is not compatible with HTTP connection: ${n}`);this.url=n,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(n,t){this.events.on(n,t)}once(n,t){this.events.once(n,t)}off(n,t){this.events.off(n,t)}removeListener(n,t){this.events.removeListener(n,t)}open(n=this.url){var t=this;return(0,m.Z)(function*(){yield t.register(n)})()}close(){var n=this;return(0,m.Z)(function*(){if(!n.isAvailable)throw new Error("Connection already closed");n.onClose()})()}send(n,t){var o=this;return(0,m.Z)(function*(){o.isAvailable||(yield o.register());try{const a=_(n),f=yield(yield Pu()(o.url,Object.assign(Object.assign({},Su),{body:a}))).json();o.onPayload({data:f})}catch(a){o.onError(n.id,a)}})()}register(n=this.url){var t=this;return(0,m.Z)(function*(){if(!ps(n))throw new Error(`Provided URL is not compatible with HTTP connection: ${n}`);if(t.registering){const o=t.events.getMaxListeners();return(t.events.listenerCount("register_error")>=o||t.events.listenerCount("open")>=o)&&t.events.setMaxListeners(o+1),new Promise((a,u)=>{t.events.once("register_error",f=>{t.resetMaxListeners(),u(f)}),t.events.once("open",()=>{if(t.resetMaxListeners(),typeof t.isAvailable>"u")return u(new Error("HTTP connection is missing or invalid"));a()})})}t.url=n,t.registering=!0;try{if(!t.disableProviderPing){const o=_({id:1,jsonrpc:"2.0",method:"test",params:[]});yield Pu()(n,Object.assign(Object.assign({},Su),{body:o}))}t.onOpen()}catch(o){const a=t.parseError(o);throw t.events.emit("register_error",a),t.onClose(),a}})()}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(n){if(typeof n.data>"u")return;const t="string"==typeof n.data?S(n.data):n.data;this.events.emit("payload",t)}onError(n,t){const o=this.parseError(t),u=bt(n,o.message||o.toString());this.events.emit("payload",u)}parseError(n,t=this.url){return _t(n,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}const ri=Ru,Tu="wc@2:universal_provider:";var y,n,Hi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fa={exports:{}};y=fa,n=fa.exports,function(){var t,f="Expected a function",C="__lodash_hash_undefined__",W="__lodash_placeholder__",ii=1/0,Un=9007199254740991,_n=4294967295,sg=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],mi="[object Arguments]",qs="[object Array]",Vi="[object Boolean]",ki="[object Date]",zs="[object Error]",Us="[object Function]",Bu="[object GeneratorFunction]",nn="[object Map]",Ki="[object Number]",On="[object Object]",Vu="[object Promise]",Gi="[object RegExp]",sn="[object Set]",Wi="[object String]",$s="[object Symbol]",Ji="[object WeakMap]",Qi="[object ArrayBuffer]",bi="[object DataView]",va="[object Float32Array]",_a="[object Float64Array]",ma="[object Int8Array]",ba="[object Int16Array]",wa="[object Int32Array]",xa="[object Uint8Array]",Ea="[object Uint8ClampedArray]",Ia="[object Uint16Array]",Pa="[object Uint32Array]",hg=/\b__p \+= '';/g,dg=/\b(__p \+=) '' \+/g,pg=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ku=/&(?:amp|lt|gt|quot|#39);/g,Ku=/[&<>"']/g,gg=RegExp(ku.source),yg=RegExp(Ku.source),vg=/<%-([\s\S]+?)%>/g,_g=/<%([\s\S]+?)%>/g,Gu=/<%=([\s\S]+?)%>/g,mg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bg=/^\w*$/,wg=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sa=/[\\^$.*+?()[\]{}|]/g,xg=RegExp(Sa.source),Oa=/^\s+/,Eg=/\s/,Ig=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pg=/\{\n\/\* \[wrapped with (.+)\] \*/,Sg=/,? & /,Og=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Rg=/[()=,{}\[\]\/\s]/,Ag=/\\(\\)?/g,Tg=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wu=/\w*$/,Cg=/^[-+]0x[0-9a-f]+$/i,Dg=/^0b[01]+$/i,Ng=/^\[object .+?Constructor\]$/,Lg=/^0o[0-7]+$/i,jg=/^(?:0|[1-9]\d*)$/,Fg=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hs=/($^)/,Mg=/['\n\r\u2028\u2029\\]/g,Bs="\\ud800-\\udfff",Ju="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qu="\\u2700-\\u27bf",Yu="a-z\\xdf-\\xf6\\xf8-\\xff",Xu="A-Z\\xc0-\\xd6\\xd8-\\xde",el="\\ufe0e\\ufe0f",tl="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vg="["+Bs+"]",rl="["+tl+"]",Vs="["+Ju+"]",nl="\\d+",kg="["+Qu+"]",il="["+Yu+"]",sl="[^"+Bs+tl+nl+Qu+Yu+Xu+"]",Aa="\\ud83c[\\udffb-\\udfff]",ol="[^"+Bs+"]",Ta="(?:\\ud83c[\\udde6-\\uddff]){2}",Ca="[\\ud800-\\udbff][\\udc00-\\udfff]",wi="["+Xu+"]",cl="(?:"+il+"|"+sl+")",Gg="(?:"+wi+"|"+sl+")",ul="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",ll="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",fl="(?:"+Vs+"|"+Aa+")?",hl="["+el+"]?",dl=hl+fl+"(?:\\u200d(?:"+[ol,Ta,Ca].join("|")+")"+hl+fl+")*",Yg="(?:"+[kg,Ta,Ca].join("|")+")"+dl,Xg="(?:"+[ol+Vs+"?",Vs,Ta,Ca,Vg].join("|")+")",ey=RegExp("['\u2019]","g"),ty=RegExp(Vs,"g"),Da=RegExp(Aa+"(?="+Aa+")|"+Xg+dl,"g"),ry=RegExp([wi+"?"+il+"+"+ul+"(?="+[rl,wi,"$"].join("|")+")",Gg+"+"+ll+"(?="+[rl,wi+cl,"$"].join("|")+")",wi+"?"+cl+"+"+ul,wi+"+"+ll,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",nl,Yg].join("|"),"g"),ny=RegExp("[\\u200d"+Bs+Ju+el+"]"),iy=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,sy=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],oy=-1,Et={};Et[va]=Et[_a]=Et[ma]=Et[ba]=Et[wa]=Et[xa]=Et[Ea]=Et[Ia]=Et[Pa]=!0,Et[mi]=Et[qs]=Et[Qi]=Et[Vi]=Et[bi]=Et[ki]=Et[zs]=Et[Us]=Et[nn]=Et[Ki]=Et[On]=Et[Gi]=Et[sn]=Et[Wi]=Et[Ji]=!1;var vt={};vt[mi]=vt[qs]=vt[Qi]=vt[bi]=vt[Vi]=vt[ki]=vt[va]=vt[_a]=vt[ma]=vt[ba]=vt[wa]=vt[nn]=vt[Ki]=vt[On]=vt[Gi]=vt[sn]=vt[Wi]=vt[$s]=vt[xa]=vt[Ea]=vt[Ia]=vt[Pa]=!0,vt[zs]=vt[Us]=vt[Ji]=!1;var ly={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},fy=parseFloat,hy=parseInt,pl="object"==typeof Hi&&Hi&&Hi.Object===Object&&Hi,dy="object"==typeof self&&self&&self.Object===Object&&self,hr=pl||dy||Function("return this")(),Na=n&&!n.nodeType&&n,si=Na&&y&&!y.nodeType&&y,gl=si&&si.exports===Na,La=gl&&pl.process,Hr=function(){try{return si&&si.require&&si.require("util").types||La&&La.binding&&La.binding("util")}catch{}}(),yl=Hr&&Hr.isArrayBuffer,vl=Hr&&Hr.isDate,_l=Hr&&Hr.isMap,ml=Hr&&Hr.isRegExp,bl=Hr&&Hr.isSet,wl=Hr&&Hr.isTypedArray;function jr(F,K,H){switch(H.length){case 0:return F.call(K);case 1:return F.call(K,H[0]);case 2:return F.call(K,H[0],H[1]);case 3:return F.call(K,H[0],H[1],H[2])}return F.apply(K,H)}function py(F,K,H,be){for(var Ze=-1,tt=null==F?0:F.length;++Ze<tt;){var tr=F[Ze];K(be,tr,H(tr),F)}return be}function Br(F,K){for(var H=-1,be=null==F?0:F.length;++H<be&&!1!==K(F[H],H,F););return F}function gy(F,K){for(var H=null==F?0:F.length;H--&&!1!==K(F[H],H,F););return F}function xl(F,K){for(var H=-1,be=null==F?0:F.length;++H<be;)if(!K(F[H],H,F))return!1;return!0}function $n(F,K){for(var H=-1,be=null==F?0:F.length,Ze=0,tt=[];++H<be;){var tr=F[H];K(tr,H,F)&&(tt[Ze++]=tr)}return tt}function ks(F,K){return!(null==F||!F.length)&&xi(F,K,0)>-1}function ja(F,K,H){for(var be=-1,Ze=null==F?0:F.length;++be<Ze;)if(H(K,F[be]))return!0;return!1}function St(F,K){for(var H=-1,be=null==F?0:F.length,Ze=Array(be);++H<be;)Ze[H]=K(F[H],H,F);return Ze}function Hn(F,K){for(var H=-1,be=K.length,Ze=F.length;++H<be;)F[Ze+H]=K[H];return F}function Fa(F,K,H,be){var Ze=-1,tt=null==F?0:F.length;for(be&&tt&&(H=F[++Ze]);++Ze<tt;)H=K(H,F[Ze],Ze,F);return H}function yy(F,K,H,be){var Ze=null==F?0:F.length;for(be&&Ze&&(H=F[--Ze]);Ze--;)H=K(H,F[Ze],Ze,F);return H}function Ma(F,K){for(var H=-1,be=null==F?0:F.length;++H<be;)if(K(F[H],H,F))return!0;return!1}var vy=Za("length");function El(F,K,H){var be;return H(F,function(Ze,tt,tr){if(K(Ze,tt,tr))return be=tt,!1}),be}function Ks(F,K,H,be){for(var Ze=F.length,tt=H+(be?1:-1);be?tt--:++tt<Ze;)if(K(F[tt],tt,F))return tt;return-1}function xi(F,K,H){return K==K?function Cy(F,K,H){for(var be=H-1,Ze=F.length;++be<Ze;)if(F[be]===K)return be;return-1}(F,K,H):Ks(F,Il,H)}function by(F,K,H,be){for(var Ze=H-1,tt=F.length;++Ze<tt;)if(be(F[Ze],K))return Ze;return-1}function Il(F){return F!=F}function Pl(F,K){var H=null==F?0:F.length;return H?za(F,K)/H:NaN}function Za(F){return function(K){return null==K?t:K[F]}}function qa(F){return function(K){return null==F?t:F[K]}}function Sl(F,K,H,be,Ze){return Ze(F,function(tt,tr,ht){H=be?(be=!1,tt):K(H,tt,tr,ht)}),H}function za(F,K){for(var H,be=-1,Ze=F.length;++be<Ze;){var tt=K(F[be]);tt!==t&&(H=H===t?tt:H+tt)}return H}function Ua(F,K){for(var H=-1,be=Array(F);++H<F;)be[H]=K(H);return be}function Ol(F){return F&&F.slice(0,Cl(F)+1).replace(Oa,"")}function Fr(F){return function(K){return F(K)}}function $a(F,K){return St(K,function(H){return F[H]})}function Yi(F,K){return F.has(K)}function Rl(F,K){for(var H=-1,be=F.length;++H<be&&xi(K,F[H],0)>-1;);return H}function Al(F,K){for(var H=F.length;H--&&xi(K,F[H],0)>-1;);return H}var Iy=qa({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Py=qa({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Sy(F){return"\\"+ly[F]}function Ei(F){return ny.test(F)}function Ha(F){var K=-1,H=Array(F.size);return F.forEach(function(be,Ze){H[++K]=[Ze,be]}),H}function Tl(F,K){return function(H){return F(K(H))}}function Bn(F,K){for(var H=-1,be=F.length,Ze=0,tt=[];++H<be;){var tr=F[H];(tr===K||tr===W)&&(F[H]=W,tt[Ze++]=H)}return tt}function Gs(F){var K=-1,H=Array(F.size);return F.forEach(function(be){H[++K]=be}),H}function Ii(F){return Ei(F)?function Ly(F){for(var K=Da.lastIndex=0;Da.test(F);)++K;return K}(F):vy(F)}function on(F){return Ei(F)?function jy(F){return F.match(Da)||[]}(F):function _y(F){return F.split("")}(F)}function Cl(F){for(var K=F.length;K--&&Eg.test(F.charAt(K)););return K}var Ny=qa({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Pi=function F(K){var e,H=(K=null==K?hr:Pi.defaults(hr.Object(),K,Pi.pick(hr,sy))).Array,be=K.Date,Ze=K.Error,tt=K.Function,tr=K.Math,ht=K.Object,Ba=K.RegExp,Zy=K.String,Vr=K.TypeError,Ws=H.prototype,Si=ht.prototype,Js=K["__core-js_shared__"],Qs=tt.prototype.toString,st=Si.hasOwnProperty,zy=0,Dl=(e=/[^.]+$/.exec(Js&&Js.keys&&Js.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"",Ys=Si.toString,Uy=Qs.call(ht),$y=hr._,Hy=Ba("^"+Qs.call(st).replace(Sa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xs=gl?K.Buffer:t,Vn=K.Symbol,eo=K.Uint8Array,Nl=Xs?Xs.allocUnsafe:t,to=Tl(ht.getPrototypeOf,ht),Ll=ht.create,jl=Si.propertyIsEnumerable,ro=Ws.splice,Fl=Vn?Vn.isConcatSpreadable:t,Xi=Vn?Vn.iterator:t,oi=Vn?Vn.toStringTag:t,no=function(){try{var e=fi(ht,"defineProperty");return e({},"",{}),e}catch{}}(),By=K.clearTimeout!==hr.clearTimeout&&K.clearTimeout,Vy=be&&be.now!==hr.Date.now&&be.now,ky=K.setTimeout!==hr.setTimeout&&K.setTimeout,io=tr.ceil,so=tr.floor,Va=ht.getOwnPropertySymbols,Ky=Xs?Xs.isBuffer:t,Ml=K.isFinite,Gy=Ws.join,Wy=Tl(ht.keys,ht),rr=tr.max,_r=tr.min,Jy=be.now,Qy=K.parseInt,Zl=tr.random,Yy=Ws.reverse,ka=fi(K,"DataView"),es=fi(K,"Map"),Ka=fi(K,"Promise"),Oi=fi(K,"Set"),ts=fi(K,"WeakMap"),rs=fi(ht,"create"),oo=ts&&new ts,Ri={},Xy=hi(ka),e0=hi(es),t0=hi(Ka),r0=hi(Oi),n0=hi(ts),ao=Vn?Vn.prototype:t,ns=ao?ao.valueOf:t,ql=ao?ao.toString:t;function w(e){if(Lt(e)&&!ze(e)&&!(e instanceof We)){if(e instanceof kr)return e;if(st.call(e,"__wrapped__"))return Uf(e)}return new kr(e)}var Ai=function(){function e(){}return function(r){if(!Dt(r))return{};if(Ll)return Ll(r);e.prototype=r;var s=new e;return e.prototype=t,s}}();function co(){}function kr(e,r){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=t}function We(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_n,this.__views__=[]}function ai(e){var r=-1,s=null==e?0:e.length;for(this.clear();++r<s;){var l=e[r];this.set(l[0],l[1])}}function Rn(e){var r=-1,s=null==e?0:e.length;for(this.clear();++r<s;){var l=e[r];this.set(l[0],l[1])}}function An(e){var r=-1,s=null==e?0:e.length;for(this.clear();++r<s;){var l=e[r];this.set(l[0],l[1])}}function ci(e){var r=-1,s=null==e?0:e.length;for(this.__data__=new An;++r<s;)this.add(e[r])}function an(e){var r=this.__data__=new Rn(e);this.size=r.size}function zl(e,r){var s=ze(e),l=!s&&di(e),g=!s&&!l&&Jn(e),I=!s&&!l&&!g&&Ni(e),A=s||l||g||I,T=A?Ua(e.length,Zy):[],M=T.length;for(var Y in e)(r||st.call(e,Y))&&(!A||!("length"==Y||g&&("offset"==Y||"parent"==Y)||I&&("buffer"==Y||"byteLength"==Y||"byteOffset"==Y)||Nn(Y,M)))&&T.push(Y);return T}function Ul(e){var r=e.length;return r?e[ic(0,r-1)]:t}function A0(e,r){return Eo(Ar(e),ui(r,0,e.length))}function T0(e){return Eo(Ar(e))}function Ga(e,r,s){(s!==t&&!cn(e[r],s)||s===t&&!(r in e))&&Tn(e,r,s)}function is(e,r,s){var l=e[r];(!st.call(e,r)||!cn(l,s)||s===t&&!(r in e))&&Tn(e,r,s)}function uo(e,r){for(var s=e.length;s--;)if(cn(e[s][0],r))return s;return-1}function C0(e,r,s,l){return kn(e,function(g,I,A){r(l,g,s(g),A)}),l}function $l(e,r){return e&&bn(r,cr(r),e)}function Tn(e,r,s){"__proto__"==r&&no?no(e,r,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[r]=s}function Wa(e,r){for(var s=-1,l=r.length,g=H(l),I=null==e;++s<l;)g[s]=I?t:Ac(e,r[s]);return g}function ui(e,r,s){return e==e&&(s!==t&&(e=e<=s?e:s),r!==t&&(e=e>=r?e:r)),e}function Kr(e,r,s,l,g,I){var A,T=1&r,M=2&r,Y=4&r;if(s&&(A=g?s(e,l,g,I):s(e)),A!==t)return A;if(!Dt(e))return e;var ee=ze(e);if(ee){if(A=function bv(e){var r=e.length,s=new e.constructor(r);return r&&"string"==typeof e[0]&&st.call(e,"index")&&(s.index=e.index,s.input=e.input),s}(e),!T)return Ar(e,A)}else{var oe=mr(e),ye=oe==Us||oe==Bu;if(Jn(e))return df(e,T);if(oe==On||oe==mi||ye&&!g){if(A=M||ye?{}:Df(e),!T)return M?function uv(e,r){return bn(e,Tf(e),r)}(e,function D0(e,r){return e&&bn(r,Cr(r),e)}(A,e)):function cv(e,r){return bn(e,_c(e),r)}(e,$l(A,e))}else{if(!vt[oe])return g?e:{};A=function wv(e,r,s){var l=e.constructor;switch(r){case Qi:return fc(e);case Vi:case ki:return new l(+e);case bi:return function iv(e,r){var s=r?fc(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}(e,s);case va:case _a:case ma:case ba:case wa:case xa:case Ea:case Ia:case Pa:return pf(e,s);case nn:return new l;case Ki:case Wi:return new l(e);case Gi:return function sv(e){var r=new e.constructor(e.source,Wu.exec(e));return r.lastIndex=e.lastIndex,r}(e);case sn:return new l;case $s:return function ov(e){return ns?ht(ns.call(e)):{}}(e)}}(e,oe,T)}}I||(I=new an);var Ee=I.get(e);if(Ee)return Ee;I.set(e,A),ah(e)?e.forEach(function(Ce){A.add(Kr(Ce,r,s,Ce,e,I))}):sh(e)&&e.forEach(function(Ce,Ke){A.set(Ke,Kr(Ce,r,s,Ke,e,I))});var He=ee?t:(Y?M?gc:pc:M?Cr:cr)(e);return Br(He||e,function(Ce,Ke){He&&(Ce=e[Ke=Ce]),is(A,Ke,Kr(Ce,r,s,Ke,e,I))}),A}function Hl(e,r,s){var l=s.length;if(null==e)return!l;for(e=ht(e);l--;){var g=s[l],A=e[g];if(A===t&&!(g in e)||!(0,r[g])(A))return!1}return!0}function Bl(e,r,s){if("function"!=typeof e)throw new Vr(f);return fs(function(){e.apply(t,s)},r)}function ss(e,r,s,l){var g=-1,I=ks,A=!0,T=e.length,M=[],Y=r.length;if(!T)return M;s&&(r=St(r,Fr(s))),l?(I=ja,A=!1):r.length>=200&&(I=Yi,A=!1,r=new ci(r));e:for(;++g<T;){var ee=e[g],oe=null==s?ee:s(ee);if(ee=l||0!==ee?ee:0,A&&oe==oe){for(var ye=Y;ye--;)if(r[ye]===oe)continue e;M.push(ee)}else I(r,oe,l)||M.push(ee)}return M}w.templateSettings={escape:vg,evaluate:_g,interpolate:Gu,variable:"",imports:{_:w}},(w.prototype=co.prototype).constructor=w,(kr.prototype=Ai(co.prototype)).constructor=kr,(We.prototype=Ai(co.prototype)).constructor=We,ai.prototype.clear=function a0(){this.__data__=rs?rs(null):{},this.size=0},ai.prototype.delete=function c0(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r},ai.prototype.get=function u0(e){var r=this.__data__;if(rs){var s=r[e];return s===C?t:s}return st.call(r,e)?r[e]:t},ai.prototype.has=function l0(e){var r=this.__data__;return rs?r[e]!==t:st.call(r,e)},ai.prototype.set=function f0(e,r){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=rs&&r===t?C:r,this},Rn.prototype.clear=function h0(){this.__data__=[],this.size=0},Rn.prototype.delete=function d0(e){var r=this.__data__,s=uo(r,e);return!(s<0||(s==r.length-1?r.pop():ro.call(r,s,1),--this.size,0))},Rn.prototype.get=function p0(e){var r=this.__data__,s=uo(r,e);return s<0?t:r[s][1]},Rn.prototype.has=function g0(e){return uo(this.__data__,e)>-1},Rn.prototype.set=function y0(e,r){var s=this.__data__,l=uo(s,e);return l<0?(++this.size,s.push([e,r])):s[l][1]=r,this},An.prototype.clear=function v0(){this.size=0,this.__data__={hash:new ai,map:new(es||Rn),string:new ai}},An.prototype.delete=function _0(e){var r=xo(this,e).delete(e);return this.size-=r?1:0,r},An.prototype.get=function m0(e){return xo(this,e).get(e)},An.prototype.has=function b0(e){return xo(this,e).has(e)},An.prototype.set=function w0(e,r){var s=xo(this,e),l=s.size;return s.set(e,r),this.size+=s.size==l?0:1,this},ci.prototype.add=ci.prototype.push=function x0(e){return this.__data__.set(e,C),this},ci.prototype.has=function E0(e){return this.__data__.has(e)},an.prototype.clear=function I0(){this.__data__=new Rn,this.size=0},an.prototype.delete=function P0(e){var r=this.__data__,s=r.delete(e);return this.size=r.size,s},an.prototype.get=function S0(e){return this.__data__.get(e)},an.prototype.has=function O0(e){return this.__data__.has(e)},an.prototype.set=function R0(e,r){var s=this.__data__;if(s instanceof Rn){var l=s.__data__;if(!es||l.length<199)return l.push([e,r]),this.size=++s.size,this;s=this.__data__=new An(l)}return s.set(e,r),this.size=s.size,this};var kn=_f(mn),Vl=_f(Qa,!0);function L0(e,r){var s=!0;return kn(e,function(l,g,I){return s=!!r(l,g,I)}),s}function lo(e,r,s){for(var l=-1,g=e.length;++l<g;){var I=e[l],A=r(I);if(null!=A&&(T===t?A==A&&!Zr(A):s(A,T)))var T=A,M=I}return M}function kl(e,r){var s=[];return kn(e,function(l,g,I){r(l,g,I)&&s.push(l)}),s}function dr(e,r,s,l,g){var I=-1,A=e.length;for(s||(s=Ev),g||(g=[]);++I<A;){var T=e[I];r>0&&s(T)?r>1?dr(T,r-1,s,l,g):Hn(g,T):l||(g[g.length]=T)}return g}var Ja=mf(),Kl=mf(!0);function mn(e,r){return e&&Ja(e,r,cr)}function Qa(e,r){return e&&Kl(e,r,cr)}function fo(e,r){return $n(r,function(s){return Ln(e[s])})}function li(e,r){for(var s=0,l=(r=Gn(r,e)).length;null!=e&&s<l;)e=e[wn(r[s++])];return s&&s==l?e:t}function Gl(e,r,s){var l=r(e);return ze(e)?l:Hn(l,s(e))}function Er(e){return null==e?e===t?"[object Undefined]":"[object Null]":oi&&oi in ht(e)?function vv(e){var r=st.call(e,oi),s=e[oi];try{e[oi]=t;var l=!0}catch{}var g=Ys.call(e);return l&&(r?e[oi]=s:delete e[oi]),g}(e):function Tv(e){return Ys.call(e)}(e)}function Ya(e,r){return e>r}function F0(e,r){return null!=e&&st.call(e,r)}function M0(e,r){return null!=e&&r in ht(e)}function Xa(e,r,s){for(var l=s?ja:ks,g=e[0].length,I=e.length,A=I,T=H(I),M=1/0,Y=[];A--;){var ee=e[A];A&&r&&(ee=St(ee,Fr(r))),M=_r(ee.length,M),T[A]=!s&&(r||g>=120&&ee.length>=120)?new ci(A&&ee):t}ee=e[0];var oe=-1,ye=T[0];e:for(;++oe<g&&Y.length<M;){var Ee=ee[oe],Te=r?r(Ee):Ee;if(Ee=s||0!==Ee?Ee:0,!(ye?Yi(ye,Te):l(Y,Te,s))){for(A=I;--A;){var He=T[A];if(!(He?Yi(He,Te):l(e[A],Te,s)))continue e}ye&&ye.push(Te),Y.push(Ee)}}return Y}function os(e,r,s){var l=null==(e=Ff(e,r=Gn(r,e)))?e:e[wn(Wr(r))];return null==l?t:jr(l,e,s)}function Wl(e){return Lt(e)&&Er(e)==mi}function as(e,r,s,l,g){return e===r||(null==e||null==r||!Lt(e)&&!Lt(r)?e!=e&&r!=r:function $0(e,r,s,l,g,I){var A=ze(e),T=ze(r),M=A?qs:mr(e),Y=T?qs:mr(r),ee=(M=M==mi?On:M)==On,oe=(Y=Y==mi?On:Y)==On,ye=M==Y;if(ye&&Jn(e)){if(!Jn(r))return!1;A=!0,ee=!1}if(ye&&!ee)return I||(I=new an),A||Ni(e)?Af(e,r,s,l,g,I):function gv(e,r,s,l,g,I,A){switch(s){case bi:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Qi:return!(e.byteLength!=r.byteLength||!I(new eo(e),new eo(r)));case Vi:case ki:case Ki:return cn(+e,+r);case zs:return e.name==r.name&&e.message==r.message;case Gi:case Wi:return e==r+"";case nn:var T=Ha;case sn:if(T||(T=Gs),e.size!=r.size&&!(1&l))return!1;var Y=A.get(e);if(Y)return Y==r;l|=2,A.set(e,r);var ee=Af(T(e),T(r),l,g,I,A);return A.delete(e),ee;case $s:if(ns)return ns.call(e)==ns.call(r)}return!1}(e,r,M,s,l,g,I);if(!(1&s)){var Ee=ee&&st.call(e,"__wrapped__"),Te=oe&&st.call(r,"__wrapped__");if(Ee||Te){var He=Ee?e.value():e,Ce=Te?r.value():r;return I||(I=new an),g(He,Ce,s,l,I)}}return!!ye&&(I||(I=new an),function yv(e,r,s,l,g,I){var A=1&s,T=pc(e),M=T.length;if(M!=pc(r).length&&!A)return!1;for(var oe=M;oe--;){var ye=T[oe];if(!(A?ye in r:st.call(r,ye)))return!1}var Ee=I.get(e),Te=I.get(r);if(Ee&&Te)return Ee==r&&Te==e;var He=!0;I.set(e,r),I.set(r,e);for(var Ce=A;++oe<M;){var Ke=e[ye=T[oe]],Ye=r[ye];if(l)var qr=A?l(Ye,Ke,ye,r,e,I):l(Ke,Ye,ye,e,r,I);if(!(qr===t?Ke===Ye||g(Ke,Ye,s,l,I):qr)){He=!1;break}Ce||(Ce="constructor"==ye)}if(He&&!Ce){var Pr=e.constructor,zr=r.constructor;Pr!=zr&&"constructor"in e&&"constructor"in r&&!("function"==typeof Pr&&Pr instanceof Pr&&"function"==typeof zr&&zr instanceof zr)&&(He=!1)}return I.delete(e),I.delete(r),He}(e,r,s,l,g,I))}(e,r,s,l,as,g))}function ec(e,r,s,l){var g=s.length,I=g,A=!l;if(null==e)return!I;for(e=ht(e);g--;){var T=s[g];if(A&&T[2]?T[1]!==e[T[0]]:!(T[0]in e))return!1}for(;++g<I;){var M=(T=s[g])[0],Y=e[M],ee=T[1];if(A&&T[2]){if(Y===t&&!(M in e))return!1}else{var oe=new an;if(l)var ye=l(Y,ee,M,e,r,oe);if(!(ye===t?as(ee,Y,3,l,oe):ye))return!1}}return!0}function Jl(e){return!(!Dt(e)||function Pv(e){return!!Dl&&Dl in e}(e))&&(Ln(e)?Hy:Ng).test(hi(e))}function Ql(e){return"function"==typeof e?e:null==e?Dr:"object"==typeof e?ze(e)?ef(e[0],e[1]):Xl(e):bh(e)}function tc(e){if(!ls(e))return Wy(e);var r=[];for(var s in ht(e))st.call(e,s)&&"constructor"!=s&&r.push(s);return r}function rc(e,r){return e<r}function Yl(e,r){var s=-1,l=Tr(e)?H(e.length):[];return kn(e,function(g,I,A){l[++s]=r(g,I,A)}),l}function Xl(e){var r=vc(e);return 1==r.length&&r[0][2]?Lf(r[0][0],r[0][1]):function(s){return s===e||ec(s,e,r)}}function ef(e,r){return mc(e)&&Nf(r)?Lf(wn(e),r):function(s){var l=Ac(s,e);return l===t&&l===r?Tc(s,e):as(r,l,3)}}function ho(e,r,s,l,g){e!==r&&Ja(r,function(I,A){if(g||(g=new an),Dt(I))!function G0(e,r,s,l,g,I,A){var T=wc(e,s),M=wc(r,s),Y=A.get(M);if(Y)Ga(e,s,Y);else{var ee=I?I(T,M,s+"",e,r,A):t,oe=ee===t;if(oe){var ye=ze(M),Ee=!ye&&Jn(M),Te=!ye&&!Ee&&Ni(M);ee=M,ye||Ee||Te?ze(T)?ee=T:qt(T)?ee=Ar(T):Ee?(oe=!1,ee=df(M,!0)):Te?(oe=!1,ee=pf(M,!0)):ee=[]:hs(M)||di(M)?(ee=T,di(T)?ee=lh(T):(!Dt(T)||Ln(T))&&(ee=Df(M))):oe=!1}oe&&(A.set(M,ee),g(ee,M,l,I,A),A.delete(M)),Ga(e,s,ee)}}(e,r,A,s,ho,l,g);else{var T=l?l(wc(e,A),I,A+"",e,r,g):t;T===t&&(T=I),Ga(e,A,T)}},Cr)}function tf(e,r){var s=e.length;if(s)return Nn(r+=r<0?s:0,s)?e[r]:t}function rf(e,r,s){r=r.length?St(r,function(I){return ze(I)?function(A){return li(A,1===I.length?I[0]:I)}:I}):[Dr];var l=-1;return r=St(r,Fr(Ae())),function wy(F,K){var H=F.length;for(F.sort(K);H--;)F[H]=F[H].value;return F}(Yl(e,function(I,A,T){return{criteria:St(r,function(Y){return Y(I)}),index:++l,value:I}}),function(I,A){return function av(e,r,s){for(var l=-1,g=e.criteria,I=r.criteria,A=g.length,T=s.length;++l<A;){var M=gf(g[l],I[l]);if(M)return l>=T?M:M*("desc"==s[l]?-1:1)}return e.index-r.index}(I,A,s)})}function nf(e,r,s){for(var l=-1,g=r.length,I={};++l<g;){var A=r[l],T=li(e,A);s(T,A)&&cs(I,Gn(A,e),T)}return I}function nc(e,r,s,l){var g=l?by:xi,I=-1,A=r.length,T=e;for(e===r&&(r=Ar(r)),s&&(T=St(e,Fr(s)));++I<A;)for(var M=0,Y=r[I],ee=s?s(Y):Y;(M=g(T,ee,M,l))>-1;)T!==e&&ro.call(T,M,1),ro.call(e,M,1);return e}function sf(e,r){for(var s=e?r.length:0,l=s-1;s--;){var g=r[s];if(s==l||g!==I){var I=g;Nn(g)?ro.call(e,g,1):ac(e,g)}}return e}function ic(e,r){return e+so(Zl()*(r-e+1))}function sc(e,r){var s="";if(!e||r<1||r>Un)return s;do{r%2&&(s+=e),(r=so(r/2))&&(e+=e)}while(r);return s}function Be(e,r){return xc(jf(e,r,Dr),e+"")}function Y0(e){return Ul(Li(e))}function X0(e,r){var s=Li(e);return Eo(s,ui(r,0,s.length))}function cs(e,r,s,l){if(!Dt(e))return e;for(var g=-1,I=(r=Gn(r,e)).length,A=I-1,T=e;null!=T&&++g<I;){var M=wn(r[g]),Y=s;if("__proto__"===M||"constructor"===M||"prototype"===M)return e;if(g!=A){var ee=T[M];(Y=l?l(ee,M,T):t)===t&&(Y=Dt(ee)?ee:Nn(r[g+1])?[]:{})}is(T,M,Y),T=T[M]}return e}var of=oo?function(e,r){return oo.set(e,r),e}:Dr,ev=no?function(e,r){return no(e,"toString",{configurable:!0,enumerable:!1,value:Dc(r),writable:!0})}:Dr;function tv(e){return Eo(Li(e))}function Gr(e,r,s){var l=-1,g=e.length;r<0&&(r=-r>g?0:g+r),(s=s>g?g:s)<0&&(s+=g),g=r>s?0:s-r>>>0,r>>>=0;for(var I=H(g);++l<g;)I[l]=e[l+r];return I}function rv(e,r){var s;return kn(e,function(l,g,I){return!(s=r(l,g,I))}),!!s}function po(e,r,s){var l=0,g=null==e?l:e.length;if("number"==typeof r&&r==r&&g<=2147483647){for(;l<g;){var I=l+g>>>1,A=e[I];null!==A&&!Zr(A)&&(s?A<=r:A<r)?l=I+1:g=I}return g}return oc(e,r,Dr,s)}function oc(e,r,s,l){var g=0,I=null==e?0:e.length;if(0===I)return 0;for(var A=(r=s(r))!=r,T=null===r,M=Zr(r),Y=r===t;g<I;){var ee=so((g+I)/2),oe=s(e[ee]),ye=oe!==t,Ee=null===oe,Te=oe==oe,He=Zr(oe);if(A)var Ce=l||Te;else Ce=Y?Te&&(l||ye):T?Te&&ye&&(l||!Ee):M?Te&&ye&&!Ee&&(l||!He):!Ee&&!He&&(l?oe<=r:oe<r);Ce?g=ee+1:I=ee}return _r(I,4294967294)}function af(e,r){for(var s=-1,l=e.length,g=0,I=[];++s<l;){var A=e[s],T=r?r(A):A;if(!s||!cn(T,M)){var M=T;I[g++]=0===A?0:A}}return I}function cf(e){return"number"==typeof e?e:Zr(e)?NaN:+e}function Mr(e){if("string"==typeof e)return e;if(ze(e))return St(e,Mr)+"";if(Zr(e))return ql?ql.call(e):"";var r=e+"";return"0"==r&&1/e==-ii?"-0":r}function Kn(e,r,s){var l=-1,g=ks,I=e.length,A=!0,T=[],M=T;if(s)A=!1,g=ja;else if(I>=200){var Y=r?null:dv(e);if(Y)return Gs(Y);A=!1,g=Yi,M=new ci}else M=r?[]:T;e:for(;++l<I;){var ee=e[l],oe=r?r(ee):ee;if(ee=s||0!==ee?ee:0,A&&oe==oe){for(var ye=M.length;ye--;)if(M[ye]===oe)continue e;r&&M.push(oe),T.push(ee)}else g(M,oe,s)||(M!==T&&M.push(oe),T.push(ee))}return T}function ac(e,r){return null==(e=Ff(e,r=Gn(r,e)))||delete e[wn(Wr(r))]}function uf(e,r,s,l){return cs(e,r,s(li(e,r)),l)}function go(e,r,s,l){for(var g=e.length,I=l?g:-1;(l?I--:++I<g)&&r(e[I],I,e););return s?Gr(e,l?0:I,l?I+1:g):Gr(e,l?I+1:0,l?g:I)}function lf(e,r){var s=e;return s instanceof We&&(s=s.value()),Fa(r,function(l,g){return g.func.apply(g.thisArg,Hn([l],g.args))},s)}function cc(e,r,s){var l=e.length;if(l<2)return l?Kn(e[0]):[];for(var g=-1,I=H(l);++g<l;)for(var A=e[g],T=-1;++T<l;)T!=g&&(I[g]=ss(I[g]||A,e[T],r,s));return Kn(dr(I,1),r,s)}function ff(e,r,s){for(var l=-1,g=e.length,I=r.length,A={};++l<g;)s(A,e[l],l<I?r[l]:t);return A}function uc(e){return qt(e)?e:[]}function lc(e){return"function"==typeof e?e:Dr}function Gn(e,r){return ze(e)?e:mc(e,r)?[e]:zf(nt(e))}var nv=Be;function Wn(e,r,s){var l=e.length;return s=s===t?l:s,!r&&s>=l?e:Gr(e,r,s)}var hf=By||function(e){return hr.clearTimeout(e)};function df(e,r){if(r)return e.slice();var s=e.length,l=Nl?Nl(s):new e.constructor(s);return e.copy(l),l}function fc(e){var r=new e.constructor(e.byteLength);return new eo(r).set(new eo(e)),r}function pf(e,r){var s=r?fc(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}function gf(e,r){if(e!==r){var s=e!==t,l=null===e,g=e==e,I=Zr(e),A=r!==t,T=null===r,M=r==r,Y=Zr(r);if(!T&&!Y&&!I&&e>r||I&&A&&M&&!T&&!Y||l&&A&&M||!s&&M||!g)return 1;if(!l&&!I&&!Y&&e<r||Y&&s&&g&&!l&&!I||T&&s&&g||!A&&g||!M)return-1}return 0}function yf(e,r,s,l){for(var g=-1,I=e.length,A=s.length,T=-1,M=r.length,Y=rr(I-A,0),ee=H(M+Y),oe=!l;++T<M;)ee[T]=r[T];for(;++g<A;)(oe||g<I)&&(ee[s[g]]=e[g]);for(;Y--;)ee[T++]=e[g++];return ee}function vf(e,r,s,l){for(var g=-1,I=e.length,A=-1,T=s.length,M=-1,Y=r.length,ee=rr(I-T,0),oe=H(ee+Y),ye=!l;++g<ee;)oe[g]=e[g];for(var Ee=g;++M<Y;)oe[Ee+M]=r[M];for(;++A<T;)(ye||g<I)&&(oe[Ee+s[A]]=e[g++]);return oe}function Ar(e,r){var s=-1,l=e.length;for(r||(r=H(l));++s<l;)r[s]=e[s];return r}function bn(e,r,s,l){var g=!s;s||(s={});for(var I=-1,A=r.length;++I<A;){var T=r[I],M=l?l(s[T],e[T],T,s,e):t;M===t&&(M=e[T]),g?Tn(s,T,M):is(s,T,M)}return s}function yo(e,r){return function(s,l){var g=ze(s)?py:C0,I=r?r():{};return g(s,e,Ae(l,2),I)}}function Ti(e){return Be(function(r,s){var l=-1,g=s.length,I=g>1?s[g-1]:t,A=g>2?s[2]:t;for(I=e.length>3&&"function"==typeof I?(g--,I):t,A&&Ir(s[0],s[1],A)&&(I=g<3?t:I,g=1),r=ht(r);++l<g;){var T=s[l];T&&e(r,T,l,I)}return r})}function _f(e,r){return function(s,l){if(null==s)return s;if(!Tr(s))return e(s,l);for(var g=s.length,I=r?g:-1,A=ht(s);(r?I--:++I<g)&&!1!==l(A[I],I,A););return s}}function mf(e){return function(r,s,l){for(var g=-1,I=ht(r),A=l(r),T=A.length;T--;){var M=A[e?T:++g];if(!1===s(I[M],M,I))break}return r}}function bf(e){return function(r){var s=Ei(r=nt(r))?on(r):t,l=s?s[0]:r.charAt(0),g=s?Wn(s,1).join(""):r.slice(1);return l[e]()+g}}function Ci(e){return function(r){return Fa(_h(vh(r).replace(ey,"")),e,"")}}function us(e){return function(){var r=arguments;switch(r.length){case 0:return new e;case 1:return new e(r[0]);case 2:return new e(r[0],r[1]);case 3:return new e(r[0],r[1],r[2]);case 4:return new e(r[0],r[1],r[2],r[3]);case 5:return new e(r[0],r[1],r[2],r[3],r[4]);case 6:return new e(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new e(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var s=Ai(e.prototype),l=e.apply(s,r);return Dt(l)?l:s}}function wf(e){return function(r,s,l){var g=ht(r);if(!Tr(r)){var I=Ae(s,3);r=cr(r),s=function(T){return I(g[T],T,g)}}var A=e(r,s,l);return A>-1?g[I?r[A]:A]:t}}function xf(e){return Dn(function(r){var s=r.length,l=s,g=kr.prototype.thru;for(e&&r.reverse();l--;){var I=r[l];if("function"!=typeof I)throw new Vr(f);if(g&&!A&&"wrapper"==wo(I))var A=new kr([],!0)}for(l=A?l:s;++l<s;){var T=wo(I=r[l]),M="wrapper"==T?yc(I):t;A=M&&bc(M[0])&&424==M[1]&&!M[4].length&&1==M[9]?A[wo(M[0])].apply(A,M[3]):1==I.length&&bc(I)?A[T]():A.thru(I)}return function(){var Y=arguments,ee=Y[0];if(A&&1==Y.length&&ze(ee))return A.plant(ee).value();for(var oe=0,ye=s?r[oe].apply(this,Y):ee;++oe<s;)ye=r[oe].call(this,ye);return ye}})}function vo(e,r,s,l,g,I,A,T,M,Y){var ee=128&r,oe=1&r,ye=2&r,Ee=24&r,Te=512&r,He=ye?t:us(e);return function Ce(){for(var Ke=arguments.length,Ye=H(Ke),qr=Ke;qr--;)Ye[qr]=arguments[qr];if(Ee)var Pr=Di(Ce),zr=function Ey(F,K){for(var H=F.length,be=0;H--;)F[H]===K&&++be;return be}(Ye,Pr);if(l&&(Ye=yf(Ye,l,g,Ee)),I&&(Ye=vf(Ye,I,A,Ee)),Ke-=zr,Ee&&Ke<Y){var zt=Bn(Ye,Pr);return Pf(e,r,vo,Ce.placeholder,s,Ye,zt,T,M,Y-Ke)}var un=oe?s:this,Fn=ye?un[e]:e;return Ke=Ye.length,T?Ye=function Cv(e,r){for(var s=e.length,l=_r(r.length,s),g=Ar(e);l--;){var I=r[l];e[l]=Nn(I,s)?g[I]:t}return e}(Ye,T):Te&&Ke>1&&Ye.reverse(),ee&&M<Ke&&(Ye.length=M),this&&this!==hr&&this instanceof Ce&&(Fn=He||us(Fn)),Fn.apply(un,Ye)}}function Ef(e,r){return function(s,l){return function q0(e,r,s,l){return mn(e,function(g,I,A){r(l,s(g),I,A)}),l}(s,e,r(l),{})}}function _o(e,r){return function(s,l){var g;if(s===t&&l===t)return r;if(s!==t&&(g=s),l!==t){if(g===t)return l;"string"==typeof s||"string"==typeof l?(s=Mr(s),l=Mr(l)):(s=cf(s),l=cf(l)),g=e(s,l)}return g}}function hc(e){return Dn(function(r){return r=St(r,Fr(Ae())),Be(function(s){var l=this;return e(r,function(g){return jr(g,l,s)})})})}function mo(e,r){var s=(r=r===t?" ":Mr(r)).length;if(s<2)return s?sc(r,e):r;var l=sc(r,io(e/Ii(r)));return Ei(r)?Wn(on(l),0,e).join(""):l.slice(0,e)}function If(e){return function(r,s,l){return l&&"number"!=typeof l&&Ir(r,s,l)&&(s=l=t),r=jn(r),s===t?(s=r,r=0):s=jn(s),function Q0(e,r,s,l){for(var g=-1,I=rr(io((r-e)/(s||1)),0),A=H(I);I--;)A[l?I:++g]=e,e+=s;return A}(r,s,l=l===t?r<s?1:-1:jn(l),e)}}function bo(e){return function(r,s){return"string"==typeof r&&"string"==typeof s||(r=Jr(r),s=Jr(s)),e(r,s)}}function Pf(e,r,s,l,g,I,A,T,M,Y){var ee=8&r;r|=ee?32:64,4&(r&=~(ee?64:32))||(r&=-4);var He=[e,r,g,ee?I:t,ee?A:t,ee?t:I,ee?t:A,T,M,Y],Ce=s.apply(t,He);return bc(e)&&Mf(Ce,He),Ce.placeholder=l,Zf(Ce,e,r)}function dc(e){var r=tr[e];return function(s,l){if(s=Jr(s),(l=null==l?0:_r(Ue(l),292))&&Ml(s)){var g=(nt(s)+"e").split("e");return+((g=(nt(r(g[0]+"e"+(+g[1]+l)))+"e").split("e"))[0]+"e"+(+g[1]-l))}return r(s)}}var dv=Oi&&1/Gs(new Oi([,-0]))[1]==ii?function(e){return new Oi(e)}:jc;function Sf(e){return function(r){var s=mr(r);return s==nn?Ha(r):s==sn?function Ty(F){var K=-1,H=Array(F.size);return F.forEach(function(be){H[++K]=[be,be]}),H}(r):function xy(F,K){return St(K,function(H){return[H,F[H]]})}(r,e(r))}}function Cn(e,r,s,l,g,I,A,T){var M=2&r;if(!M&&"function"!=typeof e)throw new Vr(f);var Y=l?l.length:0;if(Y||(r&=-97,l=g=t),A=A===t?A:rr(Ue(A),0),T=T===t?T:Ue(T),Y-=g?g.length:0,64&r){var ee=l,oe=g;l=g=t}var ye=M?t:yc(e),Ee=[e,r,s,l,g,ee,oe,I,A,T];if(ye&&function Rv(e,r){var s=e[1],l=r[1],g=s|l;if(!(g<131)&&!(128==l&&8==s||128==l&&256==s&&e[7].length<=r[8]||384==l&&r[7].length<=r[8]&&8==s))return e;1&l&&(e[2]=r[2],g|=1&s?0:4);var T=r[3];if(T){var M=e[3];e[3]=M?yf(M,T,r[4]):T,e[4]=M?Bn(e[3],W):r[4]}(T=r[5])&&(e[5]=(M=e[5])?vf(M,T,r[6]):T,e[6]=M?Bn(e[5],W):r[6]),(T=r[7])&&(e[7]=T),128&l&&(e[8]=null==e[8]?r[8]:_r(e[8],r[8])),null==e[9]&&(e[9]=r[9]),e[0]=r[0],e[1]=g}(Ee,ye),e=Ee[0],r=Ee[1],s=Ee[2],l=Ee[3],g=Ee[4],!(T=Ee[9]=Ee[9]===t?M?0:e.length:rr(Ee[9]-Y,0))&&24&r&&(r&=-25),r&&1!=r)Te=8==r||16==r?function fv(e,r,s){var l=us(e);return function g(){for(var I=arguments.length,A=H(I),T=I,M=Di(g);T--;)A[T]=arguments[T];var Y=I<3&&A[0]!==M&&A[I-1]!==M?[]:Bn(A,M);return(I-=Y.length)<s?Pf(e,r,vo,g.placeholder,t,A,Y,t,t,s-I):jr(this&&this!==hr&&this instanceof g?l:e,this,A)}}(e,r,T):32!=r&&33!=r||g.length?vo.apply(t,Ee):function hv(e,r,s,l){var g=1&r,I=us(e);return function A(){for(var T=-1,M=arguments.length,Y=-1,ee=l.length,oe=H(ee+M),ye=this&&this!==hr&&this instanceof A?I:e;++Y<ee;)oe[Y]=l[Y];for(;M--;)oe[Y++]=arguments[++T];return jr(ye,g?s:this,oe)}}(e,r,s,l);else var Te=function lv(e,r,s){var l=1&r,g=us(e);return function I(){return(this&&this!==hr&&this instanceof I?g:e).apply(l?s:this,arguments)}}(e,r,s);return Zf((ye?of:Mf)(Te,Ee),e,r)}function Of(e,r,s,l){return e===t||cn(e,Si[s])&&!st.call(l,s)?r:e}function Rf(e,r,s,l,g,I){return Dt(e)&&Dt(r)&&(I.set(r,e),ho(e,r,t,Rf,I),I.delete(r)),e}function pv(e){return hs(e)?t:e}function Af(e,r,s,l,g,I){var A=1&s,T=e.length,M=r.length;if(T!=M&&!(A&&M>T))return!1;var Y=I.get(e),ee=I.get(r);if(Y&&ee)return Y==r&&ee==e;var oe=-1,ye=!0,Ee=2&s?new ci:t;for(I.set(e,r),I.set(r,e);++oe<T;){var Te=e[oe],He=r[oe];if(l)var Ce=A?l(He,Te,oe,r,e,I):l(Te,He,oe,e,r,I);if(Ce!==t){if(Ce)continue;ye=!1;break}if(Ee){if(!Ma(r,function(Ke,Ye){if(!Yi(Ee,Ye)&&(Te===Ke||g(Te,Ke,s,l,I)))return Ee.push(Ye)})){ye=!1;break}}else if(Te!==He&&!g(Te,He,s,l,I)){ye=!1;break}}return I.delete(e),I.delete(r),ye}function Dn(e){return xc(jf(e,t,Bf),e+"")}function pc(e){return Gl(e,cr,_c)}function gc(e){return Gl(e,Cr,Tf)}var yc=oo?function(e){return oo.get(e)}:jc;function wo(e){for(var r=e.name+"",s=Ri[r],l=st.call(Ri,r)?s.length:0;l--;){var g=s[l],I=g.func;if(null==I||I==e)return g.name}return r}function Di(e){return(st.call(w,"placeholder")?w:e).placeholder}function Ae(){var e=w.iteratee||Nc;return e=e===Nc?Ql:e,arguments.length?e(arguments[0],arguments[1]):e}function xo(e,r){var s=e.__data__;return function Iv(e){var r=typeof e;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e}(r)?s["string"==typeof r?"string":"hash"]:s.map}function vc(e){for(var r=cr(e),s=r.length;s--;){var l=r[s],g=e[l];r[s]=[l,g,Nf(g)]}return r}function fi(e,r){var s=function Oy(F,K){return null==F?t:F[K]}(e,r);return Jl(s)?s:t}var _c=Va?function(e){return null==e?[]:(e=ht(e),$n(Va(e),function(r){return jl.call(e,r)}))}:Fc,Tf=Va?function(e){for(var r=[];e;)Hn(r,_c(e)),e=to(e);return r}:Fc,mr=Er;function Cf(e,r,s){for(var l=-1,g=(r=Gn(r,e)).length,I=!1;++l<g;){var A=wn(r[l]);if(!(I=null!=e&&s(e,A)))break;e=e[A]}return I||++l!=g?I:!!(g=null==e?0:e.length)&&Ao(g)&&Nn(A,g)&&(ze(e)||di(e))}function Df(e){return"function"!=typeof e.constructor||ls(e)?{}:Ai(to(e))}function Ev(e){return ze(e)||di(e)||!!(Fl&&e&&e[Fl])}function Nn(e,r){var s=typeof e;return!!(r=r??Un)&&("number"==s||"symbol"!=s&&jg.test(e))&&e>-1&&e%1==0&&e<r}function Ir(e,r,s){if(!Dt(s))return!1;var l=typeof r;return!!("number"==l?Tr(s)&&Nn(r,s.length):"string"==l&&r in s)&&cn(s[r],e)}function mc(e,r){if(ze(e))return!1;var s=typeof e;return!("number"!=s&&"symbol"!=s&&"boolean"!=s&&null!=e&&!Zr(e))||bg.test(e)||!mg.test(e)||null!=r&&e in ht(r)}function bc(e){var r=wo(e),s=w[r];if("function"!=typeof s||!(r in We.prototype))return!1;if(e===s)return!0;var l=yc(s);return!!l&&e===l[0]}(ka&&mr(new ka(new ArrayBuffer(1)))!=bi||es&&mr(new es)!=nn||Ka&&mr(Ka.resolve())!=Vu||Oi&&mr(new Oi)!=sn||ts&&mr(new ts)!=Ji)&&(mr=function(e){var r=Er(e),s=r==On?e.constructor:t,l=s?hi(s):"";if(l)switch(l){case Xy:return bi;case e0:return nn;case t0:return Vu;case r0:return sn;case n0:return Ji}return r});var Sv=Js?Ln:Mc;function ls(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||Si)}function Nf(e){return e==e&&!Dt(e)}function Lf(e,r){return function(s){return null!=s&&s[e]===r&&(r!==t||e in ht(s))}}function jf(e,r,s){return r=rr(r===t?e.length-1:r,0),function(){for(var l=arguments,g=-1,I=rr(l.length-r,0),A=H(I);++g<I;)A[g]=l[r+g];g=-1;for(var T=H(r+1);++g<r;)T[g]=l[g];return T[r]=s(A),jr(e,this,T)}}function Ff(e,r){return r.length<2?e:li(e,Gr(r,0,-1))}function wc(e,r){if(("constructor"!==r||"function"!=typeof e[r])&&"__proto__"!=r)return e[r]}var Mf=qf(of),fs=ky||function(e,r){return hr.setTimeout(e,r)},xc=qf(ev);function Zf(e,r,s){var l=r+"";return xc(e,function xv(e,r){var s=r.length;if(!s)return e;var l=s-1;return r[l]=(s>1?"& ":"")+r[l],r=r.join(s>2?", ":" "),e.replace(Ig,"{\n/* [wrapped with "+r+"] */\n")}(l,function Dv(e,r){return Br(sg,function(s){var l="_."+s[0];r&s[1]&&!ks(e,l)&&e.push(l)}),e.sort()}(function mv(e){var r=e.match(Pg);return r?r[1].split(Sg):[]}(l),s)))}function qf(e){var r=0,s=0;return function(){var l=Jy(),g=16-(l-s);if(s=l,g>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(t,arguments)}}function Eo(e,r){var s=-1,l=e.length,g=l-1;for(r=r===t?l:r;++s<r;){var I=ic(s,g),A=e[I];e[I]=e[s],e[s]=A}return e.length=r,e}var zf=function Ov(e){var r=Oo(e,function(l){return 500===s.size&&s.clear(),l}),s=r.cache;return r}(function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace(wg,function(s,l,g,I){r.push(g?I.replace(Ag,"$1"):l||s)}),r});function wn(e){if("string"==typeof e||Zr(e))return e;var r=e+"";return"0"==r&&1/e==-ii?"-0":r}function hi(e){if(null!=e){try{return Qs.call(e)}catch{}try{return e+""}catch{}}return""}function Uf(e){if(e instanceof We)return e.clone();var r=new kr(e.__wrapped__,e.__chain__);return r.__actions__=Ar(e.__actions__),r.__index__=e.__index__,r.__values__=e.__values__,r}var Fv=Be(function(e,r){return qt(e)?ss(e,dr(r,1,qt,!0)):[]}),Mv=Be(function(e,r){var s=Wr(r);return qt(s)&&(s=t),qt(e)?ss(e,dr(r,1,qt,!0),Ae(s,2)):[]}),Zv=Be(function(e,r){var s=Wr(r);return qt(s)&&(s=t),qt(e)?ss(e,dr(r,1,qt,!0),t,s):[]});function $f(e,r,s){var l=null==e?0:e.length;if(!l)return-1;var g=null==s?0:Ue(s);return g<0&&(g=rr(l+g,0)),Ks(e,Ae(r,3),g)}function Hf(e,r,s){var l=null==e?0:e.length;if(!l)return-1;var g=l-1;return s!==t&&(g=Ue(s),g=s<0?rr(l+g,0):_r(g,l-1)),Ks(e,Ae(r,3),g,!0)}function Bf(e){return null!=e&&e.length?dr(e,1):[]}function Vf(e){return e&&e.length?e[0]:t}var Wv=Be(function(e){var r=St(e,uc);return r.length&&r[0]===e[0]?Xa(r):[]}),Jv=Be(function(e){var r=Wr(e),s=St(e,uc);return r===Wr(s)?r=t:s.pop(),s.length&&s[0]===e[0]?Xa(s,Ae(r,2)):[]}),Qv=Be(function(e){var r=Wr(e),s=St(e,uc);return(r="function"==typeof r?r:t)&&s.pop(),s.length&&s[0]===e[0]?Xa(s,t,r):[]});function Wr(e){var r=null==e?0:e.length;return r?e[r-1]:t}var t_=Be(kf);function kf(e,r){return e&&e.length&&r&&r.length?nc(e,r):e}var i_=Dn(function(e,r){var s=null==e?0:e.length,l=Wa(e,r);return sf(e,St(r,function(g){return Nn(g,s)?+g:g}).sort(gf)),l});function Ec(e){return null==e?e:Yy.call(e)}var b_=Be(function(e){return Kn(dr(e,1,qt,!0))}),w_=Be(function(e){var r=Wr(e);return qt(r)&&(r=t),Kn(dr(e,1,qt,!0),Ae(r,2))}),x_=Be(function(e){var r=Wr(e);return r="function"==typeof r?r:t,Kn(dr(e,1,qt,!0),t,r)});function Ic(e){if(!e||!e.length)return[];var r=0;return e=$n(e,function(s){if(qt(s))return r=rr(s.length,r),!0}),Ua(r,function(s){return St(e,Za(s))})}function Kf(e,r){if(!e||!e.length)return[];var s=Ic(e);return null==r?s:St(s,function(l){return jr(r,t,l)})}var S_=Be(function(e,r){return qt(e)?ss(e,r):[]}),O_=Be(function(e){return cc($n(e,qt))}),R_=Be(function(e){var r=Wr(e);return qt(r)&&(r=t),cc($n(e,qt),Ae(r,2))}),A_=Be(function(e){var r=Wr(e);return r="function"==typeof r?r:t,cc($n(e,qt),t,r)}),T_=Be(Ic),N_=Be(function(e){var r=e.length,s=r>1?e[r-1]:t;return s="function"==typeof s?(e.pop(),s):t,Kf(e,s)});function Gf(e){var r=w(e);return r.__chain__=!0,r}function Io(e,r){return r(e)}var j_=Dn(function(e){var r=e.length,s=r?e[0]:0,l=this.__wrapped__,g=function(I){return Wa(I,e)};return!(r>1||this.__actions__.length)&&l instanceof We&&Nn(s)?((l=l.slice(s,+s+(r?1:0))).__actions__.push({func:Io,args:[g],thisArg:t}),new kr(l,this.__chain__).thru(function(I){return r&&!I.length&&I.push(t),I})):this.thru(g)}),H_=yo(function(e,r,s){st.call(e,s)?++e[s]:Tn(e,s,1)}),k_=wf($f),K_=wf(Hf);function Wf(e,r){return(ze(e)?Br:kn)(e,Ae(r,3))}function Jf(e,r){return(ze(e)?gy:Vl)(e,Ae(r,3))}var Q_=yo(function(e,r,s){st.call(e,s)?e[s].push(r):Tn(e,s,[r])}),X_=Be(function(e,r,s){var l=-1,g="function"==typeof r,I=Tr(e)?H(e.length):[];return kn(e,function(A){I[++l]=g?jr(r,A,s):os(A,r,s)}),I}),em=yo(function(e,r,s){Tn(e,s,r)});function Po(e,r){return(ze(e)?St:Yl)(e,Ae(r,3))}var rm=yo(function(e,r,s){e[s?0:1].push(r)},function(){return[[],[]]}),fm=Be(function(e,r){if(null==e)return[];var s=r.length;return s>1&&Ir(e,r[0],r[1])?r=[]:s>2&&Ir(r[0],r[1],r[2])&&(r=[r[0]]),rf(e,dr(r,1),[])}),So=Vy||function(){return hr.Date.now()};function Qf(e,r,s){return r=s?t:r,Cn(e,128,t,t,t,t,r=e&&null==r?e.length:r)}function Yf(e,r){var s;if("function"!=typeof r)throw new Vr(f);return e=Ue(e),function(){return--e>0&&(s=r.apply(this,arguments)),e<=1&&(r=t),s}}var Pc=Be(function(e,r,s){var l=1;if(s.length){var g=Bn(s,Di(Pc));l|=32}return Cn(e,l,r,s,g)}),Xf=Be(function(e,r,s){var l=3;if(s.length){var g=Bn(s,Di(Xf));l|=32}return Cn(r,l,e,s,g)});function rh(e,r,s){var l,g,I,A,T,M,Y=0,ee=!1,oe=!1,ye=!0;if("function"!=typeof e)throw new Vr(f);function Ee(zt){var un=l,Fn=g;return l=g=t,Y=zt,A=e.apply(Fn,un)}function Ce(zt){var un=zt-M;return M===t||un>=r||un<0||oe&&zt-Y>=I}function Ke(){var zt=So();if(Ce(zt))return Ye(zt);T=fs(Ke,function He(zt){var wh=r-(zt-M);return oe?_r(wh,I-(zt-Y)):wh}(zt))}function Ye(zt){return T=t,ye&&l?Ee(zt):(l=g=t,A)}function zr(){var zt=So(),un=Ce(zt);if(l=arguments,g=this,M=zt,un){if(T===t)return function Te(zt){return Y=zt,T=fs(Ke,r),ee?Ee(zt):A}(M);if(oe)return hf(T),T=fs(Ke,r),Ee(M)}return T===t&&(T=fs(Ke,r)),A}return r=Jr(r)||0,Dt(s)&&(ee=!!s.leading,I=(oe="maxWait"in s)?rr(Jr(s.maxWait)||0,r):I,ye="trailing"in s?!!s.trailing:ye),zr.cancel=function qr(){T!==t&&hf(T),Y=0,l=M=g=T=t},zr.flush=function Pr(){return T===t?A:Ye(So())},zr}var dm=Be(function(e,r){return Bl(e,1,r)}),pm=Be(function(e,r,s){return Bl(e,Jr(r)||0,s)});function Oo(e,r){if("function"!=typeof e||null!=r&&"function"!=typeof r)throw new Vr(f);var s=function(){var l=arguments,g=r?r.apply(this,l):l[0],I=s.cache;if(I.has(g))return I.get(g);var A=e.apply(this,l);return s.cache=I.set(g,A)||I,A};return s.cache=new(Oo.Cache||An),s}function Ro(e){if("function"!=typeof e)throw new Vr(f);return function(){var r=arguments;switch(r.length){case 0:return!e.call(this);case 1:return!e.call(this,r[0]);case 2:return!e.call(this,r[0],r[1]);case 3:return!e.call(this,r[0],r[1],r[2])}return!e.apply(this,r)}}Oo.Cache=An;var vm=nv(function(e,r){var s=(r=1==r.length&&ze(r[0])?St(r[0],Fr(Ae())):St(dr(r,1),Fr(Ae()))).length;return Be(function(l){for(var g=-1,I=_r(l.length,s);++g<I;)l[g]=r[g].call(this,l[g]);return jr(e,this,l)})}),Sc=Be(function(e,r){var s=Bn(r,Di(Sc));return Cn(e,32,t,r,s)}),nh=Be(function(e,r){var s=Bn(r,Di(nh));return Cn(e,64,t,r,s)}),_m=Dn(function(e,r){return Cn(e,256,t,t,t,r)});function cn(e,r){return e===r||e!=e&&r!=r}var Tm=bo(Ya),Cm=bo(function(e,r){return e>=r}),di=Wl(function(){return arguments}())?Wl:function(e){return Lt(e)&&st.call(e,"callee")&&!jl.call(e,"callee")},ze=H.isArray,Dm=yl?Fr(yl):function z0(e){return Lt(e)&&Er(e)==Qi};function Tr(e){return null!=e&&Ao(e.length)&&!Ln(e)}function qt(e){return Lt(e)&&Tr(e)}var Jn=Ky||Mc,Lm=vl?Fr(vl):function U0(e){return Lt(e)&&Er(e)==ki};function Oc(e){if(!Lt(e))return!1;var r=Er(e);return r==zs||"[object DOMException]"==r||"string"==typeof e.message&&"string"==typeof e.name&&!hs(e)}function Ln(e){if(!Dt(e))return!1;var r=Er(e);return r==Us||r==Bu||"[object AsyncFunction]"==r||"[object Proxy]"==r}function ih(e){return"number"==typeof e&&e==Ue(e)}function Ao(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Un}function Dt(e){var r=typeof e;return null!=e&&("object"==r||"function"==r)}function Lt(e){return null!=e&&"object"==typeof e}var sh=_l?Fr(_l):function H0(e){return Lt(e)&&mr(e)==nn};function oh(e){return"number"==typeof e||Lt(e)&&Er(e)==Ki}function hs(e){if(!Lt(e)||Er(e)!=On)return!1;var r=to(e);if(null===r)return!0;var s=st.call(r,"constructor")&&r.constructor;return"function"==typeof s&&s instanceof s&&Qs.call(s)==Uy}var Rc=ml?Fr(ml):function B0(e){return Lt(e)&&Er(e)==Gi},ah=bl?Fr(bl):function V0(e){return Lt(e)&&mr(e)==sn};function To(e){return"string"==typeof e||!ze(e)&&Lt(e)&&Er(e)==Wi}function Zr(e){return"symbol"==typeof e||Lt(e)&&Er(e)==$s}var Ni=wl?Fr(wl):function k0(e){return Lt(e)&&Ao(e.length)&&!!Et[Er(e)]},Jm=bo(rc),Qm=bo(function(e,r){return e<=r});function ch(e){if(!e)return[];if(Tr(e))return To(e)?on(e):Ar(e);if(Xi&&e[Xi])return function Ay(F){for(var K,H=[];!(K=F.next()).done;)H.push(K.value);return H}(e[Xi]());var r=mr(e);return(r==nn?Ha:r==sn?Gs:Li)(e)}function jn(e){return e?(e=Jr(e))===ii||e===-ii?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function Ue(e){var r=jn(e),s=r%1;return r==r?s?r-s:r:0}function uh(e){return e?ui(Ue(e),0,_n):0}function Jr(e){if("number"==typeof e)return e;if(Zr(e))return NaN;if(Dt(e)){var r="function"==typeof e.valueOf?e.valueOf():e;e=Dt(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=Ol(e);var s=Dg.test(e);return s||Lg.test(e)?hy(e.slice(2),s?2:8):Cg.test(e)?NaN:+e}function lh(e){return bn(e,Cr(e))}function nt(e){return null==e?"":Mr(e)}var Xm=Ti(function(e,r){if(ls(r)||Tr(r))bn(r,cr(r),e);else for(var s in r)st.call(r,s)&&is(e,s,r[s])}),fh=Ti(function(e,r){bn(r,Cr(r),e)}),Co=Ti(function(e,r,s,l){bn(r,Cr(r),e,l)}),e1=Ti(function(e,r,s,l){bn(r,cr(r),e,l)}),t1=Dn(Wa),n1=Be(function(e,r){e=ht(e);var s=-1,l=r.length,g=l>2?r[2]:t;for(g&&Ir(r[0],r[1],g)&&(l=1);++s<l;)for(var I=r[s],A=Cr(I),T=-1,M=A.length;++T<M;){var Y=A[T],ee=e[Y];(ee===t||cn(ee,Si[Y])&&!st.call(e,Y))&&(e[Y]=I[Y])}return e}),i1=Be(function(e){return e.push(t,Rf),jr(hh,t,e)});function Ac(e,r,s){var l=null==e?t:li(e,r);return l===t?s:l}function Tc(e,r){return null!=e&&Cf(e,r,M0)}var p1=Ef(function(e,r,s){null!=r&&"function"!=typeof r.toString&&(r=Ys.call(r)),e[r]=s},Dc(Dr)),g1=Ef(function(e,r,s){null!=r&&"function"!=typeof r.toString&&(r=Ys.call(r)),st.call(e,r)?e[r].push(s):e[r]=[s]},Ae),y1=Be(os);function cr(e){return Tr(e)?zl(e):tc(e)}function Cr(e){return Tr(e)?zl(e,!0):function K0(e){if(!Dt(e))return function Av(e){var r=[];if(null!=e)for(var s in ht(e))r.push(s);return r}(e);var r=ls(e),s=[];for(var l in e)"constructor"==l&&(r||!st.call(e,l))||s.push(l);return s}(e)}var m1=Ti(function(e,r,s){ho(e,r,s)}),hh=Ti(function(e,r,s,l){ho(e,r,s,l)}),b1=Dn(function(e,r){var s={};if(null==e)return s;var l=!1;r=St(r,function(I){return I=Gn(I,e),l||(l=I.length>1),I}),bn(e,gc(e),s),l&&(s=Kr(s,7,pv));for(var g=r.length;g--;)ac(s,r[g]);return s}),x1=Dn(function(e,r){return null==e?{}:function W0(e,r){return nf(e,r,function(s,l){return Tc(e,l)})}(e,r)});function dh(e,r){if(null==e)return{};var s=St(gc(e),function(l){return[l]});return r=Ae(r),nf(e,s,function(l,g){return r(l,g[0])})}var ph=Sf(cr),gh=Sf(Cr);function Li(e){return null==e?[]:$a(e,cr(e))}var L1=Ci(function(e,r,s){return r=r.toLowerCase(),e+(s?yh(r):r)});function yh(e){return Cc(nt(e).toLowerCase())}function vh(e){return(e=nt(e))&&e.replace(Fg,Iy).replace(ty,"")}var Z1=Ci(function(e,r,s){return e+(s?"-":"")+r.toLowerCase()}),q1=Ci(function(e,r,s){return e+(s?" ":"")+r.toLowerCase()}),z1=bf("toLowerCase"),K1=Ci(function(e,r,s){return e+(s?"_":"")+r.toLowerCase()}),W1=Ci(function(e,r,s){return e+(s?" ":"")+Cc(r)}),sb=Ci(function(e,r,s){return e+(s?" ":"")+r.toUpperCase()}),Cc=bf("toUpperCase");function _h(e,r,s){return e=nt(e),(r=s?t:r)===t?function Ry(F){return iy.test(F)}(e)?function Fy(F){return F.match(ry)||[]}(e):function my(F){return F.match(Og)||[]}(e):e.match(r)||[]}var mh=Be(function(e,r){try{return jr(e,t,r)}catch(s){return Oc(s)?s:new Ze(s)}}),ob=Dn(function(e,r){return Br(r,function(s){s=wn(s),Tn(e,s,Pc(e[s],e))}),e});function Dc(e){return function(){return e}}var lb=xf(),fb=xf(!0);function Dr(e){return e}function Nc(e){return Ql("function"==typeof e?e:Kr(e,1))}var pb=Be(function(e,r){return function(s){return os(s,e,r)}}),gb=Be(function(e,r){return function(s){return os(e,s,r)}});function Lc(e,r,s){var l=cr(r),g=fo(r,l);null==s&&(!Dt(r)||!g.length&&l.length)&&(s=r,r=e,e=this,g=fo(r,cr(r)));var I=!(Dt(s)&&"chain"in s&&!s.chain),A=Ln(e);return Br(g,function(T){var M=r[T];e[T]=M,A&&(e.prototype[T]=function(){var Y=this.__chain__;if(I||Y){var ee=e(this.__wrapped__);return(ee.__actions__=Ar(this.__actions__)).push({func:M,args:arguments,thisArg:e}),ee.__chain__=Y,ee}return M.apply(e,Hn([this.value()],arguments))})}),e}function jc(){}var _b=hc(St),mb=hc(xl),bb=hc(Ma);function bh(e){return mc(e)?Za(wn(e)):function J0(e){return function(r){return li(r,e)}}(e)}var xb=If(),Eb=If(!0);function Fc(){return[]}function Mc(){return!1}var Tb=_o(function(e,r){return e+r},0),Cb=dc("ceil"),Db=_o(function(e,r){return e/r},1),Nb=dc("floor"),zb=_o(function(e,r){return e*r},1),Ub=dc("round"),$b=_o(function(e,r){return e-r},0);return w.after=function hm(e,r){if("function"!=typeof r)throw new Vr(f);return e=Ue(e),function(){if(--e<1)return r.apply(this,arguments)}},w.ary=Qf,w.assign=Xm,w.assignIn=fh,w.assignInWith=Co,w.assignWith=e1,w.at=t1,w.before=Yf,w.bind=Pc,w.bindAll=ob,w.bindKey=Xf,w.castArray=function Im(){if(!arguments.length)return[];var e=arguments[0];return ze(e)?e:[e]},w.chain=Gf,w.chunk=function Nv(e,r,s){r=(s?Ir(e,r,s):r===t)?1:rr(Ue(r),0);var l=null==e?0:e.length;if(!l||r<1)return[];for(var g=0,I=0,A=H(io(l/r));g<l;)A[I++]=Gr(e,g,g+=r);return A},w.compact=function Lv(e){for(var r=-1,s=null==e?0:e.length,l=0,g=[];++r<s;){var I=e[r];I&&(g[l++]=I)}return g},w.concat=function jv(){var e=arguments.length;if(!e)return[];for(var r=H(e-1),s=arguments[0],l=e;l--;)r[l-1]=arguments[l];return Hn(ze(s)?Ar(s):[s],dr(r,1))},w.cond=function ab(e){var r=null==e?0:e.length,s=Ae();return e=r?St(e,function(l){if("function"!=typeof l[1])throw new Vr(f);return[s(l[0]),l[1]]}):[],Be(function(l){for(var g=-1;++g<r;){var I=e[g];if(jr(I[0],this,l))return jr(I[1],this,l)}})},w.conforms=function cb(e){return function N0(e){var r=cr(e);return function(s){return Hl(s,e,r)}}(Kr(e,1))},w.constant=Dc,w.countBy=H_,w.create=function r1(e,r){var s=Ai(e);return null==r?s:$l(s,r)},w.curry=function eh(e,r,s){var l=Cn(e,8,t,t,t,t,t,r=s?t:r);return l.placeholder=eh.placeholder,l},w.curryRight=function th(e,r,s){var l=Cn(e,16,t,t,t,t,t,r=s?t:r);return l.placeholder=th.placeholder,l},w.debounce=rh,w.defaults=n1,w.defaultsDeep=i1,w.defer=dm,w.delay=pm,w.difference=Fv,w.differenceBy=Mv,w.differenceWith=Zv,w.drop=function qv(e,r,s){var l=null==e?0:e.length;return l?Gr(e,(r=s||r===t?1:Ue(r))<0?0:r,l):[]},w.dropRight=function zv(e,r,s){var l=null==e?0:e.length;return l?Gr(e,0,(r=l-(r=s||r===t?1:Ue(r)))<0?0:r):[]},w.dropRightWhile=function Uv(e,r){return e&&e.length?go(e,Ae(r,3),!0,!0):[]},w.dropWhile=function $v(e,r){return e&&e.length?go(e,Ae(r,3),!0):[]},w.fill=function Hv(e,r,s,l){var g=null==e?0:e.length;return g?(s&&"number"!=typeof s&&Ir(e,r,s)&&(s=0,l=g),function j0(e,r,s,l){var g=e.length;for((s=Ue(s))<0&&(s=-s>g?0:g+s),(l=l===t||l>g?g:Ue(l))<0&&(l+=g),l=s>l?0:uh(l);s<l;)e[s++]=r;return e}(e,r,s,l)):[]},w.filter=function V_(e,r){return(ze(e)?$n:kl)(e,Ae(r,3))},w.flatMap=function G_(e,r){return dr(Po(e,r),1)},w.flatMapDeep=function W_(e,r){return dr(Po(e,r),ii)},w.flatMapDepth=function J_(e,r,s){return s=s===t?1:Ue(s),dr(Po(e,r),s)},w.flatten=Bf,w.flattenDeep=function Bv(e){return null!=e&&e.length?dr(e,ii):[]},w.flattenDepth=function Vv(e,r){return null!=e&&e.length?dr(e,r=r===t?1:Ue(r)):[]},w.flip=function gm(e){return Cn(e,512)},w.flow=lb,w.flowRight=fb,w.fromPairs=function kv(e){for(var r=-1,s=null==e?0:e.length,l={};++r<s;){var g=e[r];l[g[0]]=g[1]}return l},w.functions=function f1(e){return null==e?[]:fo(e,cr(e))},w.functionsIn=function h1(e){return null==e?[]:fo(e,Cr(e))},w.groupBy=Q_,w.initial=function Gv(e){return null!=e&&e.length?Gr(e,0,-1):[]},w.intersection=Wv,w.intersectionBy=Jv,w.intersectionWith=Qv,w.invert=p1,w.invertBy=g1,w.invokeMap=X_,w.iteratee=Nc,w.keyBy=em,w.keys=cr,w.keysIn=Cr,w.map=Po,w.mapKeys=function v1(e,r){var s={};return r=Ae(r,3),mn(e,function(l,g,I){Tn(s,r(l,g,I),l)}),s},w.mapValues=function _1(e,r){var s={};return r=Ae(r,3),mn(e,function(l,g,I){Tn(s,g,r(l,g,I))}),s},w.matches=function hb(e){return Xl(Kr(e,1))},w.matchesProperty=function db(e,r){return ef(e,Kr(r,1))},w.memoize=Oo,w.merge=m1,w.mergeWith=hh,w.method=pb,w.methodOf=gb,w.mixin=Lc,w.negate=Ro,w.nthArg=function vb(e){return e=Ue(e),Be(function(r){return tf(r,e)})},w.omit=b1,w.omitBy=function w1(e,r){return dh(e,Ro(Ae(r)))},w.once=function ym(e){return Yf(2,e)},w.orderBy=function tm(e,r,s,l){return null==e?[]:(ze(r)||(r=null==r?[]:[r]),ze(s=l?t:s)||(s=null==s?[]:[s]),rf(e,r,s))},w.over=_b,w.overArgs=vm,w.overEvery=mb,w.overSome=bb,w.partial=Sc,w.partialRight=nh,w.partition=rm,w.pick=x1,w.pickBy=dh,w.property=bh,w.propertyOf=function wb(e){return function(r){return null==e?t:li(e,r)}},w.pull=t_,w.pullAll=kf,w.pullAllBy=function r_(e,r,s){return e&&e.length&&r&&r.length?nc(e,r,Ae(s,2)):e},w.pullAllWith=function n_(e,r,s){return e&&e.length&&r&&r.length?nc(e,r,t,s):e},w.pullAt=i_,w.range=xb,w.rangeRight=Eb,w.rearg=_m,w.reject=function sm(e,r){return(ze(e)?$n:kl)(e,Ro(Ae(r,3)))},w.remove=function s_(e,r){var s=[];if(!e||!e.length)return s;var l=-1,g=[],I=e.length;for(r=Ae(r,3);++l<I;){var A=e[l];r(A,l,e)&&(s.push(A),g.push(l))}return sf(e,g),s},w.rest=function mm(e,r){if("function"!=typeof e)throw new Vr(f);return Be(e,r=r===t?r:Ue(r))},w.reverse=Ec,w.sampleSize=function am(e,r,s){return r=(s?Ir(e,r,s):r===t)?1:Ue(r),(ze(e)?A0:X0)(e,r)},w.set=function I1(e,r,s){return null==e?e:cs(e,r,s)},w.setWith=function P1(e,r,s,l){return l="function"==typeof l?l:t,null==e?e:cs(e,r,s,l)},w.shuffle=function cm(e){return(ze(e)?T0:tv)(e)},w.slice=function o_(e,r,s){var l=null==e?0:e.length;return l?(s&&"number"!=typeof s&&Ir(e,r,s)?(r=0,s=l):(r=null==r?0:Ue(r),s=s===t?l:Ue(s)),Gr(e,r,s)):[]},w.sortBy=fm,w.sortedUniq=function d_(e){return e&&e.length?af(e):[]},w.sortedUniqBy=function p_(e,r){return e&&e.length?af(e,Ae(r,2)):[]},w.split=function G1(e,r,s){return s&&"number"!=typeof s&&Ir(e,r,s)&&(r=s=t),(s=s===t?_n:s>>>0)?(e=nt(e))&&("string"==typeof r||null!=r&&!Rc(r))&&!(r=Mr(r))&&Ei(e)?Wn(on(e),0,s):e.split(r,s):[]},w.spread=function bm(e,r){if("function"!=typeof e)throw new Vr(f);return r=null==r?0:rr(Ue(r),0),Be(function(s){var l=s[r],g=Wn(s,0,r);return l&&Hn(g,l),jr(e,this,g)})},w.tail=function g_(e){var r=null==e?0:e.length;return r?Gr(e,1,r):[]},w.take=function y_(e,r,s){return e&&e.length?Gr(e,0,(r=s||r===t?1:Ue(r))<0?0:r):[]},w.takeRight=function v_(e,r,s){var l=null==e?0:e.length;return l?Gr(e,(r=l-(r=s||r===t?1:Ue(r)))<0?0:r,l):[]},w.takeRightWhile=function __(e,r){return e&&e.length?go(e,Ae(r,3),!1,!0):[]},w.takeWhile=function m_(e,r){return e&&e.length?go(e,Ae(r,3)):[]},w.tap=function L_(e,r){return r(e),e},w.throttle=function wm(e,r,s){var l=!0,g=!0;if("function"!=typeof e)throw new Vr(f);return Dt(s)&&(l="leading"in s?!!s.leading:l,g="trailing"in s?!!s.trailing:g),rh(e,r,{leading:l,maxWait:r,trailing:g})},w.thru=Io,w.toArray=ch,w.toPairs=ph,w.toPairsIn=gh,w.toPath=function Rb(e){return ze(e)?St(e,wn):Zr(e)?[e]:Ar(zf(nt(e)))},w.toPlainObject=lh,w.transform=function S1(e,r,s){var l=ze(e),g=l||Jn(e)||Ni(e);if(r=Ae(r,4),null==s){var I=e&&e.constructor;s=g?l?new I:[]:Dt(e)&&Ln(I)?Ai(to(e)):{}}return(g?Br:mn)(e,function(A,T,M){return r(s,A,T,M)}),s},w.unary=function xm(e){return Qf(e,1)},w.union=b_,w.unionBy=w_,w.unionWith=x_,w.uniq=function E_(e){return e&&e.length?Kn(e):[]},w.uniqBy=function I_(e,r){return e&&e.length?Kn(e,Ae(r,2)):[]},w.uniqWith=function P_(e,r){return r="function"==typeof r?r:t,e&&e.length?Kn(e,t,r):[]},w.unset=function O1(e,r){return null==e||ac(e,r)},w.unzip=Ic,w.unzipWith=Kf,w.update=function R1(e,r,s){return null==e?e:uf(e,r,lc(s))},w.updateWith=function A1(e,r,s,l){return l="function"==typeof l?l:t,null==e?e:uf(e,r,lc(s),l)},w.values=Li,w.valuesIn=function T1(e){return null==e?[]:$a(e,Cr(e))},w.without=S_,w.words=_h,w.wrap=function Em(e,r){return Sc(lc(r),e)},w.xor=O_,w.xorBy=R_,w.xorWith=A_,w.zip=T_,w.zipObject=function C_(e,r){return ff(e||[],r||[],is)},w.zipObjectDeep=function D_(e,r){return ff(e||[],r||[],cs)},w.zipWith=N_,w.entries=ph,w.entriesIn=gh,w.extend=fh,w.extendWith=Co,Lc(w,w),w.add=Tb,w.attempt=mh,w.camelCase=L1,w.capitalize=yh,w.ceil=Cb,w.clamp=function C1(e,r,s){return s===t&&(s=r,r=t),s!==t&&(s=(s=Jr(s))==s?s:0),r!==t&&(r=(r=Jr(r))==r?r:0),ui(Jr(e),r,s)},w.clone=function Pm(e){return Kr(e,4)},w.cloneDeep=function Om(e){return Kr(e,5)},w.cloneDeepWith=function Rm(e,r){return Kr(e,5,r="function"==typeof r?r:t)},w.cloneWith=function Sm(e,r){return Kr(e,4,r="function"==typeof r?r:t)},w.conformsTo=function Am(e,r){return null==r||Hl(e,r,cr(r))},w.deburr=vh,w.defaultTo=function ub(e,r){return null==e||e!=e?r:e},w.divide=Db,w.endsWith=function j1(e,r,s){e=nt(e),r=Mr(r);var l=e.length,g=s=s===t?l:ui(Ue(s),0,l);return(s-=r.length)>=0&&e.slice(s,g)==r},w.eq=cn,w.escape=function F1(e){return(e=nt(e))&&yg.test(e)?e.replace(Ku,Py):e},w.escapeRegExp=function M1(e){return(e=nt(e))&&xg.test(e)?e.replace(Sa,"\\$&"):e},w.every=function B_(e,r,s){var l=ze(e)?xl:L0;return s&&Ir(e,r,s)&&(r=t),l(e,Ae(r,3))},w.find=k_,w.findIndex=$f,w.findKey=function s1(e,r){return El(e,Ae(r,3),mn)},w.findLast=K_,w.findLastIndex=Hf,w.findLastKey=function o1(e,r){return El(e,Ae(r,3),Qa)},w.floor=Nb,w.forEach=Wf,w.forEachRight=Jf,w.forIn=function a1(e,r){return null==e?e:Ja(e,Ae(r,3),Cr)},w.forInRight=function c1(e,r){return null==e?e:Kl(e,Ae(r,3),Cr)},w.forOwn=function u1(e,r){return e&&mn(e,Ae(r,3))},w.forOwnRight=function l1(e,r){return e&&Qa(e,Ae(r,3))},w.get=Ac,w.gt=Tm,w.gte=Cm,w.has=function d1(e,r){return null!=e&&Cf(e,r,F0)},w.hasIn=Tc,w.head=Vf,w.identity=Dr,w.includes=function Y_(e,r,s,l){e=Tr(e)?e:Li(e),s=s&&!l?Ue(s):0;var g=e.length;return s<0&&(s=rr(g+s,0)),To(e)?s<=g&&e.indexOf(r,s)>-1:!!g&&xi(e,r,s)>-1},w.indexOf=function Kv(e,r,s){var l=null==e?0:e.length;if(!l)return-1;var g=null==s?0:Ue(s);return g<0&&(g=rr(l+g,0)),xi(e,r,g)},w.inRange=function D1(e,r,s){return r=jn(r),s===t?(s=r,r=0):s=jn(s),function Z0(e,r,s){return e>=_r(r,s)&&e<rr(r,s)}(e=Jr(e),r,s)},w.invoke=y1,w.isArguments=di,w.isArray=ze,w.isArrayBuffer=Dm,w.isArrayLike=Tr,w.isArrayLikeObject=qt,w.isBoolean=function Nm(e){return!0===e||!1===e||Lt(e)&&Er(e)==Vi},w.isBuffer=Jn,w.isDate=Lm,w.isElement=function jm(e){return Lt(e)&&1===e.nodeType&&!hs(e)},w.isEmpty=function Fm(e){if(null==e)return!0;if(Tr(e)&&(ze(e)||"string"==typeof e||"function"==typeof e.splice||Jn(e)||Ni(e)||di(e)))return!e.length;var r=mr(e);if(r==nn||r==sn)return!e.size;if(ls(e))return!tc(e).length;for(var s in e)if(st.call(e,s))return!1;return!0},w.isEqual=function Mm(e,r){return as(e,r)},w.isEqualWith=function Zm(e,r,s){var l=(s="function"==typeof s?s:t)?s(e,r):t;return l===t?as(e,r,t,s):!!l},w.isError=Oc,w.isFinite=function qm(e){return"number"==typeof e&&Ml(e)},w.isFunction=Ln,w.isInteger=ih,w.isLength=Ao,w.isMap=sh,w.isMatch=function zm(e,r){return e===r||ec(e,r,vc(r))},w.isMatchWith=function Um(e,r,s){return s="function"==typeof s?s:t,ec(e,r,vc(r),s)},w.isNaN=function $m(e){return oh(e)&&e!=+e},w.isNative=function Hm(e){if(Sv(e))throw new Ze("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Jl(e)},w.isNil=function Vm(e){return null==e},w.isNull=function Bm(e){return null===e},w.isNumber=oh,w.isObject=Dt,w.isObjectLike=Lt,w.isPlainObject=hs,w.isRegExp=Rc,w.isSafeInteger=function km(e){return ih(e)&&e>=-Un&&e<=Un},w.isSet=ah,w.isString=To,w.isSymbol=Zr,w.isTypedArray=Ni,w.isUndefined=function Km(e){return e===t},w.isWeakMap=function Gm(e){return Lt(e)&&mr(e)==Ji},w.isWeakSet=function Wm(e){return Lt(e)&&"[object WeakSet]"==Er(e)},w.join=function Yv(e,r){return null==e?"":Gy.call(e,r)},w.kebabCase=Z1,w.last=Wr,w.lastIndexOf=function Xv(e,r,s){var l=null==e?0:e.length;if(!l)return-1;var g=l;return s!==t&&(g=(g=Ue(s))<0?rr(l+g,0):_r(g,l-1)),r==r?function Dy(F,K,H){for(var be=H+1;be--;)if(F[be]===K)return be;return be}(e,r,g):Ks(e,Il,g,!0)},w.lowerCase=q1,w.lowerFirst=z1,w.lt=Jm,w.lte=Qm,w.max=function Lb(e){return e&&e.length?lo(e,Dr,Ya):t},w.maxBy=function jb(e,r){return e&&e.length?lo(e,Ae(r,2),Ya):t},w.mean=function Fb(e){return Pl(e,Dr)},w.meanBy=function Mb(e,r){return Pl(e,Ae(r,2))},w.min=function Zb(e){return e&&e.length?lo(e,Dr,rc):t},w.minBy=function qb(e,r){return e&&e.length?lo(e,Ae(r,2),rc):t},w.stubArray=Fc,w.stubFalse=Mc,w.stubObject=function Ib(){return{}},w.stubString=function Pb(){return""},w.stubTrue=function Sb(){return!0},w.multiply=zb,w.nth=function e_(e,r){return e&&e.length?tf(e,Ue(r)):t},w.noConflict=function yb(){return hr._===this&&(hr._=$y),this},w.noop=jc,w.now=So,w.pad=function U1(e,r,s){e=nt(e);var l=(r=Ue(r))?Ii(e):0;if(!r||l>=r)return e;var g=(r-l)/2;return mo(so(g),s)+e+mo(io(g),s)},w.padEnd=function $1(e,r,s){e=nt(e);var l=(r=Ue(r))?Ii(e):0;return r&&l<r?e+mo(r-l,s):e},w.padStart=function H1(e,r,s){e=nt(e);var l=(r=Ue(r))?Ii(e):0;return r&&l<r?mo(r-l,s)+e:e},w.parseInt=function B1(e,r,s){return s||null==r?r=0:r&&(r=+r),Qy(nt(e).replace(Oa,""),r||0)},w.random=function N1(e,r,s){if(s&&"boolean"!=typeof s&&Ir(e,r,s)&&(r=s=t),s===t&&("boolean"==typeof r?(s=r,r=t):"boolean"==typeof e&&(s=e,e=t)),e===t&&r===t?(e=0,r=1):(e=jn(e),r===t?(r=e,e=0):r=jn(r)),e>r){var l=e;e=r,r=l}if(s||e%1||r%1){var g=Zl();return _r(e+g*(r-e+fy("1e-"+((g+"").length-1))),r)}return ic(e,r)},w.reduce=function nm(e,r,s){var l=ze(e)?Fa:Sl,g=arguments.length<3;return l(e,Ae(r,4),s,g,kn)},w.reduceRight=function im(e,r,s){var l=ze(e)?yy:Sl,g=arguments.length<3;return l(e,Ae(r,4),s,g,Vl)},w.repeat=function V1(e,r,s){return r=(s?Ir(e,r,s):r===t)?1:Ue(r),sc(nt(e),r)},w.replace=function k1(){var e=arguments,r=nt(e[0]);return e.length<3?r:r.replace(e[1],e[2])},w.result=function E1(e,r,s){var l=-1,g=(r=Gn(r,e)).length;for(g||(g=1,e=t);++l<g;){var I=null==e?t:e[wn(r[l])];I===t&&(l=g,I=s),e=Ln(I)?I.call(e):I}return e},w.round=Ub,w.runInContext=F,w.sample=function om(e){return(ze(e)?Ul:Y0)(e)},w.size=function um(e){if(null==e)return 0;if(Tr(e))return To(e)?Ii(e):e.length;var r=mr(e);return r==nn||r==sn?e.size:tc(e).length},w.snakeCase=K1,w.some=function lm(e,r,s){var l=ze(e)?Ma:rv;return s&&Ir(e,r,s)&&(r=t),l(e,Ae(r,3))},w.sortedIndex=function a_(e,r){return po(e,r)},w.sortedIndexBy=function c_(e,r,s){return oc(e,r,Ae(s,2))},w.sortedIndexOf=function u_(e,r){var s=null==e?0:e.length;if(s){var l=po(e,r);if(l<s&&cn(e[l],r))return l}return-1},w.sortedLastIndex=function l_(e,r){return po(e,r,!0)},w.sortedLastIndexBy=function f_(e,r,s){return oc(e,r,Ae(s,2),!0)},w.sortedLastIndexOf=function h_(e,r){if(null!=e&&e.length){var l=po(e,r,!0)-1;if(cn(e[l],r))return l}return-1},w.startCase=W1,w.startsWith=function J1(e,r,s){return e=nt(e),s=null==s?0:ui(Ue(s),0,e.length),r=Mr(r),e.slice(s,s+r.length)==r},w.subtract=$b,w.sum=function Hb(e){return e&&e.length?za(e,Dr):0},w.sumBy=function Bb(e,r){return e&&e.length?za(e,Ae(r,2)):0},w.template=function Q1(e,r,s){var l=w.templateSettings;s&&Ir(e,r,s)&&(r=t),e=nt(e),r=Co({},r,l,Of);var T,M,g=Co({},r.imports,l.imports,Of),I=cr(g),A=$a(g,I),Y=0,ee=r.interpolate||Hs,oe="__p += '",ye=Ba((r.escape||Hs).source+"|"+ee.source+"|"+(ee===Gu?Tg:Hs).source+"|"+(r.evaluate||Hs).source+"|$","g"),Ee="//# sourceURL="+(st.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++oy+"]")+"\n";e.replace(ye,function(Ce,Ke,Ye,qr,Pr,zr){return Ye||(Ye=qr),oe+=e.slice(Y,zr).replace(Mg,Sy),Ke&&(T=!0,oe+="' +\n__e("+Ke+") +\n'"),Pr&&(M=!0,oe+="';\n"+Pr+";\n__p += '"),Ye&&(oe+="' +\n((__t = ("+Ye+")) == null ? '' : __t) +\n'"),Y=zr+Ce.length,Ce}),oe+="';\n";var Te=st.call(r,"variable")&&r.variable;if(Te){if(Rg.test(Te))throw new Ze("Invalid `variable` option passed into `_.template`")}else oe="with (obj) {\n"+oe+"\n}\n";oe=(M?oe.replace(hg,""):oe).replace(dg,"$1").replace(pg,"$1;"),oe="function("+(Te||"obj")+") {\n"+(Te?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(T?", __e = _.escape":"")+(M?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+oe+"return __p\n}";var He=mh(function(){return tt(I,Ee+"return "+oe).apply(t,A)});if(He.source=oe,Oc(He))throw He;return He},w.times=function Ob(e,r){if((e=Ue(e))<1||e>Un)return[];var s=_n,l=_r(e,_n);r=Ae(r),e-=_n;for(var g=Ua(l,r);++s<e;)r(s);return g},w.toFinite=jn,w.toInteger=Ue,w.toLength=uh,w.toLower=function Y1(e){return nt(e).toLowerCase()},w.toNumber=Jr,w.toSafeInteger=function Ym(e){return e?ui(Ue(e),-Un,Un):0===e?e:0},w.toString=nt,w.toUpper=function X1(e){return nt(e).toUpperCase()},w.trim=function eb(e,r,s){if((e=nt(e))&&(s||r===t))return Ol(e);if(!e||!(r=Mr(r)))return e;var l=on(e),g=on(r);return Wn(l,Rl(l,g),Al(l,g)+1).join("")},w.trimEnd=function tb(e,r,s){if((e=nt(e))&&(s||r===t))return e.slice(0,Cl(e)+1);if(!e||!(r=Mr(r)))return e;var l=on(e);return Wn(l,0,Al(l,on(r))+1).join("")},w.trimStart=function rb(e,r,s){if((e=nt(e))&&(s||r===t))return e.replace(Oa,"");if(!e||!(r=Mr(r)))return e;var l=on(e);return Wn(l,Rl(l,on(r))).join("")},w.truncate=function nb(e,r){var s=30,l="...";if(Dt(r)){var g="separator"in r?r.separator:g;s="length"in r?Ue(r.length):s,l="omission"in r?Mr(r.omission):l}var I=(e=nt(e)).length;if(Ei(e)){var A=on(e);I=A.length}if(s>=I)return e;var T=s-Ii(l);if(T<1)return l;var M=A?Wn(A,0,T).join(""):e.slice(0,T);if(g===t)return M+l;if(A&&(T+=M.length-T),Rc(g)){if(e.slice(T).search(g)){var Y,ee=M;for(g.global||(g=Ba(g.source,nt(Wu.exec(g))+"g")),g.lastIndex=0;Y=g.exec(ee);)var oe=Y.index;M=M.slice(0,oe===t?T:oe)}}else if(e.indexOf(Mr(g),T)!=T){var ye=M.lastIndexOf(g);ye>-1&&(M=M.slice(0,ye))}return M+l},w.unescape=function ib(e){return(e=nt(e))&&gg.test(e)?e.replace(ku,Ny):e},w.uniqueId=function Ab(e){var r=++zy;return nt(e)+r},w.upperCase=sb,w.upperFirst=Cc,w.each=Wf,w.eachRight=Jf,w.first=Vf,Lc(w,function(){var e={};return mn(w,function(r,s){st.call(w.prototype,s)||(e[s]=r)}),e}(),{chain:!1}),w.VERSION="4.17.21",Br(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){w[e].placeholder=w}),Br(["drop","take"],function(e,r){We.prototype[e]=function(s){s=s===t?1:rr(Ue(s),0);var l=this.__filtered__&&!r?new We(this):this.clone();return l.__filtered__?l.__takeCount__=_r(s,l.__takeCount__):l.__views__.push({size:_r(s,_n),type:e+(l.__dir__<0?"Right":"")}),l},We.prototype[e+"Right"]=function(s){return this.reverse()[e](s).reverse()}}),Br(["filter","map","takeWhile"],function(e,r){var s=r+1,l=1==s||3==s;We.prototype[e]=function(g){var I=this.clone();return I.__iteratees__.push({iteratee:Ae(g,3),type:s}),I.__filtered__=I.__filtered__||l,I}}),Br(["head","last"],function(e,r){var s="take"+(r?"Right":"");We.prototype[e]=function(){return this[s](1).value()[0]}}),Br(["initial","tail"],function(e,r){var s="drop"+(r?"":"Right");We.prototype[e]=function(){return this.__filtered__?new We(this):this[s](1)}}),We.prototype.compact=function(){return this.filter(Dr)},We.prototype.find=function(e){return this.filter(e).head()},We.prototype.findLast=function(e){return this.reverse().find(e)},We.prototype.invokeMap=Be(function(e,r){return"function"==typeof e?new We(this):this.map(function(s){return os(s,e,r)})}),We.prototype.reject=function(e){return this.filter(Ro(Ae(e)))},We.prototype.slice=function(e,r){e=Ue(e);var s=this;return s.__filtered__&&(e>0||r<0)?new We(s):(e<0?s=s.takeRight(-e):e&&(s=s.drop(e)),r!==t&&(s=(r=Ue(r))<0?s.dropRight(-r):s.take(r-e)),s)},We.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},We.prototype.toArray=function(){return this.take(_n)},mn(We.prototype,function(e,r){var s=/^(?:filter|find|map|reject)|While$/.test(r),l=/^(?:head|last)$/.test(r),g=w[l?"take"+("last"==r?"Right":""):r],I=l||/^find/.test(r);g&&(w.prototype[r]=function(){var A=this.__wrapped__,T=l?[1]:arguments,M=A instanceof We,Y=T[0],ee=M||ze(A),oe=function(Ke){var Ye=g.apply(w,Hn([Ke],T));return l&&ye?Ye[0]:Ye};ee&&s&&"function"==typeof Y&&1!=Y.length&&(M=ee=!1);var ye=this.__chain__,Te=I&&!ye,He=M&&!this.__actions__.length;if(!I&&ee){A=He?A:new We(this);var Ce=e.apply(A,T);return Ce.__actions__.push({func:Io,args:[oe],thisArg:t}),new kr(Ce,ye)}return Te&&He?e.apply(this,T):(Ce=this.thru(oe),Te?l?Ce.value()[0]:Ce.value():Ce)})}),Br(["pop","push","shift","sort","splice","unshift"],function(e){var r=Ws[e],s=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",l=/^(?:pop|shift)$/.test(e);w.prototype[e]=function(){var g=arguments;if(l&&!this.__chain__){var I=this.value();return r.apply(ze(I)?I:[],g)}return this[s](function(A){return r.apply(ze(A)?A:[],g)})}}),mn(We.prototype,function(e,r){var s=w[r];if(s){var l=s.name+"";st.call(Ri,l)||(Ri[l]=[]),Ri[l].push({name:r,func:s})}}),Ri[vo(t,2).name]=[{name:"wrapper",func:t}],We.prototype.clone=function i0(){var e=new We(this.__wrapped__);return e.__actions__=Ar(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ar(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ar(this.__views__),e},We.prototype.reverse=function s0(){if(this.__filtered__){var e=new We(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},We.prototype.value=function o0(){var e=this.__wrapped__.value(),r=this.__dir__,s=ze(e),l=r<0,g=s?e.length:0,I=function _v(e,r,s){for(var l=-1,g=s.length;++l<g;){var I=s[l],A=I.size;switch(I.type){case"drop":e+=A;break;case"dropRight":r-=A;break;case"take":r=_r(r,e+A);break;case"takeRight":e=rr(e,r-A)}}return{start:e,end:r}}(0,g,this.__views__),A=I.start,T=I.end,M=T-A,Y=l?T:A-1,ee=this.__iteratees__,oe=ee.length,ye=0,Ee=_r(M,this.__takeCount__);if(!s||!l&&g==M&&Ee==M)return lf(e,this.__actions__);var Te=[];e:for(;M--&&ye<Ee;){for(var He=-1,Ce=e[Y+=r];++He<oe;){var Ke=ee[He],qr=Ke.type,Pr=(0,Ke.iteratee)(Ce);if(2==qr)Ce=Pr;else if(!Pr){if(1==qr)continue e;break e}}Te[ye++]=Ce}return Te},w.prototype.at=j_,w.prototype.chain=function F_(){return Gf(this)},w.prototype.commit=function M_(){return new kr(this.value(),this.__chain__)},w.prototype.next=function Z_(){this.__values__===t&&(this.__values__=ch(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?t:this.__values__[this.__index__++]}},w.prototype.plant=function z_(e){for(var r,s=this;s instanceof co;){var l=Uf(s);l.__index__=0,l.__values__=t,r?g.__wrapped__=l:r=l;var g=l;s=s.__wrapped__}return g.__wrapped__=e,r},w.prototype.reverse=function U_(){var e=this.__wrapped__;if(e instanceof We){var r=e;return this.__actions__.length&&(r=new We(this)),(r=r.reverse()).__actions__.push({func:Io,args:[Ec],thisArg:t}),new kr(r,this.__chain__)}return this.thru(Ec)},w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=function $_(){return lf(this.__wrapped__,this.__actions__)},w.prototype.first=w.prototype.head,Xi&&(w.prototype[Xi]=function q_(){return this}),w}();si?((si.exports=Pi)._=Pi,Na._=Pi):hr._=Pi}.call(Hi);var gp=Object.defineProperty,yp=Object.defineProperties,vp=Object.getOwnPropertyDescriptors,Cu=Object.getOwnPropertySymbols,_p=Object.prototype.hasOwnProperty,mp=Object.prototype.propertyIsEnumerable,Du=(y,n,t)=>n in y?gp(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t,Ds=(y,n)=>{for(var t in n||(n={}))_p.call(n,t)&&Du(y,t,n[t]);if(Cu)for(var t of Cu(n))mp.call(n,t)&&Du(y,t,n[t]);return y},bp=(y,n)=>yp(y,vp(n));function qn(y,n,t){var o;const a=(0,x.DQ)(y);return(null==(o=n.rpcMap)?void 0:o[a.reference])||`https://rpc.walletconnect.com/v1/?chainId=${a.namespace}:${a.reference}&projectId=${t}`}function ni(y){return y.includes(":")?y.split(":")[1]:y}function Nu(y){return y.map(n=>`${n.split(":")[0]}:${n.split(":")[1]}`)}function Lu(y){var n,t,o,a;const u={};if(!(0,x.L5)(y))return u;for(const[f,P]of Object.entries(y)){const C=(0,x.gp)(f)?[f]:P.chains,z=P.methods||[],W=P.events||[],pe=P.rpcMap||{},Oe=(0,x.M)(f);u[Oe]=bp(Ds(Ds({},u[Oe]),P),{chains:(0,x.eG)(C,null==(n=u[Oe])?void 0:n.chains),methods:(0,x.eG)(z,null==(t=u[Oe])?void 0:t.methods),events:(0,x.eG)(W,null==(o=u[Oe])?void 0:o.events),rpcMap:Ds(Ds({},pe),null==(a=u[Oe])?void 0:a.rpcMap)})}return u}function Ep(y){return y.includes(":")?y.split(":")[2]:y}function Ip(y){const n={};for(const[t,o]of Object.entries(y)){const a=o.methods||[],u=o.events||[],f=o.accounts||[],P=(0,x.gp)(t)?[t]:o.chains?o.chains:Nu(o.accounts);n[t]={chains:P,methods:a,events:u,accounts:f}}return n}function ha(y){return"number"==typeof y?y:y.includes("0x")?parseInt(y,16):y.includes(":")?Number(y.split(":")[1]):Number(y)}const ju={},Pt=y=>ju[y],da=(y,n)=>{ju[y]=n};class Pp{constructor(n){this.name="polkadot",this.namespace=n.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,t){this.httpProviders[n]||this.setHttpProvider(n,t),this.chainId=n,this.events.emit("default_chain_changed",`${this.name}:${n}`)}getAccounts(){const n=this.namespace.accounts;return n&&n.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(t=>{var o;const a=ni(t);n[a]=this.createHttpProvider(a,null==(o=this.namespace.rpcMap)?void 0:o[t])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,t=this.httpProviders[n];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return t}setHttpProvider(n,t){const o=this.createHttpProvider(n,t);o&&(this.httpProviders[n]=o)}createHttpProvider(n,t){const o=t||qn(n,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new Sr(new ri(o,Pt("disableProviderPing")))}}class Sp{constructor(n){this.name="eip155",this.namespace=n.namespace,this.events=Pt("events"),this.client=Pt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}request(n){var t=this;return(0,m.Z)(function*(){switch(n.request.method){case"eth_requestAccounts":case"eth_accounts":return t.getAccounts();case"wallet_switchEthereumChain":return yield t.handleSwitchChain(n);case"eth_chainId":return parseInt(t.getDefaultChain())}return t.namespace.methods.includes(n.request.method)?yield t.client.request(n):t.getHttpProvider().request(n.request)})()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}setDefaultChain(n,t){this.httpProviders[n]||this.setHttpProvider(parseInt(n),t),this.chainId=parseInt(n),this.events.emit("default_chain_changed",`${this.name}:${n}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}createHttpProvider(n,t){const o=t||qn(`${this.name}:${n}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new Sr(new Ru(o,Pt("disableProviderPing")))}setHttpProvider(n,t){const o=this.createHttpProvider(n,t);o&&(this.httpProviders[n]=o)}createHttpProviders(){const n={};return this.namespace.chains.forEach(t=>{var o;const a=parseInt(ni(t));n[a]=this.createHttpProvider(a,null==(o=this.namespace.rpcMap)?void 0:o[t])}),n}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const n=this.chainId,t=this.httpProviders[n];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return t}handleSwitchChain(n){var t=this;return(0,m.Z)(function*(){var o,a;let u=n.request.params?null==(o=n.request.params[0])?void 0:o.chainId:"0x0";u=u.startsWith("0x")?u:`0x${u}`;const f=parseInt(u,16);if(t.isChainApproved(f))t.setDefaultChain(`${f}`);else{if(!t.namespace.methods.includes("wallet_switchEthereumChain"))throw new Error(`Failed to switch to chain 'eip155:${f}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);yield t.client.request({topic:n.topic,request:{method:n.request.method,params:[{chainId:u}]},chainId:null==(a=t.namespace.chains)?void 0:a[0]}),t.setDefaultChain(`${f}`)}return null})()}isChainApproved(n){return this.namespace.chains.includes(`${this.name}:${n}`)}}class Op{constructor(n){this.name="solana",this.namespace=n.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,t){this.httpProviders[n]||this.setHttpProvider(n,t),this.chainId=n,this.events.emit("default_chain_changed",`${this.name}:${n}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(t=>{var o;const a=ni(t);n[a]=this.createHttpProvider(a,null==(o=this.namespace.rpcMap)?void 0:o[t])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,t=this.httpProviders[n];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return t}setHttpProvider(n,t){const o=this.createHttpProvider(n,t);o&&(this.httpProviders[n]=o)}createHttpProvider(n,t){const o=t||qn(n,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new Sr(new ri(o,Pt("disableProviderPing")))}}class Rp{constructor(n){this.name="cosmos",this.namespace=n.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,t){this.httpProviders[n]||this.setHttpProvider(n,t),this.chainId=n,this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(t=>{var o;const a=ni(t);n[a]=this.createHttpProvider(a,null==(o=this.namespace.rpcMap)?void 0:o[t])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,t=this.httpProviders[n];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return t}setHttpProvider(n,t){const o=this.createHttpProvider(n,t);o&&(this.httpProviders[n]=o)}createHttpProvider(n,t){const o=t||qn(n,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new Sr(new ri(o,Pt("disableProviderPing")))}}class Ap{constructor(n){this.name="cip34",this.namespace=n.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,t){this.httpProviders[n]||this.setHttpProvider(n,t),this.chainId=n,this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(t=>{const o=this.getCardanoRPCUrl(t),a=ni(t);n[a]=this.createHttpProvider(a,o)}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,t=this.httpProviders[n];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return t}getCardanoRPCUrl(n){const t=this.namespace.rpcMap;if(t)return t[n]}setHttpProvider(n,t){const o=this.createHttpProvider(n,t);o&&(this.httpProviders[n]=o)}createHttpProvider(n,t){const o=t||this.getCardanoRPCUrl(n);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new Sr(new ri(o,Pt("disableProviderPing")))}}class Tp{constructor(n){this.name="elrond",this.namespace=n.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,t){this.httpProviders[n]||this.setHttpProvider(n,t),this.chainId=n,this.events.emit("default_chain_changed",`${this.name}:${n}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(t=>{var o;const a=ni(t);n[a]=this.createHttpProvider(a,null==(o=this.namespace.rpcMap)?void 0:o[t])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,t=this.httpProviders[n];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return t}setHttpProvider(n,t){const o=this.createHttpProvider(n,t);o&&(this.httpProviders[n]=o)}createHttpProvider(n,t){const o=t||qn(n,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new Sr(new ri(o,Pt("disableProviderPing")))}}class Cp{constructor(n){this.name="multiversx",this.namespace=n.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,t){this.httpProviders[n]||this.setHttpProvider(n,t),this.chainId=n,this.events.emit("default_chain_changed",`${this.name}:${n}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(t=>{var o;const a=ni(t);n[a]=this.createHttpProvider(a,null==(o=this.namespace.rpcMap)?void 0:o[t])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,t=this.httpProviders[n];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return t}setHttpProvider(n,t){const o=this.createHttpProvider(n,t);o&&(this.httpProviders[n]=o)}createHttpProvider(n,t){const o=t||qn(n,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new Sr(new ri(o,Pt("disableProviderPing")))}}class Dp{constructor(n){this.name="near",this.namespace=n.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,t){if(this.chainId=n,!this.httpProviders[n]){const o=t||qn(`${this.name}:${n}`,this.namespace);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);this.setHttpProvider(n,o)}this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getAccounts(){const n=this.namespace.accounts;return n&&n.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(t=>{var o;n[t]=this.createHttpProvider(t,null==(o=this.namespace.rpcMap)?void 0:o[t])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,t=this.httpProviders[n];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return t}setHttpProvider(n,t){const o=this.createHttpProvider(n,t);o&&(this.httpProviders[n]=o)}createHttpProvider(n,t){const o=t||qn(n,this.namespace);return typeof o>"u"?void 0:new Sr(new ri(o,Pt("disableProviderPing")))}}var Np=Object.defineProperty,Lp=Object.defineProperties,jp=Object.getOwnPropertyDescriptors,Fu=Object.getOwnPropertySymbols,Fp=Object.prototype.hasOwnProperty,Mp=Object.prototype.propertyIsEnumerable,Mu=(y,n,t)=>n in y?Np(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t,Ns=(y,n)=>{for(var t in n||(n={}))Fp.call(n,t)&&Mu(y,t,n[t]);if(Fu)for(var t of Fu(n))Mp.call(n,t)&&Mu(y,t,n[t]);return y},pa=(y,n)=>Lp(y,jp(n));class ga{constructor(n){this.events=new(ve()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=n,this.logger=typeof n?.logger<"u"&&"string"!=typeof n?.logger?n.logger:(0,he.pino)((0,he.getDefaultLoggerOptions)({level:n?.logger||"error"})),this.disableProviderPing=n?.disableProviderPing||!1}static init(n){return(0,m.Z)(function*(){const t=new ga(n);return yield t.initialize(),t})()}request(n,t){var o=this;return(0,m.Z)(function*(){const[a,u]=o.validateChain(t);if(!o.session)throw new Error("Please call connect() before request()");return yield o.getProvider(a).request({request:Ns({},n),chainId:`${a}:${u}`,topic:o.session.topic})})()}sendAsync(n,t,o){this.request(n,o).then(a=>t(null,a)).catch(a=>t(a,void 0))}enable(){var n=this;return(0,m.Z)(function*(){if(!n.client)throw new Error("Sign Client not initialized");return n.session||(yield n.connect({namespaces:n.namespaces,optionalNamespaces:n.optionalNamespaces,sessionProperties:n.sessionProperties})),yield n.requestAccounts()})()}disconnect(){var n=this;return(0,m.Z)(function*(){var t;if(!n.session)throw new Error("Please call connect() before enable()");yield n.client.disconnect({topic:null==(t=n.session)?void 0:t.topic,reason:(0,x.D6)("USER_DISCONNECTED")}),yield n.cleanup()})()}connect(n){var t=this;return(0,m.Z)(function*(){if(!t.client)throw new Error("Sign Client not initialized");if(t.setNamespaces(n),yield t.cleanupPendingPairings(),!n.skipPairing)return yield t.pair(n.pairingTopic)})()}on(n,t){this.events.on(n,t)}once(n,t){this.events.once(n,t)}removeListener(n,t){this.events.removeListener(n,t)}off(n,t){this.events.off(n,t)}get isWalletConnect(){return!0}pair(n){var t=this;return(0,m.Z)(function*(){t.shouldAbortPairingAttempt=!1;let o=0;do{if(t.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(o>=t.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:a,approval:u}=yield t.client.connect({pairingTopic:n,requiredNamespaces:t.namespaces,optionalNamespaces:t.optionalNamespaces,sessionProperties:t.sessionProperties});a&&(t.uri=a,t.events.emit("display_uri",a)),yield u().then(f=>{t.session=f,t.namespaces||(t.namespaces=Ip(f.namespaces),t.persist("namespaces",t.namespaces))}).catch(f=>{if(f.message!==xu)throw f;o++})}while(!t.session);return t.onConnect(),t.session})()}setDefaultChain(n,t){try{if(!this.session)return;const[o,a]=this.validateChain(n);this.getProvider(o).setDefaultChain(a,t)}catch(o){if(!/Please call connect/.test(o.message))throw o}}cleanupPendingPairings(n={}){var t=this;return(0,m.Z)(function*(){t.logger.info("Cleaning up inactive pairings...");const o=t.client.pairing.getAll();if((0,x.qt)(o)){for(const a of o)n.deletePairings?t.client.core.expirer.set(a.topic,0):yield t.client.core.relayer.subscriber.unsubscribe(a.topic);t.logger.info(`Inactive pairings cleared: ${o.length}`)}})()}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}checkStorage(){var n=this;return(0,m.Z)(function*(){n.namespaces=yield n.getFromStore("namespaces"),n.optionalNamespaces=(yield n.getFromStore("optionalNamespaces"))||{},n.client.session.length&&(n.session=n.client.session.get(n.client.session.keys[n.client.session.keys.length-1]),n.createProviders())})()}initialize(){var n=this;return(0,m.Z)(function*(){n.logger.trace("Initialized"),yield n.createClient(),yield n.checkStorage(),n.registerEventListeners()})()}createClient(){var n=this;return(0,m.Z)(function*(){n.client=n.providerOpts.client||(yield la.init({logger:n.providerOpts.logger||"error",relayUrl:n.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:n.providerOpts.projectId,metadata:n.providerOpts.metadata,storageOptions:n.providerOpts.storageOptions,storage:n.providerOpts.storage,name:n.providerOpts.name})),n.logger.trace("SignClient Initialized")})()}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const n=[...new Set(Object.keys(this.session.namespaces).map(t=>(0,x.M)(t)))];da("client",this.client),da("events",this.events),da("disableProviderPing",this.disableProviderPing),n.forEach(t=>{if(!this.session)return;const o=function wp(y,n){const t=Object.keys(n.namespaces).filter(a=>a.includes(y));if(!t.length)return[];const o=[];return t.forEach(a=>{o.push(...n.namespaces[a].accounts)}),o}(t,this.session),a=Nu(o),u=function xp(y={},n={}){const t=Lu(y),o=Lu(n);return fa.exports.merge(t,o)}(this.namespaces,this.optionalNamespaces),f=pa(Ns({},u[t]),{accounts:o,chains:a});switch(t){case"eip155":this.rpcProviders[t]=new Sp({namespace:f});break;case"solana":this.rpcProviders[t]=new Op({namespace:f});break;case"cosmos":this.rpcProviders[t]=new Rp({namespace:f});break;case"polkadot":this.rpcProviders[t]=new Pp({namespace:f});break;case"cip34":this.rpcProviders[t]=new Ap({namespace:f});break;case"elrond":this.rpcProviders[t]=new Tp({namespace:f});break;case"multiversx":this.rpcProviders[t]=new Cp({namespace:f});break;case"near":this.rpcProviders[t]=new Dp({namespace:f})}})}registerEventListeners(){var n=this;if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:o}=t,{event:a}=o;if("accountsChanged"===a.name){const u=a.data;u&&(0,x.qt)(u)&&this.events.emit("accountsChanged",u.map(Ep))}else if("chainChanged"===a.name){const u=o.chainId,f=o.event.data,P=(0,x.M)(u),C=ha(u)!==ha(f)?`${P}:${ha(f)}`:u;this.onChainChanged(C)}else this.events.emit(a.name,a.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:o})=>{var a;const{namespaces:u}=o,f=null==(a=this.client)?void 0:a.session.get(t);this.session=pa(Ns({},f),{namespaces:u}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:o})}),this.client.on("session_delete",function(){var t=(0,m.Z)(function*(o){yield n.cleanup(),n.events.emit("session_delete",o),n.events.emit("disconnect",pa(Ns({},(0,x.D6)("USER_DISCONNECTED")),{data:o.topic}))});return function(o){return t.apply(this,arguments)}}()),this.on("default_chain_changed",t=>{this.onChainChanged(t,!0)})}getProvider(n){if(!this.rpcProviders[n])throw new Error(`Provider not found: ${n}`);return this.rpcProviders[n]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(n=>{var t;this.getProvider(n).updateNamespace(null==(t=this.session)?void 0:t.namespaces[n])})}setNamespaces(n){const{namespaces:t,optionalNamespaces:o,sessionProperties:a}=n;t&&Object.keys(t).length&&(this.namespaces=t),o&&Object.keys(o).length&&(this.optionalNamespaces=o),this.sessionProperties=a,this.persist("namespaces",t),this.persist("optionalNamespaces",o)}validateChain(n){const[t,o]=n?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,o];if(t&&!Object.keys(this.namespaces||{}).map(f=>(0,x.M)(f)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&o)return[t,o];const a=(0,x.M)(Object.keys(this.namespaces)[0]);return[a,this.rpcProviders[a].getDefaultChain()]}requestAccounts(){var n=this;return(0,m.Z)(function*(){const[t]=n.validateChain();return yield n.getProvider(t).requestAccounts()})()}onChainChanged(n,t=!1){var o;if(!this.namespaces)return;const[a,u]=this.validateChain(n);t||this.getProvider(a).setDefaultChain(u),(null!=(o=this.namespaces[a])?o:this.namespaces[`${a}:${u}`]).defaultChain=u,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",u)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}cleanup(){var n=this;return(0,m.Z)(function*(){n.session=void 0,n.namespaces=void 0,n.optionalNamespaces=void 0,n.sessionProperties=void 0,n.persist("namespaces",void 0),n.persist("optionalNamespaces",void 0),n.persist("sessionProperties",void 0),yield n.cleanupPendingPairings({deletePairings:!0})})()}persist(n,t){this.client.core.storage.setItem(`${Tu}/${n}`,t)}getFromStore(n){var t=this;return(0,m.Z)(function*(){return yield t.client.core.storage.getItem(`${Tu}/${n}`)})()}}const Zp=ga,Ls=["eth_sendTransaction","personal_sign"],Zu=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],js=["chainChanged","accountsChanged"],qu=["chainChanged","accountsChanged","message","disconnect","connect"];var Hp=Object.defineProperty,Bp=Object.defineProperties,Vp=Object.getOwnPropertyDescriptors,zu=Object.getOwnPropertySymbols,kp=Object.prototype.hasOwnProperty,Kp=Object.prototype.propertyIsEnumerable,Uu=(y,n,t)=>n in y?Hp(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t,Bi=(y,n)=>{for(var t in n||(n={}))kp.call(n,t)&&Uu(y,t,n[t]);if(zu)for(var t of zu(n))Kp.call(n,t)&&Uu(y,t,n[t]);return y},$u=(y,n)=>Bp(y,Vp(n));function Fs(y){return Number(y[0].split(":")[1])}function ya(y){return`0x${y.toString(16)}`}class Ms{constructor(){this.events=new ae.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY="wc@2:ethereum_provider:",this.on=(n,t)=>(this.events.on(n,t),this),this.once=(n,t)=>(this.events.once(n,t),this),this.removeListener=(n,t)=>(this.events.removeListener(n,t),this),this.off=(n,t)=>(this.events.off(n,t),this),this.parseAccount=n=>this.isCompatibleChainId(n)?this.parseAccountId(n).address:n,this.signer={},this.rpc={}}static init(n){return(0,m.Z)(function*(){const t=new Ms;return yield t.initialize(n),t})()}request(n){var t=this;return(0,m.Z)(function*(){return yield t.signer.request(n,t.formatChainId(t.chainId))})()}sendAsync(n,t){this.signer.sendAsync(n,t,this.formatChainId(this.chainId))}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}enable(){var n=this;return(0,m.Z)(function*(){return n.session||(yield n.connect()),yield n.request({method:"eth_requestAccounts"})})()}connect(n){var t=this;return(0,m.Z)(function*(){if(!t.signer.client)throw new Error("Provider not initialized. Call init() first");t.loadConnectOpts(n);const{required:o,optional:a}=function Gp(y){const{chains:n,optionalChains:t,methods:o,optionalMethods:a,events:u,optionalEvents:f,rpcMap:P}=y;if(!(0,x.qt)(n))throw new Error("Invalid chains");const C={chains:n,methods:o||Ls,events:u||js,rpcMap:Bi({},n.length?{[Fs(n)]:P[Fs(n)]}:{})},z=u?.filter(Fe=>!js.includes(Fe)),W=o?.filter(Fe=>!Ls.includes(Fe));if(!(t||f||a||null!=z&&z.length||null!=W&&W.length))return{required:n.length?C:void 0};const Oe={chains:[...new Set(z?.length&&W?.length||!t?C.chains.concat(t||[]):t)],methods:[...new Set(C.methods.concat(null!=a&&a.length?a:Zu))],events:[...new Set(C.events.concat(null!=f&&f.length?f:qu))],rpcMap:P};return{required:n.length?C:void 0,optional:t.length?Oe:void 0}}(t.rpc);try{const u=yield new Promise(function(){var P=(0,m.Z)(function*(C,z){var W;t.rpc.showQrModal&&(null==(W=t.modal)||W.subscribeModal(pe=>{!pe.open&&!t.signer.session&&(t.signer.abortPairingAttempt(),z(new Error("Connection request reset. Please try again.")))})),yield t.signer.connect($u(Bi({namespaces:Bi({},o&&{[t.namespace]:o})},a&&{optionalNamespaces:{[t.namespace]:a}}),{pairingTopic:n?.pairingTopic})).then(pe=>{C(pe)}).catch(pe=>{z(new Error(pe.message))})});return function(C,z){return P.apply(this,arguments)}}());if(!u)return;const f=(0,x.gu)(u.namespaces,[t.namespace]);t.setChainIds(t.rpc.chains.length?t.rpc.chains:f),t.setAccounts(f),t.events.emit("connect",{chainId:ya(t.chainId)})}catch(u){throw t.signer.logger.error(u),u}finally{t.modal&&t.modal.closeModal()}})()}disconnect(){var n=this;return(0,m.Z)(function*(){n.session&&(yield n.signer.disconnect()),n.reset()})()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",n=>{const{params:t}=n,{event:o}=t;"accountsChanged"===o.name?(this.accounts=this.parseAccounts(o.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===o.name?this.setChainId(this.formatChainId(o.data)):this.events.emit(o.name,o.data),this.events.emit("session_event",n)}),this.signer.on("chainChanged",n=>{const t=parseInt(n);this.chainId=t,this.events.emit("chainChanged",ya(this.chainId)),this.persist()}),this.signer.on("session_update",n=>{this.events.emit("session_update",n)}),this.signer.on("session_delete",n=>{this.reset(),this.events.emit("session_delete",n),this.events.emit("disconnect",$u(Bi({},(0,x.D6)("USER_DISCONNECTED")),{data:n.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",n=>{var t,o;this.rpc.showQrModal&&(null==(t=this.modal)||t.closeModal(),null==(o=this.modal)||o.openModal({uri:n})),this.events.emit("display_uri",n)})}switchEthereumChain(n){this.request({method:"wallet_switchEthereumChain",params:[{chainId:n.toString(16)}]})}isCompatibleChainId(n){return"string"==typeof n&&n.startsWith(`${this.namespace}:`)}formatChainId(n){return`${this.namespace}:${n}`}parseChainId(n){return Number(n.split(":")[1])}setChainIds(n){const t=n.filter(o=>this.isCompatibleChainId(o)).map(o=>this.parseChainId(o));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",ya(this.chainId)),this.persist())}setChainId(n){if(this.isCompatibleChainId(n)){const t=this.parseChainId(n);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(n){const[t,o,a]=n.split(":");return{chainId:`${t}:${o}`,address:a}}setAccounts(n){this.accounts=n.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(n){var t,o;const a=null!=(t=n?.chains)?t:[],u=null!=(o=n?.optionalChains)?o:[],f=a.concat(u);if(!f.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const P=a.length?n?.methods||Ls:[],C=a.length?n?.events||js:[],z=n?.optionalMethods||[],W=n?.optionalEvents||[],pe=n?.rpcMap||this.buildRpcMap(f,n.projectId),Oe=n?.qrModalOptions||void 0;return{chains:a?.map(Fe=>this.formatChainId(Fe)),optionalChains:u.map(Fe=>this.formatChainId(Fe)),methods:P,events:C,optionalMethods:z,optionalEvents:W,rpcMap:pe,showQrModal:!(null==n||!n.showQrModal),qrModalOptions:Oe,projectId:n.projectId,metadata:n.metadata}}buildRpcMap(n,t){const o={};return n.forEach(a=>{o[a]=this.getRpcUrl(a,t)}),o}initialize(n){var t=this;return(0,m.Z)(function*(){if(t.rpc=t.getRpcConfig(n),t.chainId=Fs(t.rpc.chains.length?t.rpc.chains:t.rpc.optionalChains),t.signer=yield Zp.init({projectId:t.rpc.projectId,metadata:t.rpc.metadata,disableProviderPing:n.disableProviderPing,relayUrl:n.relayUrl,storageOptions:n.storageOptions}),t.registerEventListeners(),yield t.loadPersistedSession(),t.rpc.showQrModal){let o;try{const{WalletConnectModal:a}=yield G.e(301).then(G.bind(G,3301));o=a}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(o)try{t.modal=new o(Bi({walletConnectVersion:2,projectId:t.rpc.projectId,standaloneChains:t.rpc.chains},t.rpc.qrModalOptions))}catch(a){throw t.signer.logger.error(a),new Error("Could not generate WalletConnectModal Instance")}}})()}loadConnectOpts(n){if(!n)return;const{chains:t,optionalChains:o,rpcMap:a}=n;t&&(0,x.qt)(t)&&(this.rpc.chains=t.map(u=>this.formatChainId(u)),t.forEach(u=>{this.rpc.rpcMap[u]=a?.[u]||this.getRpcUrl(u)})),o&&(0,x.qt)(o)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=o?.map(u=>this.formatChainId(u)),o.forEach(u=>{this.rpc.rpcMap[u]=a?.[u]||this.getRpcUrl(u)}))}getRpcUrl(n,t){var o;return(null==(o=this.rpc.rpcMap)?void 0:o[n])||`https://rpc.walletconnect.com/v1/?chainId=eip155:${n}&projectId=${t||this.rpc.projectId}`}loadPersistedSession(){var n=this;return(0,m.Z)(function*(){if(!n.session)return;const t=yield n.signer.client.core.storage.getItem(`${n.STORAGE_KEY}/chainId`),o=n.session.namespaces[`${n.namespace}:${t}`]?n.session.namespaces[`${n.namespace}:${t}`]:n.session.namespaces[n.namespace];n.setChainIds(t?[n.formatChainId(t)]:o?.accounts),n.setAccounts(o?.accounts)})()}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(n){return"string"==typeof n||n instanceof String?[this.parseAccount(n)]:n.map(t=>this.parseAccount(t))}}const Wp=Ms},2108:(De,Z,G)=>{"use strict";G.d(Z,{q:()=>m});class m{}},699:(De,Z,G)=>{"use strict";G.r(Z),G.d(Z,{IEvents:()=>m.q});var m=G(2108)},4953:(De,Z,G)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.HEARTBEAT_EVENTS=Z.HEARTBEAT_INTERVAL=void 0;const m=G(5409);Z.HEARTBEAT_INTERVAL=m.FIVE_SECONDS,Z.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},5368:(De,Z,G)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),G(9653).__exportStar(G(4953),Z)},9754:(De,Z,G)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.HeartBeat=void 0;const m=G(9653),ae=G(2016),ve=G(5409),x=G(4083),X=G(5368);class xe extends x.IHeartBeat{constructor(te){super(te),this.events=new ae.EventEmitter,this.interval=X.HEARTBEAT_INTERVAL,this.interval=te?.interval||X.HEARTBEAT_INTERVAL}static init(te){return m.__awaiter(this,void 0,void 0,function*(){const ce=new xe(te);return yield ce.init(),ce})}init(){return m.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(te,ce){this.events.on(te,ce)}once(te,ce){this.events.once(te,ce)}off(te,ce){this.events.off(te,ce)}removeListener(te,ce){this.events.removeListener(te,ce)}initialize(){return m.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),ve.toMiliseconds(this.interval))})}pulse(){this.events.emit(X.HEARTBEAT_EVENTS.pulse)}}Z.HeartBeat=xe},986:(De,Z,G)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});const m=G(9653);m.__exportStar(G(9754),Z),m.__exportStar(G(4083),Z),m.__exportStar(G(5368),Z)},7293:(De,Z,G)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.IHeartBeat=void 0;const m=G(699);Z.IHeartBeat=class ae extends m.IEvents{constructor(x){super()}}},4083:(De,Z,G)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),G(9653).__exportStar(G(7293),Z)},7297:(De,Z,G)=>{"use strict";const ae=G(3893),ve=G(5499),x=ae.__importDefault(G(2906)),X=G(5420);Z.ZP=class xe{constructor(){this.localStorage=x.default}getKeys(){return ae.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return ae.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(X.parseEntry)})}getItem(te){return ae.__awaiter(this,void 0,void 0,function*(){const ce=this.localStorage.getItem(te);if(null!==ce)return ve.safeJsonParse(ce)})}setItem(te,ce){return ae.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(te,ve.safeJsonStringify(ce))})}removeItem(te){return ae.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(te)})}}},2906:De=>{"use strict";!function(){let Z;function G(){}Z=G,Z.prototype.getItem=function(m){return this.hasOwnProperty(m)?String(this[m]):null},Z.prototype.setItem=function(m,ae){this[m]=String(ae)},Z.prototype.removeItem=function(m){delete this[m]},Z.prototype.clear=function(){const m=this;Object.keys(m).forEach(function(ae){m[ae]=void 0,delete m[ae]})},Z.prototype.key=function(m){return m=m||0,Object.keys(this)[m]},Z.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),De.exports=typeof global<"u"&&global.localStorage?global.localStorage:typeof window<"u"&&window.localStorage?window.localStorage:new G}()},5420:(De,Z,G)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});const m=G(3893);m.__exportStar(G(3680),Z),m.__exportStar(G(362),Z)},3680:(De,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.IKeyValueStorage=void 0,Z.IKeyValueStorage=class G{}},362:(De,Z,G)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.parseEntry=void 0;const m=G(5499);Z.parseEntry=function ae(ve){var x;return[ve[0],m.safeJsonParse(null!==(x=ve[1])&&void 0!==x?x:"")]}},6904:(De,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.PINO_CUSTOM_CONTEXT_KEY=Z.PINO_LOGGER_DEFAULTS=void 0,Z.PINO_LOGGER_DEFAULTS={level:"info"},Z.PINO_CUSTOM_CONTEXT_KEY="custom_context"},2997:(De,Z,G)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.pino=void 0;const m=G(7121),ae=m.__importDefault(G(1590));Object.defineProperty(Z,"pino",{enumerable:!0,get:function(){return ae.default}}),m.__exportStar(G(6904),Z),m.__exportStar(G(2723),Z)},2723:(De,Z,G)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.generateChildLogger=Z.formatChildLoggerContext=Z.getLoggerContext=Z.setBrowserLoggerContext=Z.getBrowserLoggerContext=Z.getDefaultLoggerOptions=void 0;const m=G(6904);function ve(te,ce=m.PINO_CUSTOM_CONTEXT_KEY){return te[ce]||""}function x(te,ce,le=m.PINO_CUSTOM_CONTEXT_KEY){return te[le]=ce,te}function X(te,ce=m.PINO_CUSTOM_CONTEXT_KEY){let le="";return le=typeof te.bindings>"u"?ve(te,ce):te.bindings().context||"",le}function xe(te,ce,le=m.PINO_CUSTOM_CONTEXT_KEY){const Re=X(te,le);return Re.trim()?`${Re}/${ce}`:ce}Z.getDefaultLoggerOptions=function ae(te){return Object.assign(Object.assign({},te),{level:te?.level||m.PINO_LOGGER_DEFAULTS.level})},Z.getBrowserLoggerContext=ve,Z.setBrowserLoggerContext=x,Z.getLoggerContext=X,Z.formatChildLoggerContext=xe,Z.generateChildLogger=function he(te,ce,le=m.PINO_CUSTOM_CONTEXT_KEY){const Re=xe(te,ce,le);return x(te.child({context:Re}),Re,le)}},2768:()=>{},2055:function(De,Z){var ve,G=typeof self<"u"?self:this,m=function(){function ve(){this.fetch=!1,this.DOMException=G.DOMException}return ve.prototype=G,new ve}();ve=m,function(X){var xe_searchParams="URLSearchParams"in ve,xe_iterable="Symbol"in ve&&"iterator"in Symbol,xe_blob="FileReader"in ve&&"Blob"in ve&&function(){try{return new Blob,!0}catch{return!1}}(),xe_formData="FormData"in ve,xe_arrayBuffer="ArrayBuffer"in ve;if(xe_arrayBuffer)var te=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],ce=ArrayBuffer.isView||function(_){return _&&te.indexOf(Object.prototype.toString.call(_))>-1};function le(_){if("string"!=typeof _&&(_=String(_)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(_))throw new TypeError("Invalid character in header field name");return _.toLowerCase()}function Re(_){return"string"!=typeof _&&(_=String(_)),_}function me(_){var d={next:function(){var E=_.shift();return{done:void 0===E,value:E}}};return xe_iterable&&(d[Symbol.iterator]=function(){return d}),d}function Pe(_){this.map={},_ instanceof Pe?_.forEach(function(d,E){this.append(E,d)},this):Array.isArray(_)?_.forEach(function(d){this.append(d[0],d[1])},this):_&&Object.getOwnPropertyNames(_).forEach(function(d){this.append(d,_[d])},this)}function de(_){if(_.bodyUsed)return Promise.reject(new TypeError("Already read"));_.bodyUsed=!0}function Ge(_){return new Promise(function(d,E){_.onload=function(){d(_.result)},_.onerror=function(){E(_.error)}})}function Me(_){var d=new FileReader,E=Ge(d);return d.readAsArrayBuffer(_),E}function se(_){if(_.slice)return _.slice(0);var d=new Uint8Array(_.byteLength);return d.set(new Uint8Array(_)),d.buffer}function ne(){return this.bodyUsed=!1,this._initBody=function(_){this._bodyInit=_,_?"string"==typeof _?this._bodyText=_:xe_blob&&Blob.prototype.isPrototypeOf(_)?this._bodyBlob=_:xe_formData&&FormData.prototype.isPrototypeOf(_)?this._bodyFormData=_:xe_searchParams&&URLSearchParams.prototype.isPrototypeOf(_)?this._bodyText=_.toString():xe_arrayBuffer&&xe_blob&&function he(_){return _&&DataView.prototype.isPrototypeOf(_)}(_)?(this._bodyArrayBuffer=se(_.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):xe_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(_)||ce(_))?this._bodyArrayBuffer=se(_):this._bodyText=_=Object.prototype.toString.call(_):this._bodyText="",this.headers.get("content-type")||("string"==typeof _?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):xe_searchParams&&URLSearchParams.prototype.isPrototypeOf(_)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},xe_blob&&(this.blob=function(){var _=de(this);if(_)return _;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?de(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Me)}),this.text=function(){var _=de(this);if(_)return _;if(this._bodyBlob)return function ke(_){var d=new FileReader,E=Ge(d);return d.readAsText(_),E}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function Je(_){for(var d=new Uint8Array(_),E=new Array(d.length),D=0;D<d.length;D++)E[D]=String.fromCharCode(d[D]);return E.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},xe_formData&&(this.formData=function(){return this.text().then(Q)}),this.json=function(){return this.text().then(JSON.parse)},this}Pe.prototype.append=function(_,d){_=le(_),d=Re(d);var E=this.map[_];this.map[_]=E?E+", "+d:d},Pe.prototype.delete=function(_){delete this.map[le(_)]},Pe.prototype.get=function(_){return _=le(_),this.has(_)?this.map[_]:null},Pe.prototype.has=function(_){return this.map.hasOwnProperty(le(_))},Pe.prototype.set=function(_,d){this.map[le(_)]=Re(d)},Pe.prototype.forEach=function(_,d){for(var E in this.map)this.map.hasOwnProperty(E)&&_.call(d,this.map[E],E,this)},Pe.prototype.keys=function(){var _=[];return this.forEach(function(d,E){_.push(E)}),me(_)},Pe.prototype.values=function(){var _=[];return this.forEach(function(d){_.push(d)}),me(_)},Pe.prototype.entries=function(){var _=[];return this.forEach(function(d,E){_.push([E,d])}),me(_)},xe_iterable&&(Pe.prototype[Symbol.iterator]=Pe.prototype.entries);var ue=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function q(_,d){var E=(d=d||{}).body;if(_ instanceof q){if(_.bodyUsed)throw new TypeError("Already read");this.url=_.url,this.credentials=_.credentials,d.headers||(this.headers=new Pe(_.headers)),this.method=_.method,this.mode=_.mode,this.signal=_.signal,!E&&null!=_._bodyInit&&(E=_._bodyInit,_.bodyUsed=!0)}else this.url=String(_);if(this.credentials=d.credentials||this.credentials||"same-origin",(d.headers||!this.headers)&&(this.headers=new Pe(d.headers)),this.method=function fe(_){var d=_.toUpperCase();return ue.indexOf(d)>-1?d:_}(d.method||this.method||"GET"),this.mode=d.mode||this.mode||null,this.signal=d.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&E)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(E)}function Q(_){var d=new FormData;return _.trim().split("&").forEach(function(E){if(E){var D=E.split("="),ge=D.shift().replace(/\+/g," "),R=D.join("=").replace(/\+/g," ");d.append(decodeURIComponent(ge),decodeURIComponent(R))}}),d}function p(_){var d=new Pe;return _.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(D){var ge=D.split(":"),R=ge.shift().trim();if(R){var B=ge.join(":").trim();d.append(R,B)}}),d}function b(_,d){d||(d={}),this.type="default",this.status=void 0===d.status?200:d.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in d?d.statusText:"OK",this.headers=new Pe(d.headers),this.url=d.url||"",this._initBody(_)}q.prototype.clone=function(){return new q(this,{body:this._bodyInit})},ne.call(q.prototype),ne.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Pe(this.headers),url:this.url})},b.error=function(){var _=new b(null,{status:0,statusText:""});return _.type="error",_};var v=[301,302,303,307,308];b.redirect=function(_,d){if(-1===v.indexOf(d))throw new RangeError("Invalid status code");return new b(null,{status:d,headers:{location:_}})},X.DOMException=ve.DOMException;try{new X.DOMException}catch{X.DOMException=function(d,E){this.message=d,this.name=E;var D=Error(d);this.stack=D.stack},X.DOMException.prototype=Object.create(Error.prototype),X.DOMException.prototype.constructor=X.DOMException}function S(_,d){return new Promise(function(E,D){var ge=new q(_,d);if(ge.signal&&ge.signal.aborted)return D(new X.DOMException("Aborted","AbortError"));var R=new XMLHttpRequest;function B(){R.abort()}R.onload=function(){var re={status:R.status,statusText:R.statusText,headers:p(R.getAllResponseHeaders()||"")};re.url="responseURL"in R?R.responseURL:re.headers.get("X-Request-URL"),E(new b("response"in R?R.response:R.responseText,re))},R.onerror=function(){D(new TypeError("Network request failed"))},R.ontimeout=function(){D(new TypeError("Network request failed"))},R.onabort=function(){D(new X.DOMException("Aborted","AbortError"))},R.open(ge.method,ge.url,!0),"include"===ge.credentials?R.withCredentials=!0:"omit"===ge.credentials&&(R.withCredentials=!1),"responseType"in R&&xe_blob&&(R.responseType="blob"),ge.headers.forEach(function(re,$){R.setRequestHeader($,re)}),ge.signal&&(ge.signal.addEventListener("abort",B),R.onreadystatechange=function(){4===R.readyState&&ge.signal.removeEventListener("abort",B)}),R.send(typeof ge._bodyInit>"u"?null:ge._bodyInit)})}S.polyfill=!0,ve.fetch||(ve.fetch=S,ve.Headers=Pe,ve.Request=q,ve.Response=b),X.Headers=Pe,X.Request=q,X.Response=b,X.fetch=S,Object.defineProperty(X,"__esModule",{value:!0})}({}),m.fetch.ponyfill=!0,delete m.fetch.polyfill;var ae=m;(Z=ae.fetch).default=ae.fetch,Z.fetch=ae.fetch,Z.Headers=ae.Headers,Z.Request=ae.Request,Z.Response=ae.Response,De.exports=Z},2016:De=>{"use strict";var m,Z="object"==typeof Reflect?Reflect:null,G=Z&&"function"==typeof Z.apply?Z.apply:function(ne,ue,fe){return Function.prototype.apply.call(ne,ue,fe)};m=Z&&"function"==typeof Z.ownKeys?Z.ownKeys:Object.getOwnPropertySymbols?function(ne){return Object.getOwnPropertyNames(ne).concat(Object.getOwnPropertySymbols(ne))}:function(ne){return Object.getOwnPropertyNames(ne)};var ve=Number.isNaN||function(ne){return ne!=ne};function x(){x.init.call(this)}De.exports=x,De.exports.once=function Me(se,ne){return new Promise(function(ue,fe){function q(p){se.removeListener(ne,Q),fe(p)}function Q(){"function"==typeof se.removeListener&&se.removeListener("error",q),ue([].slice.call(arguments))}Je(se,ne,Q,{once:!0}),"error"!==ne&&function ke(se,ne,ue){"function"==typeof se.on&&Je(se,"error",ne,ue)}(se,q,{once:!0})})},x.EventEmitter=x,x.prototype._events=void 0,x.prototype._eventsCount=0,x.prototype._maxListeners=void 0;var X=10;function xe(se){if("function"!=typeof se)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof se)}function he(se){return void 0===se._maxListeners?x.defaultMaxListeners:se._maxListeners}function te(se,ne,ue,fe){var q,Q,p;if(xe(ue),void 0===(Q=se._events)?(Q=se._events=Object.create(null),se._eventsCount=0):(void 0!==Q.newListener&&(se.emit("newListener",ne,ue.listener?ue.listener:ue),Q=se._events),p=Q[ne]),void 0===p)p=Q[ne]=ue,++se._eventsCount;else if("function"==typeof p?p=Q[ne]=fe?[ue,p]:[p,ue]:fe?p.unshift(ue):p.push(ue),(q=he(se))>0&&p.length>q&&!p.warned){p.warned=!0;var b=new Error("Possible EventEmitter memory leak detected. "+p.length+" "+String(ne)+" listeners added. Use emitter.setMaxListeners() to increase limit");b.name="MaxListenersExceededWarning",b.emitter=se,b.type=ne,b.count=p.length,function ae(se){console&&console.warn&&console.warn(se)}(b)}return se}function ce(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function le(se,ne,ue){var fe={fired:!1,wrapFn:void 0,target:se,type:ne,listener:ue},q=ce.bind(fe);return q.listener=ue,fe.wrapFn=q,q}function Re(se,ne,ue){var fe=se._events;if(void 0===fe)return[];var q=fe[ne];return void 0===q?[]:"function"==typeof q?ue?[q.listener||q]:[q]:ue?function Ge(se){for(var ne=new Array(se.length),ue=0;ue<ne.length;++ue)ne[ue]=se[ue].listener||se[ue];return ne}(q):Pe(q,q.length)}function me(se){var ne=this._events;if(void 0!==ne){var ue=ne[se];if("function"==typeof ue)return 1;if(void 0!==ue)return ue.length}return 0}function Pe(se,ne){for(var ue=new Array(ne),fe=0;fe<ne;++fe)ue[fe]=se[fe];return ue}function Je(se,ne,ue,fe){if("function"==typeof se.on)fe.once?se.once(ne,ue):se.on(ne,ue);else{if("function"!=typeof se.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof se);se.addEventListener(ne,function q(Q){fe.once&&se.removeEventListener(ne,q),ue(Q)})}}Object.defineProperty(x,"defaultMaxListeners",{enumerable:!0,get:function(){return X},set:function(se){if("number"!=typeof se||se<0||ve(se))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+se+".");X=se}}),x.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},x.prototype.setMaxListeners=function(ne){if("number"!=typeof ne||ne<0||ve(ne))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ne+".");return this._maxListeners=ne,this},x.prototype.getMaxListeners=function(){return he(this)},x.prototype.emit=function(ne){for(var ue=[],fe=1;fe<arguments.length;fe++)ue.push(arguments[fe]);var q="error"===ne,Q=this._events;if(void 0!==Q)q=q&&void 0===Q.error;else if(!q)return!1;if(q){var p;if(ue.length>0&&(p=ue[0]),p instanceof Error)throw p;var b=new Error("Unhandled error."+(p?" ("+p.message+")":""));throw b.context=p,b}var v=Q[ne];if(void 0===v)return!1;if("function"==typeof v)G(v,this,ue);else{var S=v.length,_=Pe(v,S);for(fe=0;fe<S;++fe)G(_[fe],this,ue)}return!0},x.prototype.on=x.prototype.addListener=function(ne,ue){return te(this,ne,ue,!1)},x.prototype.prependListener=function(ne,ue){return te(this,ne,ue,!0)},x.prototype.once=function(ne,ue){return xe(ue),this.on(ne,le(this,ne,ue)),this},x.prototype.prependOnceListener=function(ne,ue){return xe(ue),this.prependListener(ne,le(this,ne,ue)),this},x.prototype.off=x.prototype.removeListener=function(ne,ue){var fe,q,Q,p,b;if(xe(ue),void 0===(q=this._events))return this;if(void 0===(fe=q[ne]))return this;if(fe===ue||fe.listener===ue)0==--this._eventsCount?this._events=Object.create(null):(delete q[ne],q.removeListener&&this.emit("removeListener",ne,fe.listener||ue));else if("function"!=typeof fe){for(Q=-1,p=fe.length-1;p>=0;p--)if(fe[p]===ue||fe[p].listener===ue){b=fe[p].listener,Q=p;break}if(Q<0)return this;0===Q?fe.shift():function de(se,ne){for(;ne+1<se.length;ne++)se[ne]=se[ne+1];se.pop()}(fe,Q),1===fe.length&&(q[ne]=fe[0]),void 0!==q.removeListener&&this.emit("removeListener",ne,b||ue)}return this},x.prototype.removeAllListeners=function(ne){var ue,fe,q;if(void 0===(fe=this._events))return this;if(void 0===fe.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==fe[ne]&&(0==--this._eventsCount?this._events=Object.create(null):delete fe[ne]),this;if(0===arguments.length){var p,Q=Object.keys(fe);for(q=0;q<Q.length;++q)"removeListener"!==(p=Q[q])&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(ue=fe[ne]))this.removeListener(ne,ue);else if(void 0!==ue)for(q=ue.length-1;q>=0;q--)this.removeListener(ne,ue[q]);return this},x.prototype.listeners=function(ne){return Re(this,ne,!0)},x.prototype.rawListeners=function(ne){return Re(this,ne,!1)},x.listenerCount=function(se,ne){return"function"==typeof se.listenerCount?se.listenerCount(ne):me.call(se,ne)},x.prototype.listenerCount=me,x.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]}},2650:(De,Z,G)=>{De=G.nmd(De);var ae="__lodash_hash_undefined__",ve=1,x=2,X=9007199254740991,xe="[object Arguments]",he="[object Array]",te="[object AsyncFunction]",ce="[object Boolean]",le="[object Date]",Re="[object Error]",me="[object Function]",Pe="[object GeneratorFunction]",de="[object Map]",Ge="[object Number]",Me="[object Null]",ke="[object Object]",Je="[object Promise]",se="[object Proxy]",ne="[object RegExp]",ue="[object Set]",fe="[object String]",Q="[object Undefined]",p="[object WeakMap]",b="[object ArrayBuffer]",v="[object DataView]",Se=/^\[object .+?Constructor\]$/,$e=/^(?:0|[1-9]\d*)$/,Le={};Le["[object Float32Array]"]=Le["[object Float64Array]"]=Le["[object Int8Array]"]=Le["[object Int16Array]"]=Le["[object Int32Array]"]=Le["[object Uint8Array]"]=Le["[object Uint8ClampedArray]"]=Le["[object Uint16Array]"]=Le["[object Uint32Array]"]=!0,Le[xe]=Le[he]=Le[b]=Le[ce]=Le[v]=Le[le]=Le[Re]=Le[me]=Le[de]=Le[Ge]=Le[ke]=Le[ne]=Le[ue]=Le[fe]=Le[p]=!1;var Qr="object"==typeof global&&global&&global.Object===Object&&global,Yr="object"==typeof self&&self&&self.Object===Object&&self,dt=Qr||Yr||Function("return this")(),V=Z&&!Z.nodeType&&Z,k=V&&De&&!De.nodeType&&De,U=k&&k.exports===V,h=U&&Qr.process,N=function(){try{return h&&h.binding&&h.binding("util")}catch{}}(),Ie=N&&N.isTypedArray;function ut(O,j){for(var ie=-1,_e=null==O?0:O.length;++ie<_e;)if(j(O[ie],ie,O))return!0;return!1}function Ut(O,j){return O.has(j)}function ir(O){var j=-1,ie=Array(O.size);return O.forEach(function(_e,lt){ie[++j]=[lt,_e]}),ie}function Ht(O){var j=-1,ie=Array(O.size);return O.forEach(function(_e){ie[++j]=_e}),ie}var O,Ot=Array.prototype,it=Object.prototype,pt=dt["__core-js_shared__"],at=Function.prototype.toString,ct=it.hasOwnProperty,Bt=(O=/[^.]+$/.exec(pt&&pt.keys&&pt.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"",Jt=it.toString,ur=RegExp("^"+at.call(ct).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lr=U?dt.Buffer:void 0,sr=dt.Symbol,pr=dt.Uint8Array,gr=it.propertyIsEnumerable,Ur=Ot.splice,yr=sr?sr.toStringTag:void 0,br=Object.getOwnPropertySymbols,ln=lr?lr.isBuffer:void 0,Qn=function $t(O,j){return function(ie){return O(j(ie))}}(Object.keys,Object),fn=Mn(dt,"DataView"),hn=Mn(dt,"Map"),At=Mn(dt,"Promise"),Tt=Mn(dt,"Set"),jt=Mn(dt,"WeakMap"),_t=Mn(Object,"create"),Vt=xn(fn),Qt=xn(hn),Nt=xn(At),Ft=xn(Tt),mt=xn(jt),Ct=sr?sr.prototype:void 0,bt=Ct?Ct.valueOf:void 0;function gt(O){var j=-1,ie=null==O?0:O.length;for(this.clear();++j<ie;){var _e=O[j];this.set(_e[0],_e[1])}}function Xr(O){var j=-1,ie=null==O?0:O.length;for(this.clear();++j<ie;){var _e=O[j];this.set(_e[0],_e[1])}}function dn(O){var j=-1,ie=null==O?0:O.length;for(this.clear();++j<ie;){var _e=O[j];this.set(_e[0],_e[1])}}function Sr(O){var j=-1,ie=null==O?0:O.length;for(this.__data__=new dn;++j<ie;)this.add(O[j])}function pn(O){var j=this.__data__=new Xr(O);this.size=j.size}function Fi(O,j){for(var ie=O.length;ie--;)if(Es(O[ie][0],j))return ie;return-1}function Yn(O){return null==O?void 0===O?Q:Me:yr&&yr in Object(O)?function gi(O){var j=ct.call(O,yr),ie=O[yr];try{O[yr]=void 0;var _e=!0}catch{}var lt=Jt.call(O);return _e&&(j?O[yr]=ie:delete O[yr]),lt}(O):function Ko(O){return Jt.call(O)}(O)}function _s(O){return ti(O)&&Yn(O)==xe}function ms(O,j,ie,_e,lt){return O===j||(null==O||null==j||!ti(O)&&!ti(j)?O!=O&&j!=j:function qo(O,j,ie,_e,lt,qe){var It=yi(O),Wt=yi(j),er=It?he:gn(O),wt=Wt?he:gn(j),wr=(er=er==xe?ke:er)==ke,Lr=(wt=wt==xe?ke:wt)==ke,or=er==wt;if(or&&Mi(O)){if(!Mi(j))return!1;It=!0,wr=!1}if(or&&!wr)return qe||(qe=new pn),It||Os(O)?ws(O,j,ie,_e,lt,qe):function $o(O,j,ie,_e,lt,qe,It){switch(ie){case v:if(O.byteLength!=j.byteLength||O.byteOffset!=j.byteOffset)return!1;O=O.buffer,j=j.buffer;case b:return!(O.byteLength!=j.byteLength||!qe(new pr(O),new pr(j)));case ce:case le:case Ge:return Es(+O,+j);case Re:return O.name==j.name&&O.message==j.message;case ne:case fe:return O==j+"";case de:var Wt=ir;case ue:if(Wt||(Wt=Ht),O.size!=j.size&&!(_e&ve))return!1;var wt=It.get(O);if(wt)return wt==j;_e|=x,It.set(O,j);var wr=ws(Wt(O),Wt(j),_e,lt,qe,It);return It.delete(O),wr;case"[object Symbol]":if(bt)return bt.call(O)==bt.call(j)}return!1}(O,j,er,ie,_e,lt,qe);if(!(ie&ve)){var Or=wr&&ct.call(O,"__wrapped__"),xr=Lr&&ct.call(j,"__wrapped__");if(Or||xr){var yn=Or?O.value():O,tn=xr?j.value():j;return qe||(qe=new pn),lt(yn,tn,ie,_e,qe)}}return!!or&&(qe||(qe=new pn),function Ho(O,j,ie,_e,lt,qe){var It=ie&ve,Wt=xs(O),er=Wt.length;if(er!=xs(j).length&&!It)return!1;for(var Lr=er;Lr--;){var or=Wt[Lr];if(!(It?or in j:ct.call(j,or)))return!1}var Or=qe.get(O);if(Or&&qe.get(j))return Or==j;var xr=!0;qe.set(O,j),qe.set(j,O);for(var yn=It;++Lr<er;){var tn=O[or=Wt[Lr]],En=j[or];if(_e)var Rs=It?_e(En,tn,or,j,O,qe):_e(tn,En,or,O,j,qe);if(!(void 0===Rs?tn===En||lt(tn,En,ie,_e,qe):Rs)){xr=!1;break}yn||(yn="constructor"==or)}if(xr&&!yn){var vi=O.constructor,_i=j.constructor;vi!=_i&&"constructor"in O&&"constructor"in j&&!("function"==typeof vi&&vi instanceof vi&&"function"==typeof _i&&_i instanceof _i)&&(xr=!1)}return qe.delete(O),qe.delete(j),xr}(O,j,ie,_e,lt,qe))}(O,j,ie,_e,ms,lt))}function ws(O,j,ie,_e,lt,qe){var It=ie&ve,Wt=O.length,er=j.length;if(Wt!=er&&!(It&&er>Wt))return!1;var wt=qe.get(O);if(wt&&qe.get(j))return wt==j;var wr=-1,Lr=!0,or=ie&x?new Sr:void 0;for(qe.set(O,j),qe.set(j,O);++wr<Wt;){var Or=O[wr],xr=j[wr];if(_e)var yn=It?_e(xr,Or,wr,j,O,qe):_e(Or,xr,wr,O,j,qe);if(void 0!==yn){if(yn)continue;Lr=!1;break}if(or){if(!ut(j,function(tn,En){if(!Ut(or,En)&&(Or===tn||lt(Or,tn,ie,_e,qe)))return or.push(En)})){Lr=!1;break}}else if(Or!==xr&&!lt(Or,xr,ie,_e,qe)){Lr=!1;break}}return qe.delete(O),qe.delete(j),Lr}function xs(O){return function Zo(O,j,ie){var _e=j(O);return yi(O)?_e:function Xe(O,j){for(var ie=-1,_e=j.length,lt=O.length;++ie<_e;)O[lt+ie]=j[ie];return O}(_e,ie(O))}(O,Qo,ei)}function Xn(O,j){var ie=O.__data__;return function Xt(O){var j=typeof O;return"string"==j||"number"==j||"symbol"==j||"boolean"==j?"__proto__"!==O:null===O}(j)?ie["string"==typeof j?"string":"hash"]:ie.map}function Mn(O,j){var ie=function nr(O,j){return O?.[j]}(O,j);return function zo(O){return!(!Ss(O)||function Vo(O){return!!Bt&&Bt in O}(O))&&(Is(O)?ur:Se).test(xn(O))}(ie)?ie:void 0}gt.prototype.clear=function kt(){this.__data__=_t?_t(null):{},this.size=0},gt.prototype.delete=function Yt(O){var j=this.has(O)&&delete this.__data__[O];return this.size-=j?1:0,j},gt.prototype.get=function Kt(O){var j=this.__data__;if(_t){var ie=j[O];return ie===ae?void 0:ie}return ct.call(j,O)?j[O]:void 0},gt.prototype.has=function Gt(O){var j=this.__data__;return _t?void 0!==j[O]:ct.call(j,O)},gt.prototype.set=function Do(O,j){var ie=this.__data__;return this.size+=this.has(O)?0:1,ie[O]=_t&&void 0===j?ae:j,this},Xr.prototype.clear=function No(){this.__data__=[],this.size=0},Xr.prototype.delete=function ds(O){var j=this.__data__,ie=Fi(j,O);return!(ie<0||(ie==j.length-1?j.pop():Ur.call(j,ie,1),--this.size,0))},Xr.prototype.get=function ps(O){var j=this.__data__,ie=Fi(j,O);return ie<0?void 0:j[ie][1]},Xr.prototype.has=function gs(O){return Fi(this.__data__,O)>-1},Xr.prototype.set=function Lo(O,j){var ie=this.__data__,_e=Fi(ie,O);return _e<0?(++this.size,ie.push([O,j])):ie[_e][1]=j,this},dn.prototype.clear=function ji(){this.size=0,this.__data__={hash:new gt,map:new(hn||Xr),string:new gt}},dn.prototype.delete=function pi(O){var j=Xn(this,O).delete(O);return this.size-=j?1:0,j},dn.prototype.get=function en(O){return Xn(this,O).get(O)},dn.prototype.has=function Nr(O){return Xn(this,O).has(O)},dn.prototype.set=function Zc(O,j){var ie=Xn(this,O),_e=ie.size;return ie.set(O,j),this.size+=ie.size==_e?0:1,this},Sr.prototype.add=Sr.prototype.push=function qc(O){return this.__data__.set(O,ae),this},Sr.prototype.has=function zc(O){return this.__data__.has(O)},pn.prototype.clear=function jo(){this.__data__=new Xr,this.size=0},pn.prototype.delete=function Uc(O){var j=this.__data__,ie=j.delete(O);return this.size=j.size,ie},pn.prototype.get=function ys(O){return this.__data__.get(O)},pn.prototype.has=function vs(O){return this.__data__.has(O)},pn.prototype.set=function Fo(O,j){var ie=this.__data__;if(ie instanceof Xr){var _e=ie.__data__;if(!hn||_e.length<199)return _e.push([O,j]),this.size=++ie.size,this;ie=this.__data__=new dn(_e)}return ie.set(O,j),this.size=ie.size,this};var ei=br?function(O){return null==O?[]:(O=Object(O),function Ne(O,j){for(var ie=-1,_e=null==O?0:O.length,lt=0,qe=[];++ie<_e;){var It=O[ie];j(It,ie,O)&&(qe[lt++]=It)}return qe}(br(O),function(j){return gr.call(O,j)}))}:function Yo(){return[]},gn=Yn;function Bo(O,j){return!!(j=j??X)&&("number"==typeof O||$e.test(O))&&O>-1&&O%1==0&&O<j}function xn(O){if(null!=O){try{return at.call(O)}catch{}try{return O+""}catch{}}return""}function Es(O,j){return O===j||O!=O&&j!=j}(fn&&gn(new fn(new ArrayBuffer(1)))!=v||hn&&gn(new hn)!=de||At&&gn(At.resolve())!=Je||Tt&&gn(new Tt)!=ue||jt&&gn(new jt)!=p)&&(gn=function(O){var j=Yn(O),ie=j==ke?O.constructor:void 0,_e=ie?xn(ie):"";if(_e)switch(_e){case Vt:return v;case Qt:return de;case Nt:return Je;case Ft:return ue;case mt:return p}return j});var Go=_s(function(){return arguments}())?_s:function(O){return ti(O)&&ct.call(O,"callee")&&!gr.call(O,"callee")},yi=Array.isArray,Mi=ln||function Xo(){return!1};function Is(O){if(!Ss(O))return!1;var j=Yn(O);return j==me||j==Pe||j==te||j==se}function Ps(O){return"number"==typeof O&&O>-1&&O%1==0&&O<=X}function Ss(O){var j=typeof O;return null!=O&&("object"==j||"function"==j)}function ti(O){return null!=O&&"object"==typeof O}var Os=Ie?function ot(O){return function(j){return O(j)}}(Ie):function bs(O){return ti(O)&&Ps(O.length)&&!!Le[Yn(O)]};function Qo(O){return function Wo(O){return null!=O&&Ps(O.length)&&!Is(O)}(O)?function Mo(O,j){var ie=yi(O),_e=!ie&&Go(O),lt=!ie&&!_e&&Mi(O),qe=!ie&&!_e&&!lt&&Os(O),It=ie||_e||lt||qe,Wt=It?function rt(O,j){for(var ie=-1,_e=Array(O);++ie<O;)_e[ie]=j(ie);return _e}(O.length,String):[],er=Wt.length;for(var wt in O)(j||ct.call(O,wt))&&(!It||!("length"==wt||lt&&("offset"==wt||"parent"==wt)||qe&&("buffer"==wt||"byteLength"==wt||"byteOffset"==wt)||Bo(wt,er)))&&Wt.push(wt);return Wt}(O):function Uo(O){if(!function ko(O){var j=O&&O.constructor;return O===("function"==typeof j&&j.prototype||it)}(O))return Qn(O);var j=[];for(var ie in Object(O))ct.call(O,ie)&&"constructor"!=ie&&j.push(ie);return j}(O)}De.exports=function Jo(O,j){return ms(O,j)}},514:De=>{"use strict";function Z(m){try{return JSON.stringify(m)}catch{return'"[Circular]"'}}De.exports=function G(m,ae,ve){var x=ve&&ve.stringify||Z;if("object"==typeof m&&null!==m){var xe=ae.length+1;if(1===xe)return m;var he=new Array(xe);he[0]=x(m);for(var te=1;te<xe;te++)he[te]=x(ae[te]);return he.join(" ")}if("string"!=typeof m)return m;var ce=ae.length;if(0===ce)return m;for(var le="",Re=0,me=-1,Pe=m&&m.length||0,de=0;de<Pe;){if(37===m.charCodeAt(de)&&de+1<Pe){switch(me=me>-1?me:0,m.charCodeAt(de+1)){case 100:case 102:if(Re>=ce||null==ae[Re])break;me<de&&(le+=m.slice(me,de)),le+=Number(ae[Re]),me=de+2,de++;break;case 105:if(Re>=ce||null==ae[Re])break;me<de&&(le+=m.slice(me,de)),le+=Math.floor(Number(ae[Re])),me=de+2,de++;break;case 79:case 111:case 106:if(Re>=ce||void 0===ae[Re])break;me<de&&(le+=m.slice(me,de));var Ge=typeof ae[Re];if("string"===Ge){le+="'"+ae[Re]+"'",me=de+2,de++;break}if("function"===Ge){le+=ae[Re].name||"<anonymous>",me=de+2,de++;break}le+=x(ae[Re]),me=de+2,de++;break;case 115:if(Re>=ce)break;me<de&&(le+=m.slice(me,de)),le+=String(ae[Re]),me=de+2,de++;break;case 37:me<de&&(le+=m.slice(me,de)),le+="%",me=de+2,de++,Re--}++Re}++de}return-1===me?m:(me<Pe&&(le+=m.slice(me)),le)}},5499:(De,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.safeJsonParse=function G(ae){if("string"!=typeof ae)throw new Error("Cannot safe json parse value of type "+typeof ae);try{return JSON.parse(ae)}catch{return ae}},Z.safeJsonStringify=function m(ae){return"string"==typeof ae?ae:JSON.stringify(ae,(ve,x)=>typeof x>"u"?null:x)}},3569:De=>{"use strict";De.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},4308:(De,Z,G)=>{"use strict";G.r(Z),G.d(Z,{__assign:()=>ve,__asyncDelegator:()=>Je,__asyncGenerator:()=>ke,__asyncValues:()=>se,__await:()=>Me,__awaiter:()=>te,__classPrivateFieldGet:()=>q,__classPrivateFieldSet:()=>Q,__createBinding:()=>le,__decorate:()=>X,__exportStar:()=>Re,__extends:()=>ae,__generator:()=>ce,__importDefault:()=>fe,__importStar:()=>ue,__makeTemplateObject:()=>ne,__metadata:()=>he,__param:()=>xe,__read:()=>Pe,__rest:()=>x,__spread:()=>de,__spreadArrays:()=>Ge,__values:()=>me});var m=function(p,b){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,S){v.__proto__=S}||function(v,S){for(var _ in S)S.hasOwnProperty(_)&&(v[_]=S[_])})(p,b)};function ae(p,b){function v(){this.constructor=p}m(p,b),p.prototype=null===b?Object.create(b):(v.prototype=b.prototype,new v)}var ve=function(){return ve=Object.assign||function(b){for(var v,S=1,_=arguments.length;S<_;S++)for(var d in v=arguments[S])Object.prototype.hasOwnProperty.call(v,d)&&(b[d]=v[d]);return b},ve.apply(this,arguments)};function x(p,b){var v={};for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&b.indexOf(S)<0&&(v[S]=p[S]);if(null!=p&&"function"==typeof Object.getOwnPropertySymbols){var _=0;for(S=Object.getOwnPropertySymbols(p);_<S.length;_++)b.indexOf(S[_])<0&&Object.prototype.propertyIsEnumerable.call(p,S[_])&&(v[S[_]]=p[S[_]])}return v}function X(p,b,v,S){var E,_=arguments.length,d=_<3?b:null===S?S=Object.getOwnPropertyDescriptor(b,v):S;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(p,b,v,S);else for(var D=p.length-1;D>=0;D--)(E=p[D])&&(d=(_<3?E(d):_>3?E(b,v,d):E(b,v))||d);return _>3&&d&&Object.defineProperty(b,v,d),d}function xe(p,b){return function(v,S){b(v,S,p)}}function he(p,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(p,b)}function te(p,b,v,S){return new(v||(v=Promise))(function(d,E){function D(B){try{R(S.next(B))}catch(re){E(re)}}function ge(B){try{R(S.throw(B))}catch(re){E(re)}}function R(B){B.done?d(B.value):function _(d){return d instanceof v?d:new v(function(E){E(d)})}(B.value).then(D,ge)}R((S=S.apply(p,b||[])).next())})}function ce(p,b){var S,_,d,E,v={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return E={next:D(0),throw:D(1),return:D(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function D(R){return function(B){return function ge(R){if(S)throw new TypeError("Generator is already executing.");for(;v;)try{if(S=1,_&&(d=2&R[0]?_.return:R[0]?_.throw||((d=_.return)&&d.call(_),0):_.next)&&!(d=d.call(_,R[1])).done)return d;switch(_=0,d&&(R=[2&R[0],d.value]),R[0]){case 0:case 1:d=R;break;case 4:return v.label++,{value:R[1],done:!1};case 5:v.label++,_=R[1],R=[0];continue;case 7:R=v.ops.pop(),v.trys.pop();continue;default:if(!(d=(d=v.trys).length>0&&d[d.length-1])&&(6===R[0]||2===R[0])){v=0;continue}if(3===R[0]&&(!d||R[1]>d[0]&&R[1]<d[3])){v.label=R[1];break}if(6===R[0]&&v.label<d[1]){v.label=d[1],d=R;break}if(d&&v.label<d[2]){v.label=d[2],v.ops.push(R);break}d[2]&&v.ops.pop(),v.trys.pop();continue}R=b.call(p,v)}catch(B){R=[6,B],_=0}finally{S=d=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([R,B])}}}function le(p,b,v,S){void 0===S&&(S=v),p[S]=b[v]}function Re(p,b){for(var v in p)"default"!==v&&!b.hasOwnProperty(v)&&(b[v]=p[v])}function me(p){var b="function"==typeof Symbol&&Symbol.iterator,v=b&&p[b],S=0;if(v)return v.call(p);if(p&&"number"==typeof p.length)return{next:function(){return p&&S>=p.length&&(p=void 0),{value:p&&p[S++],done:!p}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pe(p,b){var v="function"==typeof Symbol&&p[Symbol.iterator];if(!v)return p;var _,E,S=v.call(p),d=[];try{for(;(void 0===b||b-- >0)&&!(_=S.next()).done;)d.push(_.value)}catch(D){E={error:D}}finally{try{_&&!_.done&&(v=S.return)&&v.call(S)}finally{if(E)throw E.error}}return d}function de(){for(var p=[],b=0;b<arguments.length;b++)p=p.concat(Pe(arguments[b]));return p}function Ge(){for(var p=0,b=0,v=arguments.length;b<v;b++)p+=arguments[b].length;var S=Array(p),_=0;for(b=0;b<v;b++)for(var d=arguments[b],E=0,D=d.length;E<D;E++,_++)S[_]=d[E];return S}function Me(p){return this instanceof Me?(this.v=p,this):new Me(p)}function ke(p,b,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,S=v.apply(p,b||[]),d=[];return _={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_;function E($){S[$]&&(_[$]=function(Se){return new Promise(function($e,Le){d.push([$,Se,$e,Le])>1||D($,Se)})})}function D($,Se){try{!function ge($){$.value instanceof Me?Promise.resolve($.value.v).then(R,B):re(d[0][2],$)}(S[$](Se))}catch($e){re(d[0][3],$e)}}function R($){D("next",$)}function B($){D("throw",$)}function re($,Se){$(Se),d.shift(),d.length&&D(d[0][0],d[0][1])}}function Je(p){var b,v;return b={},S("next"),S("throw",function(_){throw _}),S("return"),b[Symbol.iterator]=function(){return this},b;function S(_,d){b[_]=p[_]?function(E){return(v=!v)?{value:Me(p[_](E)),done:"return"===_}:d?d(E):E}:d}}function se(p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v,b=p[Symbol.asyncIterator];return b?b.call(p):(p=me(p),v={},S("next"),S("throw"),S("return"),v[Symbol.asyncIterator]=function(){return this},v);function S(d){v[d]=p[d]&&function(E){return new Promise(function(D,ge){!function _(d,E,D,ge){Promise.resolve(ge).then(function(R){d({value:R,done:D})},E)}(D,ge,(E=p[d](E)).done,E.value)})}}}function ne(p,b){return Object.defineProperty?Object.defineProperty(p,"raw",{value:b}):p.raw=b,p}function ue(p){if(p&&p.__esModule)return p;var b={};if(null!=p)for(var v in p)Object.hasOwnProperty.call(p,v)&&(b[v]=p[v]);return b.default=p,b}function fe(p){return p&&p.__esModule?p:{default:p}}function q(p,b){if(!b.has(p))throw new TypeError("attempted to get private field on non-instance");return b.get(p)}function Q(p,b,v){if(!b.has(p))throw new TypeError("attempted to set private field on non-instance");return b.set(p,v),v}},9653:(De,Z,G)=>{"use strict";G.r(Z),G.d(Z,{__assign:()=>ve,__asyncDelegator:()=>Je,__asyncGenerator:()=>ke,__asyncValues:()=>se,__await:()=>Me,__awaiter:()=>te,__classPrivateFieldGet:()=>q,__classPrivateFieldSet:()=>Q,__createBinding:()=>le,__decorate:()=>X,__exportStar:()=>Re,__extends:()=>ae,__generator:()=>ce,__importDefault:()=>fe,__importStar:()=>ue,__makeTemplateObject:()=>ne,__metadata:()=>he,__param:()=>xe,__read:()=>Pe,__rest:()=>x,__spread:()=>de,__spreadArrays:()=>Ge,__values:()=>me});var m=function(p,b){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,S){v.__proto__=S}||function(v,S){for(var _ in S)S.hasOwnProperty(_)&&(v[_]=S[_])})(p,b)};function ae(p,b){function v(){this.constructor=p}m(p,b),p.prototype=null===b?Object.create(b):(v.prototype=b.prototype,new v)}var ve=function(){return ve=Object.assign||function(b){for(var v,S=1,_=arguments.length;S<_;S++)for(var d in v=arguments[S])Object.prototype.hasOwnProperty.call(v,d)&&(b[d]=v[d]);return b},ve.apply(this,arguments)};function x(p,b){var v={};for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&b.indexOf(S)<0&&(v[S]=p[S]);if(null!=p&&"function"==typeof Object.getOwnPropertySymbols){var _=0;for(S=Object.getOwnPropertySymbols(p);_<S.length;_++)b.indexOf(S[_])<0&&Object.prototype.propertyIsEnumerable.call(p,S[_])&&(v[S[_]]=p[S[_]])}return v}function X(p,b,v,S){var E,_=arguments.length,d=_<3?b:null===S?S=Object.getOwnPropertyDescriptor(b,v):S;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(p,b,v,S);else for(var D=p.length-1;D>=0;D--)(E=p[D])&&(d=(_<3?E(d):_>3?E(b,v,d):E(b,v))||d);return _>3&&d&&Object.defineProperty(b,v,d),d}function xe(p,b){return function(v,S){b(v,S,p)}}function he(p,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(p,b)}function te(p,b,v,S){return new(v||(v=Promise))(function(d,E){function D(B){try{R(S.next(B))}catch(re){E(re)}}function ge(B){try{R(S.throw(B))}catch(re){E(re)}}function R(B){B.done?d(B.value):function _(d){return d instanceof v?d:new v(function(E){E(d)})}(B.value).then(D,ge)}R((S=S.apply(p,b||[])).next())})}function ce(p,b){var S,_,d,E,v={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return E={next:D(0),throw:D(1),return:D(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function D(R){return function(B){return function ge(R){if(S)throw new TypeError("Generator is already executing.");for(;v;)try{if(S=1,_&&(d=2&R[0]?_.return:R[0]?_.throw||((d=_.return)&&d.call(_),0):_.next)&&!(d=d.call(_,R[1])).done)return d;switch(_=0,d&&(R=[2&R[0],d.value]),R[0]){case 0:case 1:d=R;break;case 4:return v.label++,{value:R[1],done:!1};case 5:v.label++,_=R[1],R=[0];continue;case 7:R=v.ops.pop(),v.trys.pop();continue;default:if(!(d=(d=v.trys).length>0&&d[d.length-1])&&(6===R[0]||2===R[0])){v=0;continue}if(3===R[0]&&(!d||R[1]>d[0]&&R[1]<d[3])){v.label=R[1];break}if(6===R[0]&&v.label<d[1]){v.label=d[1],d=R;break}if(d&&v.label<d[2]){v.label=d[2],v.ops.push(R);break}d[2]&&v.ops.pop(),v.trys.pop();continue}R=b.call(p,v)}catch(B){R=[6,B],_=0}finally{S=d=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([R,B])}}}function le(p,b,v,S){void 0===S&&(S=v),p[S]=b[v]}function Re(p,b){for(var v in p)"default"!==v&&!b.hasOwnProperty(v)&&(b[v]=p[v])}function me(p){var b="function"==typeof Symbol&&Symbol.iterator,v=b&&p[b],S=0;if(v)return v.call(p);if(p&&"number"==typeof p.length)return{next:function(){return p&&S>=p.length&&(p=void 0),{value:p&&p[S++],done:!p}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pe(p,b){var v="function"==typeof Symbol&&p[Symbol.iterator];if(!v)return p;var _,E,S=v.call(p),d=[];try{for(;(void 0===b||b-- >0)&&!(_=S.next()).done;)d.push(_.value)}catch(D){E={error:D}}finally{try{_&&!_.done&&(v=S.return)&&v.call(S)}finally{if(E)throw E.error}}return d}function de(){for(var p=[],b=0;b<arguments.length;b++)p=p.concat(Pe(arguments[b]));return p}function Ge(){for(var p=0,b=0,v=arguments.length;b<v;b++)p+=arguments[b].length;var S=Array(p),_=0;for(b=0;b<v;b++)for(var d=arguments[b],E=0,D=d.length;E<D;E++,_++)S[_]=d[E];return S}function Me(p){return this instanceof Me?(this.v=p,this):new Me(p)}function ke(p,b,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,S=v.apply(p,b||[]),d=[];return _={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_;function E($){S[$]&&(_[$]=function(Se){return new Promise(function($e,Le){d.push([$,Se,$e,Le])>1||D($,Se)})})}function D($,Se){try{!function ge($){$.value instanceof Me?Promise.resolve($.value.v).then(R,B):re(d[0][2],$)}(S[$](Se))}catch($e){re(d[0][3],$e)}}function R($){D("next",$)}function B($){D("throw",$)}function re($,Se){$(Se),d.shift(),d.length&&D(d[0][0],d[0][1])}}function Je(p){var b,v;return b={},S("next"),S("throw",function(_){throw _}),S("return"),b[Symbol.iterator]=function(){return this},b;function S(_,d){b[_]=p[_]?function(E){return(v=!v)?{value:Me(p[_](E)),done:"return"===_}:d?d(E):E}:d}}function se(p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v,b=p[Symbol.asyncIterator];return b?b.call(p):(p=me(p),v={},S("next"),S("throw"),S("return"),v[Symbol.asyncIterator]=function(){return this},v);function S(d){v[d]=p[d]&&function(E){return new Promise(function(D,ge){!function _(d,E,D,ge){Promise.resolve(ge).then(function(R){d({value:R,done:D})},E)}(D,ge,(E=p[d](E)).done,E.value)})}}}function ne(p,b){return Object.defineProperty?Object.defineProperty(p,"raw",{value:b}):p.raw=b,p}function ue(p){if(p&&p.__esModule)return p;var b={};if(null!=p)for(var v in p)Object.hasOwnProperty.call(p,v)&&(b[v]=p[v]);return b.default=p,b}function fe(p){return p&&p.__esModule?p:{default:p}}function q(p,b){if(!b.has(p))throw new TypeError("attempted to get private field on non-instance");return b.get(p)}function Q(p,b,v){if(!b.has(p))throw new TypeError("attempted to set private field on non-instance");return b.set(p,v),v}},3893:(De,Z,G)=>{"use strict";G.r(Z),G.d(Z,{__assign:()=>ve,__asyncDelegator:()=>Je,__asyncGenerator:()=>ke,__asyncValues:()=>se,__await:()=>Me,__awaiter:()=>te,__classPrivateFieldGet:()=>q,__classPrivateFieldSet:()=>Q,__createBinding:()=>le,__decorate:()=>X,__exportStar:()=>Re,__extends:()=>ae,__generator:()=>ce,__importDefault:()=>fe,__importStar:()=>ue,__makeTemplateObject:()=>ne,__metadata:()=>he,__param:()=>xe,__read:()=>Pe,__rest:()=>x,__spread:()=>de,__spreadArrays:()=>Ge,__values:()=>me});var m=function(p,b){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,S){v.__proto__=S}||function(v,S){for(var _ in S)S.hasOwnProperty(_)&&(v[_]=S[_])})(p,b)};function ae(p,b){function v(){this.constructor=p}m(p,b),p.prototype=null===b?Object.create(b):(v.prototype=b.prototype,new v)}var ve=function(){return ve=Object.assign||function(b){for(var v,S=1,_=arguments.length;S<_;S++)for(var d in v=arguments[S])Object.prototype.hasOwnProperty.call(v,d)&&(b[d]=v[d]);return b},ve.apply(this,arguments)};function x(p,b){var v={};for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&b.indexOf(S)<0&&(v[S]=p[S]);if(null!=p&&"function"==typeof Object.getOwnPropertySymbols){var _=0;for(S=Object.getOwnPropertySymbols(p);_<S.length;_++)b.indexOf(S[_])<0&&Object.prototype.propertyIsEnumerable.call(p,S[_])&&(v[S[_]]=p[S[_]])}return v}function X(p,b,v,S){var E,_=arguments.length,d=_<3?b:null===S?S=Object.getOwnPropertyDescriptor(b,v):S;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(p,b,v,S);else for(var D=p.length-1;D>=0;D--)(E=p[D])&&(d=(_<3?E(d):_>3?E(b,v,d):E(b,v))||d);return _>3&&d&&Object.defineProperty(b,v,d),d}function xe(p,b){return function(v,S){b(v,S,p)}}function he(p,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(p,b)}function te(p,b,v,S){return new(v||(v=Promise))(function(d,E){function D(B){try{R(S.next(B))}catch(re){E(re)}}function ge(B){try{R(S.throw(B))}catch(re){E(re)}}function R(B){B.done?d(B.value):function _(d){return d instanceof v?d:new v(function(E){E(d)})}(B.value).then(D,ge)}R((S=S.apply(p,b||[])).next())})}function ce(p,b){var S,_,d,E,v={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return E={next:D(0),throw:D(1),return:D(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function D(R){return function(B){return function ge(R){if(S)throw new TypeError("Generator is already executing.");for(;v;)try{if(S=1,_&&(d=2&R[0]?_.return:R[0]?_.throw||((d=_.return)&&d.call(_),0):_.next)&&!(d=d.call(_,R[1])).done)return d;switch(_=0,d&&(R=[2&R[0],d.value]),R[0]){case 0:case 1:d=R;break;case 4:return v.label++,{value:R[1],done:!1};case 5:v.label++,_=R[1],R=[0];continue;case 7:R=v.ops.pop(),v.trys.pop();continue;default:if(!(d=(d=v.trys).length>0&&d[d.length-1])&&(6===R[0]||2===R[0])){v=0;continue}if(3===R[0]&&(!d||R[1]>d[0]&&R[1]<d[3])){v.label=R[1];break}if(6===R[0]&&v.label<d[1]){v.label=d[1],d=R;break}if(d&&v.label<d[2]){v.label=d[2],v.ops.push(R);break}d[2]&&v.ops.pop(),v.trys.pop();continue}R=b.call(p,v)}catch(B){R=[6,B],_=0}finally{S=d=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([R,B])}}}function le(p,b,v,S){void 0===S&&(S=v),p[S]=b[v]}function Re(p,b){for(var v in p)"default"!==v&&!b.hasOwnProperty(v)&&(b[v]=p[v])}function me(p){var b="function"==typeof Symbol&&Symbol.iterator,v=b&&p[b],S=0;if(v)return v.call(p);if(p&&"number"==typeof p.length)return{next:function(){return p&&S>=p.length&&(p=void 0),{value:p&&p[S++],done:!p}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pe(p,b){var v="function"==typeof Symbol&&p[Symbol.iterator];if(!v)return p;var _,E,S=v.call(p),d=[];try{for(;(void 0===b||b-- >0)&&!(_=S.next()).done;)d.push(_.value)}catch(D){E={error:D}}finally{try{_&&!_.done&&(v=S.return)&&v.call(S)}finally{if(E)throw E.error}}return d}function de(){for(var p=[],b=0;b<arguments.length;b++)p=p.concat(Pe(arguments[b]));return p}function Ge(){for(var p=0,b=0,v=arguments.length;b<v;b++)p+=arguments[b].length;var S=Array(p),_=0;for(b=0;b<v;b++)for(var d=arguments[b],E=0,D=d.length;E<D;E++,_++)S[_]=d[E];return S}function Me(p){return this instanceof Me?(this.v=p,this):new Me(p)}function ke(p,b,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,S=v.apply(p,b||[]),d=[];return _={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_;function E($){S[$]&&(_[$]=function(Se){return new Promise(function($e,Le){d.push([$,Se,$e,Le])>1||D($,Se)})})}function D($,Se){try{!function ge($){$.value instanceof Me?Promise.resolve($.value.v).then(R,B):re(d[0][2],$)}(S[$](Se))}catch($e){re(d[0][3],$e)}}function R($){D("next",$)}function B($){D("throw",$)}function re($,Se){$(Se),d.shift(),d.length&&D(d[0][0],d[0][1])}}function Je(p){var b,v;return b={},S("next"),S("throw",function(_){throw _}),S("return"),b[Symbol.iterator]=function(){return this},b;function S(_,d){b[_]=p[_]?function(E){return(v=!v)?{value:Me(p[_](E)),done:"return"===_}:d?d(E):E}:d}}function se(p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v,b=p[Symbol.asyncIterator];return b?b.call(p):(p=me(p),v={},S("next"),S("throw"),S("return"),v[Symbol.asyncIterator]=function(){return this},v);function S(d){v[d]=p[d]&&function(E){return new Promise(function(D,ge){!function _(d,E,D,ge){Promise.resolve(ge).then(function(R){d({value:R,done:D})},E)}(D,ge,(E=p[d](E)).done,E.value)})}}}function ne(p,b){return Object.defineProperty?Object.defineProperty(p,"raw",{value:b}):p.raw=b,p}function ue(p){if(p&&p.__esModule)return p;var b={};if(null!=p)for(var v in p)Object.hasOwnProperty.call(p,v)&&(b[v]=p[v]);return b.default=p,b}function fe(p){return p&&p.__esModule?p:{default:p}}function q(p,b){if(!b.has(p))throw new TypeError("attempted to get private field on non-instance");return b.get(p)}function Q(p,b,v){if(!b.has(p))throw new TypeError("attempted to set private field on non-instance");return b.set(p,v),v}},7121:(De,Z,G)=>{"use strict";G.r(Z),G.d(Z,{__assign:()=>ve,__asyncDelegator:()=>Je,__asyncGenerator:()=>ke,__asyncValues:()=>se,__await:()=>Me,__awaiter:()=>te,__classPrivateFieldGet:()=>q,__classPrivateFieldSet:()=>Q,__createBinding:()=>le,__decorate:()=>X,__exportStar:()=>Re,__extends:()=>ae,__generator:()=>ce,__importDefault:()=>fe,__importStar:()=>ue,__makeTemplateObject:()=>ne,__metadata:()=>he,__param:()=>xe,__read:()=>Pe,__rest:()=>x,__spread:()=>de,__spreadArrays:()=>Ge,__values:()=>me});var m=function(p,b){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,S){v.__proto__=S}||function(v,S){for(var _ in S)S.hasOwnProperty(_)&&(v[_]=S[_])})(p,b)};function ae(p,b){function v(){this.constructor=p}m(p,b),p.prototype=null===b?Object.create(b):(v.prototype=b.prototype,new v)}var ve=function(){return ve=Object.assign||function(b){for(var v,S=1,_=arguments.length;S<_;S++)for(var d in v=arguments[S])Object.prototype.hasOwnProperty.call(v,d)&&(b[d]=v[d]);return b},ve.apply(this,arguments)};function x(p,b){var v={};for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&b.indexOf(S)<0&&(v[S]=p[S]);if(null!=p&&"function"==typeof Object.getOwnPropertySymbols){var _=0;for(S=Object.getOwnPropertySymbols(p);_<S.length;_++)b.indexOf(S[_])<0&&Object.prototype.propertyIsEnumerable.call(p,S[_])&&(v[S[_]]=p[S[_]])}return v}function X(p,b,v,S){var E,_=arguments.length,d=_<3?b:null===S?S=Object.getOwnPropertyDescriptor(b,v):S;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(p,b,v,S);else for(var D=p.length-1;D>=0;D--)(E=p[D])&&(d=(_<3?E(d):_>3?E(b,v,d):E(b,v))||d);return _>3&&d&&Object.defineProperty(b,v,d),d}function xe(p,b){return function(v,S){b(v,S,p)}}function he(p,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(p,b)}function te(p,b,v,S){return new(v||(v=Promise))(function(d,E){function D(B){try{R(S.next(B))}catch(re){E(re)}}function ge(B){try{R(S.throw(B))}catch(re){E(re)}}function R(B){B.done?d(B.value):function _(d){return d instanceof v?d:new v(function(E){E(d)})}(B.value).then(D,ge)}R((S=S.apply(p,b||[])).next())})}function ce(p,b){var S,_,d,E,v={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return E={next:D(0),throw:D(1),return:D(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function D(R){return function(B){return function ge(R){if(S)throw new TypeError("Generator is already executing.");for(;v;)try{if(S=1,_&&(d=2&R[0]?_.return:R[0]?_.throw||((d=_.return)&&d.call(_),0):_.next)&&!(d=d.call(_,R[1])).done)return d;switch(_=0,d&&(R=[2&R[0],d.value]),R[0]){case 0:case 1:d=R;break;case 4:return v.label++,{value:R[1],done:!1};case 5:v.label++,_=R[1],R=[0];continue;case 7:R=v.ops.pop(),v.trys.pop();continue;default:if(!(d=(d=v.trys).length>0&&d[d.length-1])&&(6===R[0]||2===R[0])){v=0;continue}if(3===R[0]&&(!d||R[1]>d[0]&&R[1]<d[3])){v.label=R[1];break}if(6===R[0]&&v.label<d[1]){v.label=d[1],d=R;break}if(d&&v.label<d[2]){v.label=d[2],v.ops.push(R);break}d[2]&&v.ops.pop(),v.trys.pop();continue}R=b.call(p,v)}catch(B){R=[6,B],_=0}finally{S=d=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([R,B])}}}function le(p,b,v,S){void 0===S&&(S=v),p[S]=b[v]}function Re(p,b){for(var v in p)"default"!==v&&!b.hasOwnProperty(v)&&(b[v]=p[v])}function me(p){var b="function"==typeof Symbol&&Symbol.iterator,v=b&&p[b],S=0;if(v)return v.call(p);if(p&&"number"==typeof p.length)return{next:function(){return p&&S>=p.length&&(p=void 0),{value:p&&p[S++],done:!p}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pe(p,b){var v="function"==typeof Symbol&&p[Symbol.iterator];if(!v)return p;var _,E,S=v.call(p),d=[];try{for(;(void 0===b||b-- >0)&&!(_=S.next()).done;)d.push(_.value)}catch(D){E={error:D}}finally{try{_&&!_.done&&(v=S.return)&&v.call(S)}finally{if(E)throw E.error}}return d}function de(){for(var p=[],b=0;b<arguments.length;b++)p=p.concat(Pe(arguments[b]));return p}function Ge(){for(var p=0,b=0,v=arguments.length;b<v;b++)p+=arguments[b].length;var S=Array(p),_=0;for(b=0;b<v;b++)for(var d=arguments[b],E=0,D=d.length;E<D;E++,_++)S[_]=d[E];return S}function Me(p){return this instanceof Me?(this.v=p,this):new Me(p)}function ke(p,b,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,S=v.apply(p,b||[]),d=[];return _={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_;function E($){S[$]&&(_[$]=function(Se){return new Promise(function($e,Le){d.push([$,Se,$e,Le])>1||D($,Se)})})}function D($,Se){try{!function ge($){$.value instanceof Me?Promise.resolve($.value.v).then(R,B):re(d[0][2],$)}(S[$](Se))}catch($e){re(d[0][3],$e)}}function R($){D("next",$)}function B($){D("throw",$)}function re($,Se){$(Se),d.shift(),d.length&&D(d[0][0],d[0][1])}}function Je(p){var b,v;return b={},S("next"),S("throw",function(_){throw _}),S("return"),b[Symbol.iterator]=function(){return this},b;function S(_,d){b[_]=p[_]?function(E){return(v=!v)?{value:Me(p[_](E)),done:"return"===_}:d?d(E):E}:d}}function se(p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v,b=p[Symbol.asyncIterator];return b?b.call(p):(p=me(p),v={},S("next"),S("throw"),S("return"),v[Symbol.asyncIterator]=function(){return this},v);function S(d){v[d]=p[d]&&function(E){return new Promise(function(D,ge){!function _(d,E,D,ge){Promise.resolve(ge).then(function(R){d({value:R,done:D})},E)}(D,ge,(E=p[d](E)).done,E.value)})}}}function ne(p,b){return Object.defineProperty?Object.defineProperty(p,"raw",{value:b}):p.raw=b,p}function ue(p){if(p&&p.__esModule)return p;var b={};if(null!=p)for(var v in p)Object.hasOwnProperty.call(p,v)&&(b[v]=p[v]);return b.default=p,b}function fe(p){return p&&p.__esModule?p:{default:p}}function q(p,b){if(!b.has(p))throw new TypeError("attempted to get private field on non-instance");return b.get(p)}function Q(p,b,v){if(!b.has(p))throw new TypeError("attempted to set private field on non-instance");return b.set(p,v),v}},1590:(De,Z,G)=>{"use strict";const m=G(514);De.exports=X;const ae=function fe(){function q(Q){return typeof Q<"u"&&Q}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return q(self)||q(window)||q(this)||{}}}().console||{},ve={mapHttpRequest:Ge,mapHttpResponse:Ge,wrapRequestSerializer:Me,wrapResponseSerializer:Me,wrapErrorSerializer:Me,req:Ge,res:Ge,err:function Pe(q){const Q={type:q.constructor.name,msg:q.message,stack:q.stack};for(const p in q)void 0===Q[p]&&(Q[p]=q[p]);return Q}};function X(q){(q=q||{}).browser=q.browser||{};const Q=q.browser.transmit;if(Q&&"function"!=typeof Q.send)throw Error("pino: transmit option must have a send function");const p=q.browser.write||ae;q.browser.write&&(q.browser.asObject=!0);const b=q.serializers||{},v=function x(q,Q){return Array.isArray(q)?q.filter(function(b){return"!stdSerializers.err"!==b}):!0===q&&Object.keys(Q)}(q.browser.serialize,b);let S=q.browser.serialize;Array.isArray(q.browser.serialize)&&q.browser.serialize.indexOf("!stdSerializers.err")>-1&&(S=!1),"function"==typeof p&&(p.error=p.fatal=p.warn=p.info=p.debug=p.trace=p),!1===q.enabled&&(q.level="silent");const d=q.level||"info",E=Object.create(p);E.log||(E.log=ke),Object.defineProperty(E,"levelVal",{get:function ge(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(E,"level",{get:function R(){return this._level},set:function B($){if("silent"!==$&&!this.levels.values[$])throw Error("unknown level "+$);this._level=$,xe(D,E,"error","log"),xe(D,E,"fatal","error"),xe(D,E,"warn","error"),xe(D,E,"info","log"),xe(D,E,"debug","log"),xe(D,E,"trace","log")}});const D={transmit:Q,serialize:v,asObject:q.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:de(q)};return E.levels=X.levels,E.level=d,E.setMaxListeners=E.getMaxListeners=E.emit=E.addListener=E.on=E.prependListener=E.once=E.prependOnceListener=E.removeListener=E.removeAllListeners=E.listeners=E.listenerCount=E.eventNames=E.write=E.flush=ke,E.serializers=b,E._serialize=v,E._stdErrSerialize=S,E.child=function re($,Se){if(!$)throw new Error("missing bindings for child Pino");Se=Se||{},v&&$.serializers&&(Se.serializers=$.serializers);const $e=Se.serializers;if(v&&$e){var Le=Object.assign({},b,$e),Qr=!0===q.browser.serialize?Object.keys(Le):v;delete $.serializers,ce([$],Qr,Le,this._stdErrSerialize)}function Yr(dt){this._childLevel=1+(0|dt._childLevel),this.error=le(dt,$,"error"),this.fatal=le(dt,$,"fatal"),this.warn=le(dt,$,"warn"),this.info=le(dt,$,"info"),this.debug=le(dt,$,"debug"),this.trace=le(dt,$,"trace"),Le&&(this.serializers=Le,this._serialize=Qr),Q&&(this._logEvent=me([].concat(dt._logEvent.bindings,$)))}return Yr.prototype=this,new Yr(this)},Q&&(E._logEvent=me()),E}function xe(q,Q,p,b){const v=Object.getPrototypeOf(Q);Q[p]=Q.levelVal>Q.levels.values[p]?ke:v[p]?v[p]:ae[p]||ae[b]||ke,function he(q,Q,p){!q.transmit&&Q[p]===ke||(Q[p]=function(b){return function(){const S=q.timestamp(),_=new Array(arguments.length),d=Object.getPrototypeOf&&Object.getPrototypeOf(this)===ae?ae:this;for(var E=0;E<_.length;E++)_[E]=arguments[E];if(q.serialize&&!q.asObject&&ce(_,this._serialize,this.serializers,this._stdErrSerialize),q.asObject?b.call(d,function te(q,Q,p,b){q._serialize&&ce(p,q._serialize,q.serializers,q._stdErrSerialize);const v=p.slice();let S=v[0];const _={};b&&(_.time=b),_.level=X.levels.values[Q];let d=1+(0|q._childLevel);if(d<1&&(d=1),null!==S&&"object"==typeof S){for(;d--&&"object"==typeof v[0];)Object.assign(_,v.shift());S=v.length?m(v.shift(),v):void 0}else"string"==typeof S&&(S=m(v.shift(),v));return void 0!==S&&(_.msg=S),_}(this,p,_,S)):b.apply(d,_),q.transmit){const D=q.transmit.level||Q.level,R=X.levels.values[p];if(R<X.levels.values[D])return;!function Re(q,Q,p){const b=Q.send,v=Q.ts,S=Q.methodLevel,_=Q.methodValue,d=Q.val,E=q._logEvent.bindings;ce(p,q._serialize||Object.keys(q.serializers),q.serializers,void 0===q._stdErrSerialize||q._stdErrSerialize),q._logEvent.ts=v,q._logEvent.messages=p.filter(function(D){return-1===E.indexOf(D)}),q._logEvent.level.label=S,q._logEvent.level.value=_,b(S,q._logEvent,d),q._logEvent=me(E)}(this,{ts:S,methodLevel:p,methodValue:R,transmitLevel:D,transmitValue:X.levels.values[q.transmit.level||Q.level],send:q.transmit.send,val:Q.levelVal},_)}}}(Q[p]))}(q,Q,p)}function ce(q,Q,p,b){for(const v in q)if(b&&q[v]instanceof Error)q[v]=X.stdSerializers.err(q[v]);else if("object"==typeof q[v]&&!Array.isArray(q[v]))for(const S in q[v])Q&&Q.indexOf(S)>-1&&S in p&&(q[v][S]=p[S](q[v][S]))}function le(q,Q,p){return function(){const b=new Array(1+arguments.length);b[0]=Q;for(var v=1;v<b.length;v++)b[v]=arguments[v-1];return q[p].apply(this,b)}}function me(q){return{ts:0,messages:[],bindings:q||[],level:{label:"",value:0}}}function de(q){return"function"==typeof q.timestamp?q.timestamp:!1===q.timestamp?Je:se}function Ge(){return{}}function Me(q){return q}function ke(){}function Je(){return!1}function se(){return Date.now()}X.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},X.stdSerializers=ve,X.stdTimeFunctions=Object.assign({},{nullTime:Je,epochTime:se,unixTime:function ne(){return Math.round(Date.now()/1e3)},isoTime:function ue(){return new Date(Date.now()).toISOString()}})}}]);